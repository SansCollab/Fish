require=function o(a,r,h){function c(e,t){if(!r[e]){if(!a[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(l)return l(e,!0);var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}var n=r[e]={exports:{}};a[e][0].call(n.exports,function(t){return c(a[e][1][t]||t)},n,n.exports,o,a,r,h)}return r[e].exports}for(var l="function"==typeof require&&require,t=0;t<h.length;t++)c(h[t]);return c}({ADUtils:[function(t,e,i){"use strict";cc._RF.push(e,"3cf54jLX09JsrB3ii/PHzmR","ADUtils");var o={init:function(t){this.game=t},videoLoadFailedListener:function(e){var i=this;this.loadFaildlistener=cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:"OnVideoLoadFailed",callback:function(t){i.game.gameUI.removeLoadingLayer(),console.log("videoLoadFailedListener game"),e(),i.removeAllListener()}}),cc.eventManager.addListener(this.loadFaildlistener,1)},videoLoadSucceedListener:function(e){var i=this;this.loadSuccesslistener=cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:"OnVideoLoadSucceed",callback:function(t){i.game.gameUI.removeLoadingLayer(),console.log("videoLoadSucceedListener game"),e(),i.removeLoadListener()}}),cc.eventManager.addListener(this.loadSuccesslistener,1)},videoCloseFailedListener:function(e){var i=this;this.closeFaildlistener=cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:"OnVideoCloseFailed",callback:function(t){i.game.gameUI.removeLoadingLayer(),console.log("videoCloseFailedListener game"),e(),i.removeCloseListener()}}),cc.eventManager.addListener(this.closeFaildlistener,1)},videoCloseSucceedListener:function(e){var i=this;this.closeSuccesslistener=cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:"OnVideoCloseSucceed",callback:function(t){i.game.gameUI.removeLoadingLayer(),console.log("videoCloseSucceedListener game"),e(),i.removeCloseListener()}}),cc.eventManager.addListener(this.closeSuccesslistener,1)},removeAllListener:function(){this.removeLoadListener(),this.removeCloseListener()},removeLoadListener:function(){this.loadFaildlistener&&(cc.eventManager.removeListener(this.loadFaildlistener),this.loadFaildlistener=null),this.loadSuccesslistener&&(cc.eventManager.removeListener(this.loadSuccesslistener),this.loadSuccesslistener=null)},removeCloseListener:function(){this.closeFaildlistener&&(cc.eventManager.removeListener(this.closeFaildlistener),this.closeFaildlistener=null),this.closeSuccesslistener&&(cc.eventManager.removeListener(this.closeSuccesslistener),this.closeSuccesslistener=null)},loadAndShowVideoAD:function(t,e,i){console.log("loadAndShowVideoAD : "+t);var s=this;this.videoLoadSucceedListener(function(){s.removeAllListener(),s.showVideoAD(t,e,i),console.log("loadVideoADSucceed")}),this.videoLoadFailedListener(function(){Tip.show(s.game.i18n.t("otherError"),2),console.log("loadVideoADFaild"),s.game.gameUI.removeLoadingLayer(),s.removeAllListener()}),loadVideoAds(t,e),this.game.gameUI.initWithLoadingLayer()},showVideoAD:function(t,e,i){console.log("showVideoAD : "+t);var s=this;s.videoCloseSucceedListener(function(){s.game.gameUI.removeLoadingLayer(),s.removeAllListener(),i&&i(),s.game.watchAd(),console.log("showVideoADSucceed")}),s.videoCloseFailedListener(function(){s.game.gameUI.removeLoadingLayer(),s.removeAllListener(),Tip.show(s.game.i18n.t("otherError"),2),console.log("showVideoADFaild")}),s.game.audioMng.mute(),showVideoAds(t,e),s.game.gameUI.initWithLoadingLayer()},showAD:function(t,e,i,s){if(console.log("showAD : "+t),cc.sys.isNative){var n=trackVideoAdsState(t,e);console.log("state:"+n),0===n?o.showVideoAD(t,e,i):1===n?o.loadAndShowVideoAD(t,e,i):2===n?(Tip.show(this.game.i18n.t("netError"),2),s&&s()):3===n&&(Tip.show(this.game.i18n.t("otherError"),2),s&&s())}else i&&i()},showADNoTip:function(t,e,i,s){if(console.log("showAD : "+t),cc.sys.isNative){var n=trackVideoAdsState(t,e);console.log("state:"+n),0===n?o.showVideoAD(t,e,i):1===n?o.loadAndShowVideoAD(t,e,i):2===n?s&&s():3===n&&s&&s()}else i&&i()}};e.exports=o,cc._RF.pop()},{}],AchievementCheck:[function(t,e,i){"use strict";cc._RF.push(e,"a2ac2ll7AJK7JF3qD49Eynw","AchievementCheck");var l=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{rewardPre:cc.Prefab},init:function(t){this.game=t},start:function(){},checkAchievementState:function(){var t=this.game.achievementConfigList,e=[];for(var i in t)if(t.hasOwnProperty(i)){var s=t[i],n=s.id;if(this.game.userData.achievement.hasOwnProperty(n))continue;var o=s.type,a=s.count;this.getFishDataByType(o)>=a&&(l.updateAchievement(n,!1,!1),e.push(n))}this.achievementRewardShow(e)},achievementRewardShow:function(t){var e=this,i=this.game.achievementConfigList,s=this.game.userData.guide.achievement,n=t.length;if(!s&&0<n){var o=cc.callFunc(function(){l.updateGuide("achievement",!0),e.game.gameUI.initWithMask(e.game.gameUI.maskLayerReferNode,!0,!1)});this.node.runAction(cc.sequence(cc.delayTime(.5),o))}for(var a=0;a<t.length;a++){var r=i[t[a]],h=cc.instantiate(this.rewardPre),c=this.getFishDataByType(r.type);h.getComponent("Reward").init(this.game,r,c,null,1,!0),this.game.gameUI.node.addChild(h,4),h.setPosition(cc.p(0,cc.winSize.height/2+this.rewardPre.data.height/2)),h.runAction(cc.sequence(cc.delayTime(3*a),cc.moveBy(.5,cc.v2(0,-(this.rewardPre.data.height+4))),cc.delayTime(2),cc.moveBy(.5,cc.v2(0,this.rewardPre.data.height+4)),cc.removeSelf()))}},getFishDataByType:function(t){var e=this.game.userData,i=0;switch(t){case 1:i=e.fishData.fishCount;break;case 2:i=Math.abs(this.game.hook.maxLimitY_M);break;case 3:i=e.fishData.totalCount;break;case 4:i=e.fishData.totalCoin;break;case 5:i=e.fishData.highestReward;break;case 6:i=Object.getOwnPropertyNames(e.fishGet.rare).length;break;case 7:i=e.fishData.specialFishCountOnce;break;case 8:i=e.shareCount}return i}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage"}],Achievement:[function(t,e,i){"use strict";cc._RF.push(e,"0e739WyUY9FcpVJ6OQJf+6M","Achievement");var s=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{achievementTxt:cc.Label,content:cc.Node,scrollView:cc.ScrollView,reward:cc.Prefab,bufferZone:0,spawnCount:10},onLoad:function(){this.updateTimer=0,this.updateInterval=.03,this.lastContentPosY=0},init:function(t,e){var i=this;this.game=t,this.closeFunc=e;this.node.getComponent("MoveEffect").setActCallFunc(function(){i.game.gameUI.removeLoadingLayer(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,i.onKeyDown,i)}),this.sortRewardList(),this.initWithReward(),this.resetI18nTxt()},resetI18nTxt:function(){this.achievementTxt.string=this.game.i18n.t("achievement")},sortRewardList:function(){var t=this.game.achievementConfigList,e=[],i=[],s=[],n=[];for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];switch(this.getRewardStatus(a.id)){case 0:s.push(a);break;case 1:i.push(a);break;case 2:e.push(a)}}n=(n=(n=n.concat(i)).concat(s)).concat(e),this.achievementSortList=n},initWithReward:function(){var t=Object.getOwnPropertyNames(this.game.achievementConfigList).length;this.content.height=t*this.reward.data.height+10,this.items=[],t<=this.spawnCount&&(this.spawnCount=t);for(var e=0;e<this.spawnCount;e++){var i=e,s=this.achievementSortList[i],n=cc.instantiate(this.reward),o=this.getRewardStatus(s.id),a=this.game.achievementCheck.getFishDataByType(s.type);n.getComponent("Reward").init(this.game,s,a,i,o,!1),this.content.addChild(n),n.position=cc.p(0,(-.5-e)*n.height-10),this.items.push(n)}},start:function(){},getPositionInView:function(t){var e=t.parent.convertToWorldSpaceAR(t.position);return this.scrollView.node.convertToNodeSpaceAR(e)},onKeyDown:function(t){switch(t.keyCode){case cc.KEY.back:cc.sys.os===cc.sys.OS_ANDROID&&this.close()}},close:function(){this.game.audioMng.playSound("sound_books"),this.game.gameUI.fishHome.switchRedIsShow(),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this);var t=this,e=function(){s.saveData(),t.game.gameUI.fishHome.switchCloseEvent(!0),t.game.gameUI.fishHome.achievementNode=null,t.closeFunc&&t.closeFunc(),t.node.destroy()};this.node.getComponent("MoveEffect")&&this.node.getComponent("MoveEffect").enabled?this.node.getComponent("MoveEffect").reverseAct(e):e()},getRewardStatus:function(t){var e=this.game.achievementConfigList[t];return this.game.userData.achievement.hasOwnProperty(e.id)&&this.game.userData.achievement[e.id]?2:this.game.userData.achievement.hasOwnProperty(e.id)&&!this.game.userData.achievement[e.id]?1:0},update:function(t){if(this.updateTimer+=t,!(this.updateTimer<this.updateInterval)){this.updateTimer=0;for(var e=this.items,i=this.bufferZone,s=this.scrollView.content.y<this.lastContentPosY,n=this.reward.data.height*e.length,o=0;o<e.length;++o){var a=this.getPositionInView(e[o]);if(s){if(a.y<-i&&e[o].y+n<0){var r=e[o].getComponent("Reward"),h=r.index-e.length,c=this.achievementSortList[h],l=this.getRewardStatus(c.id),d=this.game.achievementCheck.getFishDataByType(c.type);r.init(this.game,c,d,h,l,!1),e[o].setPositionY(e[o].y+n)}}else if(a.y>i&&e[o].y-n>-this.content.height){var u=e[o].getComponent("Reward"),g=u.index+e.length,p=this.achievementSortList[g],f=this.getRewardStatus(p.id),m=this.game.achievementCheck.getFishDataByType(p.type);u.init(this.game,p,m,g,f,!1),e[o].setPositionY(e[o].y-n)}}this.lastContentPosY=this.scrollView.content.y}}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage"}],ActEffect:[function(t,e,i){"use strict";cc._RF.push(e,"d0e87Q50jRI5Z8BGMggQ4Ji","ActEffect"),cc.Class({extends:cc.Component,properties:{},start:function(){},jelly:function(t){var e=function(t){var e=cc.scaleTo(t.time,t.scale_x,t.scale_y),i=cc.fadeIn(t.time);return cc.spawn(e,i)},i=e({time:.072,scale_x:.83,scale_y:1.2,scale_z:1}),s=e({time:.144,scale_x:1.05,scale_y:.9,scale_z:1}),n=e({time:.084,scale_x:.9,scale_y:1.05,scale_z:1}),o=e({time:.084,scale_x:1.05,scale_y:.97,scale_z:1}),a=e({time:.084,scale_x:1,scale_y:1,scale_z:1}),r=cc.sequence(cc.delayTime(t),i,s,n,o,a);this.node.runAction(r)}}),cc._RF.pop()},{}],AudioMng:[function(t,e,i){"use strict";cc._RF.push(e,"517a4ADKCNM97OjzQJCOHkw","AudioMng");var n=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{music_main:{url:cc.AudioClip,default:null},music_playing1:{url:cc.AudioClip,default:null},music_playing2:{url:cc.AudioClip,default:null},music_boss:{url:cc.AudioClip,default:null},music_fever:{url:cc.AudioClip,default:null},sound_fishing:{url:cc.AudioClip,default:null},sound_getfish1:{url:cc.AudioClip,default:null},sound_getfish2:{url:cc.AudioClip,default:null},sound_fishover:{url:cc.AudioClip,default:null},sound_levelup:{url:cc.AudioClip,default:null},sound_into:{url:cc.AudioClip,default:null},sound_books:{url:cc.AudioClip,default:null},sound_sellfish1:{url:cc.AudioClip,default:null},sound_sellfish2:{url:cc.AudioClip,default:null},sound_sellfish3:{url:cc.AudioClip,default:null},sound_record:{url:cc.AudioClip,default:null},sound_lineBreak:{url:cc.AudioClip,default:null},sound_reward:{url:cc.AudioClip,default:null},sound_lottery_good:{url:cc.AudioClip,default:null},sound_lottery_bad:{url:cc.AudioClip,default:null},sound_pet1_wow:{url:cc.AudioClip,default:null},sound_pet2_wow:{url:cc.AudioClip,default:null},sound_getBottle:{url:cc.AudioClip,default:null},sound_openBottle:{url:cc.AudioClip,default:null},sound_bite:{url:cc.AudioClip,default:null},sound_bossReward:{url:cc.AudioClip,default:null},sound_takeUp:{url:cc.AudioClip,default:null}},start:function(){},setMusic:function(t){n.updateVolume("music",Number(t)),this.music=t,null!=this.bgId&&cc.audioEngine.setVolume(this.bgId,this.music)},setMusicNoSave:function(t){this.music=t,null!=this.bgId&&cc.audioEngine.setVolume(this.bgId,this.music)},setSound:function(t){n.updateVolume("sound",Number(t)),this.sound=t},setSoundNoSave:function(t){this.sound=t},getMusic:function(){return this.init(),this.music},getSound:function(){return this.init(),this.sound},init:function(){if(null==this.music||null==this.sound){var t=n.UserData.volume.music,e=1;null!=t?e=parseFloat(t):this.setMusic(1);var i=n.UserData.volume.sound,s=2;null!=i?s=parseFloat(i):this.setSound(s),this.music=e,this.sound=s}},playSound:function(t){var e=this[t];return e?(this.init(),this.sound<=0?-1:cc.audioEngine.play(e,!1,this.sound)):(cc.log("未找到音频文件: "+t),null)},playSoundAndValue:function(t,e){var i=this[t];return this.init(),this.sound<=0?-1:cc.audioEngine.play(i,!1,e)},playMusic:function(t,e){return console.log(t),this.init(),this.music<=.01&&(this.music=.01),console.log(this.music),cc.audioEngine.play(t,e,this.music)},playMusicAndValue:function(t,e,i){return this.init(),this.music<=.01&&(this.music=.01),cc.audioEngine.play(t,e,i)},playerBgMusicAndValue:function(t,e){this.music<=.01&&(e=.01);var i=this[t];this.bgRes!==i&&(null!=this.bgId&&(cc.audioEngine.stop(this.bgId),this.bgId=null),this.bgRes=i,this.bgId=this.playMusicAndValue(i,!0,e))},playerBgMusic:function(t){var e=this[t];this.bgRes!==e&&(null!=this.bgId&&(cc.audioEngine.stop(this.bgId),this.bgId=null),this.bgRes=e,this.bgId=this.playMusic(e,!0))},playMusicByKey:function(t,e){var i=this[t];return this.sound<=0?-1:cc.audioEngine.playMusic(i,e)},stopMusic:function(t){null!=t&&cc.audioEngine.stop(t)},stopBgMusic:function(){null!=this.bgId&&cc.audioEngine.stop(this.bgId)},mute:function(){this.setMusicNoSave(0),this.setSoundNoSave(0)},resumeMute:function(){this.setMusicNoSave(1),this.setSoundNoSave(1)},pauseMusic:function(){null!=this.bgId&&cc.audioEngine.setVolume(this.bgId,.01)},resumeMusic:function(t){this.playerBgMusic(t)}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage"}],BattleUI:[function(t,e,i){"use strict";cc._RF.push(e,"abb48JX6NZD8aUHm1qfX333","BattleUI");var o=t("Utils"),h=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{creel:cc.Node,crazyProgress:cc.Node,bossPrefab:cc.Prefab,allCoin:cc.Label,img_hand:cc.Sprite,lotterySpr:cc.Sprite,lotteryNode:cc.Node,crazyTipAni:cc.Animation},start:function(){},init:function(t){var e=this;this.game=t,this.creel=this.creel.getComponent("Creel"),this.creel.init(this.game),this.crazyProgress=this.crazyProgress.getComponent("CrazyProgress"),this.crazyProgress.init(this.game),this.scheduleOnce(function(){e.initCrazyProgressPos=e.crazyProgress.node.position}),this.allCoin.node.scale=1/3,this.allCoin.node.active=!1,this.initAllCoinScale=this.allCoin.node.scale,this.img_hand.node.active=!1,this.BossTime=F.BOSS_FIRST_SHOW_TIME,this.cloneLotteryNode=null,this.fishAniTime=.6},resetBattleUI:function(){this.isCrazyMode=!1,this.isBossMode=!1,this.cloneLotteryNode&&(this.cloneLotteryNode.destroy(),this.cloneLotteryNode=null),this.updataCreelProgress()},updataCreelProgress:function(){this.creel.updateProgress()},resetCrazyData:function(){this.crazyProgress.resetData()},addCrazyValue:function(t){var e=this;this.scheduleOnce(function(){e.crazyProgress.addValue(t)},this.fishAniTime)},enterCrazyMode:function(e){var i=this;this.crazyTipAni.play("crazyTipShow");var t=cc.moveTo(.6,cc.p(0,0)),s=cc.fadeOut(.6),n=cc.scaleTo(.6,1.1),o=cc.callFunc(function(){i.crazyProgress.node.position=i.initCrazyProgressPos}),a=cc.fadeIn(.6);i.crazyProgress.node.runAction(cc.sequence(t,n,s,o,cc.delayTime(.6),a)),this.game.hook.setFishSpeed(.75);var r=this.crazyTipAni.getAnimationState("crazyTipShow");this.isCrazyMode=!0,this.game.gameUI.windowLightEffectShow("red",!0),this.topCrazyPosY=1e4,r.on("finished",function(){var t=i.game.fishMng.crazyFishArray(e);i.topCrazyPosY=t.max},this),this.game.audioMng.playerBgMusicAndValue("music_fever",1),h.updateGuide("crazy",!0),this.resetCrazyData(),this.crazyProgress.setPowerAniShow(!0)},quitCrazyMode:function(){this.game.audioMng.playerBgMusic(this.game.bgMusic),this.game.hook.setFishSpeed(1),this.isCrazyMode=!1,this.crazyProgress.setPowerAniShow(!1),this.game.gameUI.windowLightEffectShow(null,!1)},resetRandomBossTime:function(){this.BossTime=o.randomNumBoth(F.BOSS_SHOW_TIME.min,F.BOSS_SHOW_TIME.max)},enterBossMode:function(){this.game.audioMng.playerBgMusicAndValue("music_boss",2),this.isBossMode=!0,this.game.gameUI.windowLightEffectShow("yellow",!0),this.game.fishMng.allFishFlee(),this.game.hook.setCollisionSwitch(!1),this.initWithBossLayer(),this.game.hook.setFishSpeed(0),this.game.gameUI.pet.setBossMode(!0),this.creel.node.active=!1,this.crazyProgress.node.active=!1,this.resetRandomBossTime(),console.log("进入Boss模式")},quitBossMode:function(){this.game.audioMng.playerBgMusic(this.game.bgMusic),this.isBossMode=!1,this.game.hook.setCollisionSwitch(!0),this.game.gameUI.windowLightEffectShow(null,!1),this.game.hook.setFishSpeed(1),this.game.hook.node.stopAllActions(),this.game.gameUI.pet.setBossMode(!1),this.creel.node.active=!0,this.crazyProgress.node.active=!0,console.log("退出Boss模式")},initWithBossLayer:function(){var t=cc.instantiate(this.bossPrefab),e=t.getComponent("BossLayer");e.init(this.game),this.bossLayer=e,this.node.addChild(t,1)},resetLottery:function(){this.cloneLotteryNode&&(this.cloneLotteryNode.active=!1,this.cloneLotteryNode.destroy(),this.cloneLotteryNode=null)},lotteryFishHooked:function(t){var i=this;this.cloneLotteryNode=cc.instantiate(t.node),this.node.addChild(this.cloneLotteryNode),this.cloneLotteryNode.active=!0;var e=t.node.convertToWorldSpaceAR(cc.Vec2.ZERO),s=this.game.camera.node.convertToNodeSpaceAR(e);this.cloneLotteryNode.position=s,this.cloneLotteryNode.scale=1;var n=this.lotteryNode.position,o=cc.moveTo(1,n),a=cc.scaleTo(1,.7),r=cc.rotateTo(1,1080),h=cc.callFunc(function(){i.lotteryNode.active=!0;var t=i.cloneLotteryNode.scale,e=cc.sequence(cc.scaleTo(.5,1.1*t),cc.scaleTo(.5,t),cc.delayTime(.3)).repeatForever();i.cloneLotteryNode.getComponent("Fish").fishNode.runAction(e)});this.cloneLotteryNode.runAction(cc.sequence(cc.spawn(o,a,r),h))},specialFishHooked:function(t,e){var i=new cc.Node("specialFish");i.addComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e),this.node.addChild(i);var s=t.node.convertToWorldSpaceAR(cc.Vec2.ZERO),n=this.game.camera.node.convertToNodeSpaceAR(s);i.position=n,i.scale=1;var o=this.crazyProgress.node.position,a=cc.moveTo(this.fishAniTime-.2,o),r=cc.scaleTo(this.fishAniTime-.2,.5),h=cc.callFunc(function(){i.destroy()});i.runAction(cc.sequence(cc.delayTime(.2),cc.spawn(a,r),h))},setHandShow:function(){var t=this;this.img_hand.node.active=!0,this.img_hand.node.position=cc.p(-cc.winSize.width/2+70,0);var e=cc.callFunc(function(){t.img_hand.node.active=!1});this.handAct=this.img_hand.node.runAction(cc.sequence(cc.moveTo(1.2,cc.p(cc.winSize.width/2-70,0)),cc.moveTo(1.2,cc.p(-cc.winSize.width/2+70,0)),e))},removeHandShow:function(){this.handAct&&this.img_hand.node.stopAction(),this.img_hand.node.active=!1},setAllCoinStage:function(t){this.allCoin.node.active=t},setAllCoinNumAct:function(t,e){this.allCoin.string="+$"+o.formatNumber(t);var i=this.allCoin.node.scale+2/3/e+.02,s=cc.scaleTo(.13,i);i-=.06;var n=cc.scaleTo(.03,i);this.allCoin.node.runAction(cc.sequence(s,n))},rollRecord:function(t,e,i){this.currentCoin=e;var s=o.formatNumber(this.currentCoin);this.allCoin.string="+$"+s,this.coinTarget=i,this.startRoll=!0,this.startTime=0,this.targetTime=t},update:function(t){!0===this.startRoll&&(this.startTime+=t,this.startTime>=this.targetTime&&(this.startRoll=!1,this.startTime=this.targetTime),this.allCoin.string="+$"+o.formatNumber(parseInt(this.startTime/this.targetTime*(this.coinTarget-this.currentCoin)+this.currentCoin)))}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage",Utils:"Utils"}],BoatItem:[function(t,e,i){"use strict";cc._RF.push(e,"b1568FnemNAGrIpRtZZlaBZ","BoatItem"),cc.Class({extends:cc.Component,properties:{fishHome:cc.Sprite,fishHome_light:cc.Sprite},init:function(t){this.game=t,this.isBlink=!1,this.interval=1,this.dL=0,this.fishHome_light.node.opacity=0},openFishHome:function(){this.game.gameUI.initWithFishHome()},blink:function(){this.isBlink=!0},stopBlink:function(){this.isBlink=!1},start:function(){},lateUpdate:function(t){this.isBlink?(this.interval-=t,0<=this.interval||(this.blinkUp?(this.dL+=t/2,.8<=this.dL&&(this.blinkUp=!1)):(this.dL-=t/2,this.dL<=0&&(this.blinkUp=!0,this.interval=1,this.dL=0)),this.fishHome_light.node.opacity=255*this.dL)):this.fishHome_light.node.opacity=0}}),cc._RF.pop()},{}],Boat:[function(t,e,i){"use strict";cc._RF.push(e,"bfbefoGCvpJnpq6+OJvpiyz","Boat");var s=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{boatSkinNode:cc.Node,skinList:{default:[],type:cc.Prefab}},onLoad:function(){var t=this.node.getComponent("cc.Animation");this.act=t},start:function(){},init:function(t){this.game=t},setBlink:function(){this.boatItem.getComponent("BoatItem").blink()},stopBlink:function(){this.boatItem.getComponent("BoatItem").stopBlink()},startBoatAct:function(){this.act.play("boat_shake")},pauseBoatAct:function(){this.act.pause("boat_shake")},resumeBoatAct:function(){this.act.resume("boat_shake")},selectSkin:function(t){if(this.skinList[t-1]){s.updateSelectSkin("boat",t,!0),this.boatSkinNode.removeAllChildren();var e=cc.instantiate(this.skinList[t-1]);e.getComponent("BoatItem").init(this.game),this.boatItem=e,this.boatSkinNode.addChild(e),this.game.resetSkin()}}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage"}],BossCoin:[function(t,e,i){"use strict";cc._RF.push(e,"f9fc4bnqxNBT6DXtAD37vS4","BossCoin"),cc.Class({extends:cc.Component,properties:{coinTxt:cc.Label},start:function(){},setCoin:function(t){this.coinTxt.string=String(t)}}),cc._RF.pop()},{}],BossLayer:[function(t,e,i){"use strict";cc._RF.push(e,"caa73I8QDBFbq73zdlXifop","BossLayer");var s=t("Utils"),n=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{deadTimeSpr:cc.Sprite,progressBar:cc.ProgressBar,gearBg:cc.Node,gearHandle:cc.Sprite,guideHand:cc.Node,tipAni:cc.Animation,particlePrefab:cc.Prefab,particleNode:cc.Node,bossList:{default:[],type:cc.Prefab},gearLimit:5,maxHP:20},init:function(t){var e=this;this.game=t,this.game.hook.setHookToMid(),this.isResetGear=!1,this.resetGearNum=0,this.bossData=null,this.progressBar.node.active=!1,this.gearBg.active=!1,this.maxHP=24,this.bossModeCountDown=s.randomNumBoth(6,8),this.maxClick=s.randomNumBoth(5,8),!1===this.game.userData.guide.bossMode&&(this.maxHP=20,this.bossModeCountDown=8,this.maxClick=8,n.updateGuide("bossMode",!0)),this.tipAni.play("boss_coming");this.tipAni.getAnimationState("boss_coming").on("finished",function(){e.startChallenge()},this)},startChallenge:function(){this.progressBar.node.active=!0,this.gearBg.active=!0,this.resetBoss(),this.bossShow(),this.resetData(),this.gearEnable(!1),this.progressEnabele(!0)},smallGame:function(){this.gearEnable(!0),this.resetGear(),this.startDeadTime(),this.resetGearNumFunc(),this.isResetGear=!0,this.guideEnable(!0)},resetData:function(){this.BossHP=this.maxHP},uiEnable:function(t){this.gearEnable(t),this.progressEnabele(t)},gearEnable:function(t){this.gearBg.active=t},progressEnabele:function(t){this.progressBar.node.active=t},resetGearTimeFunc:function(){this.resetGearTime=4},resetGearNumFunc:function(){this.resetGearNum=this.maxClick},start:function(){},guideEnable:function(t){this.guideHand.active=t},startDeadTime:function(){var t=this,e=this.progressBar.barSprite.node.width;this.deadTimeSpr.node.x=e;var i=cc.callFunc(function(){t.challengeFail()});this.deadTimeSpr.node.runAction(cc.sequence(cc.moveTo(this.bossModeCountDown,cc.p(0,this.deadTimeSpr.node.y)),i))},reduceBossHP:function(){this.BossHP--,this.setProgress(),this.BossHP<=0&&this.challengeSuccess()},setProgress:function(){var t=this.BossHP/this.maxHP;this.progressBar.node.getComponent("RollNumProgress").rollRecord(.2,this.progressBar.progress,t)},resetBoss:function(){if(this.bossData=this.getBossData(),this.bossData){var t=s.randomNumBoth(1,this.bossData.length),e=this.game.bossGeneratedConfigList;this.bossGold=e[t-1].gold;var i=cc.instantiate(this.bossList[t-1]);i.position=cc.p(-49,-892),this.node.addChild(i),this.bossFish=i,this.bossSkinSp=this.bossFish.getChildByName("role_boss").getComponent(sp.Skeleton)}},getBossData:function(){for(var t=Math.abs(this.game.hook.getHookDownM()),e=this.game.bossGeneratedConfigList,i=[],s=0;s<e.length;s++){if(e[s].ranges<=t&&(i[s]=s+1),!e[s+1])return i;if(t<e[s+1].ranges)return i}return null},bossShow:function(){var i=this,t=this.game.hook.node.convertToWorldSpaceAR(cc.Vec2.ZERO),e=this.game.camera.node.convertToNodeSpaceAR(t);this.bossFish.position=cc.p(0,-cc.winSize.height/2-this.bossFish.width/2);var s=cc.callFunc(function(){i.bossSkinSp.setAnimation(0,"action_swim",!0)}),n=cc.callFunc(function(){var t=i.bossSkinSp.findAnimation("action_bite").duration,e=t+i.bossSkinSp.findAnimation("action_bite-action_flounce").duration;i.scheduleOnce(function(){i.game.audioMng.playSoundAndValue("sound_bite",3)},t-.05),i.bossSkinSp.timeScale=1,i.bossSkinSp.setAnimation(0,"action_bite",!1),i.bossSkinSp.addAnimation(0,"action_bite-action_flounce",!1),i.bossSkinSp.addAnimation(0,"action_flounce",!0),i.scheduleOnce(function(){i.hooked(),i.game.hook.clearOnHookFish(),i.game.hook.bossHookAct()},e),i.scheduleOnce(function(){i.bossSkinSp.timeScale=3},e),i.smallGame()});this.bossFish.runAction(cc.sequence(s,cc.moveTo(1,cc.p(0,e.y)),n))},bossRunAway:function(){var t=this,e=this.game.hook.homingY();this.scheduleOnce(function(){t.game.hook.receipt(),t.game.gameUI.battle.quitBossMode(),t.node.destroy()},e)},challengeFail:function(){var t=this;this.isResetGear=!1,console.log("Boss 模式挑战失败"),cc.sys.isNative&&trackEvent_1("BossFail");var e=this.game.hook.homingY();this.uiEnable(!1),this.scheduleOnce(function(){t.game.hook.challengeBossFaild(),t.game.hook.challengeBossState(!1)},e)},challengeSuccess:function(){var t=this;this.deadTimeSpr.node.stopAllActions(),this.isResetGear=!1,console.log("Boss 模式挑战成功"),t.bossSkinSp.timeScale=1,this.bossSkinSp.setAnimation(0,"action_flounce-action_bite",!1),this.bossSkinSp.addAnimation(0,"action_bite-action_die",!1),this.bossSkinSp.addAnimation(0,"action_die",!0);var e=this.game.hook.homingY();this.uiEnable(!1),this.scheduleOnce(function(){t.game.hook.receipt(),t.game.gameUI.battle.quitBossMode(),t.game.hook.challengeBossState(!0),t.node.destroy()},e)},hooked:function(){var t=this.bossGold;this.game.hook.bossHooked(this.bossFish,t)},hideBoss:function(){this.bossFish.destroy()},resetGear:function(){var t=s.getRandomRate(-cc.winSize.width/2+this.gearBg.width,cc.winSize.width/2-this.gearBg.width),e=s.getRandomRate(-cc.winSize.height/2+this.gearBg.height+100,0),i=cc.p(t,e);this.gearBg.position=i,this.resetGearHandle(),this.guideHand.active&&this.guideEnable(!1)},clickGear:function(){this.game.audioMng.playSound("sound_takeUp"),this.particleNode.position=this.gearBg.position,cc.sys.isNative&&(console.log("shakeDevice"),shakeDevice(2)),this.particleNode.getChildByName("bubbleParticle")||(this.particleShow=cc.instantiate(this.particlePrefab),this.particleNode.addChild(this.particleShow)),this.isResetGear&&(this.resetGearNum-=1,this.resetGearNum<=0&&(this.resetGear(),this.resetGearNumFunc())),this.guideHand.active&&this.guideEnable(!1),this.reduceBossHP(),this.updateGearHandle()},resetGearHandle:function(){this.gearHandle.node.stopAllActions(),this.gearHandle.node.rotation=0},updateGearHandle:function(){var t=360/this.gearLimit;this.gearHandle.node.stopAllActions(),this.gearHandle.node.runAction(cc.rotateBy(.3,t))},update:function(t){this.isResetGear&&(this.gearHandle.node.rotation-=1)}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage",Utils:"Utils"}],BubbleMng:[function(t,e,i){"use strict";cc._RF.push(e,"8617f5Bsw1FcqbE48w2S8GF","BubbleMng");var h=t("Utils"),o=t("Types").GameState;cc.Class({extends:cc.Component,properties:{poolMng:cc.Node,intervalM:10},onLoad:function(){this.poolMng=this.poolMng.getComponent("PoolMng"),this.poolMng.init()},start:function(){},init:function(t){this.game=t,this.bubbleList=[]},spawn:function(){var t=this.poolMng.request(0);return t||(cc.log("max foe count reached"),null)},spawnBubble:function(){for(var t=this.game.hook,e=Math.abs(Math.floor(t.maxFishingY_M/this.intervalM)),i=0;i<3;i++){var s=this.spawn();if(s){var n=cc.p(h.getRandomRate(-cc.winSize.width/2,cc.winSize.width/2),Math.abs((e+i+1)*this.intervalM)*F.PTM_RATIO+h.randomNumBoth(-100,100));s.position=n,s.active=!0,s.getComponent("Bubble").init(this.game,"common",null),this.node.addChild(s),this.bubbleList.push(s)}}},spawnBubbleTank:function(t,e,i,s,n){if(!(t<=0)&&i&&!(t<=0)&&e)for(var o=0;o<t;o++){var a=this.spawn();if(a){var r=n||cc.p(h.getRandomRate(e.minX,e.maxX),h.getRandomRate(i.minY,i.maxY));a.position=r,a.getComponent("Bubble").init(this.game,"tank",i.maxY),s.addChild(a),this.bubbleList.push(a)}}},returnAllBubble:function(){for(var t=this.bubbleList.length-1;0<=t;t--){var e=this.bubbleList[t];this.poolMng.return(0,e),this.bubbleList.splice(t,1)}},returnBubble:function(t){for(var e=this.bubbleList.length-1;0<=e;e--){var i=this.bubbleList[e];i===t&&(this.poolMng.return(0,i),this.bubbleList.splice(e,1))}},updatePos:function(){for(var t=this.game.hook,e=0;e<this.bubbleList.length;e++){var i=this.bubbleList[e],s=i.getComponent("Bubble");if("common"!==s.mode)return;if(this.game.state===o.Down&&i.y-i.height/2>this.game.hook.node.y+cc.winSize.height/2)i.y-=this.bubbleList.length*this.intervalM*F.PTM_RATIO,i.x=h.getRandomRate(-cc.winSize.width/2,cc.winSize.width/2)+h.randomNumBoth(-100,100),i.active=!0,s.reset();else if((this.game.state===o.Fishing||this.game.state===o.Up)&&i.y+i.height/2<this.game.hook.node.y-cc.winSize.height/2){var n=i.y+this.bubbleList.length*this.intervalM*F.PTM_RATIO+h.randomNumBoth(-100,100);n<=t.initPos.y-Math.abs(t.maxFishingY_M+this.intervalM)*F.PTM_RATIO&&(i.y=n,i.x=h.getRandomRate(-cc.winSize.width/2,cc.winSize.width/2),i.active=!0,s.reset())}}},update:function(t){!this.game||this.game.state!==o.Down&&this.game.state!==o.Fishing&&this.game.state!==o.Up||this.updatePos()}}),cc._RF.pop()},{Types:"Types",Utils:"Utils"}],Bubble:[function(t,e,i){"use strict";cc._RF.push(e,"841829IRTFEipcXY4sgIpWL","Bubble"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.scale=.7*Math.random()+.3,this.speedY=.7*Math.random()+.3},init:function(t,e,i){this.game=t,"tank"===(this.mode=e)?(this.isTank=!0,this.maxY=i):this.isTank=!1},reset:function(){this.node.scale=.7*Math.random()+.3,this.speedY=.7*Math.random()+.3},start:function(){},update:function(t){this.node.y+=this.speedY,!this.isTank&&this.node.y>-cc.winSize.height/2?this.node.active=!1:this.isTank&&this.node.y>this.maxY&&this.game.bubbleMng.returnBubble(this.node)}}),cc._RF.pop()},{}],1:[function(t,e,i){"use strict";i.byteLength=function(t){var e=g(t),i=e[0],s=e[1];return 3*(i+s)/4-s},i.toByteArray=function(t){for(var e,i=g(t),s=i[0],n=i[1],o=new u((c=s,l=n,3*(c+l)/4-l)),a=0,r=0<n?s-4:s,h=0;h<r;h+=4)e=d[t.charCodeAt(h)]<<18|d[t.charCodeAt(h+1)]<<12|d[t.charCodeAt(h+2)]<<6|d[t.charCodeAt(h+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=255&e;var c,l;2===n&&(e=d[t.charCodeAt(h)]<<2|d[t.charCodeAt(h+1)]>>4,o[a++]=255&e);1===n&&(e=d[t.charCodeAt(h)]<<10|d[t.charCodeAt(h+1)]<<4|d[t.charCodeAt(h+2)]>>2,o[a++]=e>>8&255,o[a++]=255&e);return o},i.fromByteArray=function(t){for(var e,i=t.length,s=i%3,n=[],o=0,a=i-s;o<a;o+=16383)n.push(h(t,o,a<o+16383?a:o+16383));1===s?(e=t[i-1],n.push(r[e>>2]+r[e<<4&63]+"==")):2===s&&(e=(t[i-2]<<8)+t[i-1],n.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return n.join("")};for(var r=[],d=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=s.length;n<o;++n)r[n]=s[n],d[s.charCodeAt(n)]=n;function g(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function h(t,e,i){for(var s,n,o=[],a=e;a<i;a+=3)s=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(r[(n=s)>>18&63]+r[n>>12&63]+r[n>>6&63]+r[63&n]);return o.join("")}d["-".charCodeAt(0)]=62,d["_".charCodeAt(0)]=63},{}],2:[function(e,t,E){(function(t){"use strict";var s=e("base64-js"),o=e("ieee754"),a=e("isarray");function i(){return d.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(t,e){if(i()<e)throw new RangeError("Invalid typed array length");return d.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=d.prototype:(null===t&&(t=new d(e)),t.length=e),t}function d(t,e,i){if(!(d.TYPED_ARRAY_SUPPORT||this instanceof d))return new d(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return n(this,t,e,i)}function n(t,e,i,s){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,s){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(s||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===s?new Uint8Array(e):void 0===s?new Uint8Array(e,i):new Uint8Array(e,i,s);d.TYPED_ARRAY_SUPPORT?(t=e).__proto__=d.prototype:t=l(t,e);return t}(t,e,i,s):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!d.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var s=0|g(e,i),n=(t=r(t,s)).write(e,i);n!==s&&(t=t.slice(0,n));return t}(t,e,i):function(t,e){if(d.isBuffer(e)){var i=0|u(e.length);return 0===(t=r(t,i)).length||e.copy(t,0,0,i),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(s=e.length)!=s?r(t,0):l(t,e);if("Buffer"===e.type&&a(e.data))return l(t,e.data)}var s;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(h(e),t=r(t,e<0?0:0|u(e)),!d.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function l(t,e){var i=e.length<0?0:0|u(e.length);t=r(t,i);for(var s=0;s<i;s+=1)t[s]=255&e[s];return t}function u(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function g(t,e){if(d.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var s=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return B(t).length;default:if(s)return U(t).length;e=(""+e).toLowerCase(),s=!0}}function p(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function f(t,e,i,s,n){if(0===t.length)return-1;if("string"==typeof i?(s=i,i=0):2147483647<i?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=d.from(e,s)),d.isBuffer(e))return 0===e.length?-1:m(t,e,i,s,n);if("number"==typeof e)return e&=255,d.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):m(t,[e],i,s,n);throw new TypeError("val must be string, number or Buffer")}function m(t,e,i,s,n){var o,a=1,r=t.length,h=e.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(t.length<2||e.length<2)return-1;r/=a=2,h/=2,i/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(n){var l=-1;for(o=i;o<r;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===h)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(r<i+h&&(i=r-h),o=i;0<=o;o--){for(var d=!0,u=0;u<h;u++)if(c(t,o+u)!==c(e,u)){d=!1;break}if(d)return o}return-1}function v(t,e,i,s){i=Number(i)||0;var n=t.length-i;s?n<(s=Number(s))&&(s=n):s=n;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<s&&(s=o/2);for(var a=0;a<s;++a){var r=parseInt(e.substr(2*a,2),16);if(isNaN(r))return a;t[i+a]=r}return a}function y(t,e,i,s){return x(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,s)}function S(t,e,i){return 0===e&&i===t.length?s.fromByteArray(t):s.fromByteArray(t.slice(e,i))}function w(t,e,i){i=Math.min(t.length,i);for(var s=[],n=e;n<i;){var o,a,r,h,c=t[n],l=null,d=239<c?4:223<c?3:191<c?2:1;if(n+d<=i)switch(d){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[n+1]))&&127<(h=(31&c)<<6|63&o)&&(l=h);break;case 3:o=t[n+1],a=t[n+2],128==(192&o)&&128==(192&a)&&2047<(h=(15&c)<<12|(63&o)<<6|63&a)&&(h<55296||57343<h)&&(l=h);break;case 4:o=t[n+1],a=t[n+2],r=t[n+3],128==(192&o)&&128==(192&a)&&128==(192&r)&&65535<(h=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&r)&&h<1114112&&(l=h)}null===l?(l=65533,d=1):65535<l&&(l-=65536,s.push(l>>>10&1023|55296),l=56320|1023&l),s.push(l),n+=d}return function(t){var e=t.length;if(e<=b)return String.fromCharCode.apply(String,t);var i="",s=0;for(;s<e;)i+=String.fromCharCode.apply(String,t.slice(s,s+=b));return i}(s)}E.Buffer=d,E.SlowBuffer=function(t){+t!=t&&(t=0);return d.alloc(+t)},E.INSPECT_MAX_BYTES=50,d.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),E.kMaxLength=i(),d.poolSize=8192,d._augment=function(t){return t.__proto__=d.prototype,t},d.from=function(t,e,i){return n(null,t,e,i)},d.TYPED_ARRAY_SUPPORT&&(d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0})),d.alloc=function(t,e,i){return s=null,o=e,a=i,h(n=t),n<=0?r(s,n):void 0!==o?"string"==typeof a?r(s,n).fill(o,a):r(s,n).fill(o):r(s,n);var s,n,o,a},d.allocUnsafe=function(t){return c(null,t)},d.allocUnsafeSlow=function(t){return c(null,t)},d.isBuffer=function(t){return!(null==t||!t._isBuffer)},d.compare=function(t,e){if(!d.isBuffer(t)||!d.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,s=e.length,n=0,o=Math.min(i,s);n<o;++n)if(t[n]!==e[n]){i=t[n],s=e[n];break}return i<s?-1:s<i?1:0},d.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return d.alloc(0);var i;if(void 0===e)for(i=e=0;i<t.length;++i)e+=t[i].length;var s=d.allocUnsafe(e),n=0;for(i=0;i<t.length;++i){var o=t[i];if(!d.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(s,n),n+=o.length}return s},d.byteLength=g,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)p(this,e,e+1);return this},d.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},d.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},d.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?w(this,0,t):function(t,e,i){var s=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,i);case"utf8":case"utf-8":return w(this,e,i);case"ascii":return C(this,e,i);case"latin1":case"binary":return k(this,e,i);case"base64":return S(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,i);default:if(s)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}.apply(this,arguments)},d.prototype.equals=function(t){if(!d.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===d.compare(this,t)},d.prototype.inspect=function(){var t="",e=E.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},d.prototype.compare=function(t,e,i,s,n){if(!d.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),e<0||i>t.length||s<0||n>this.length)throw new RangeError("out of range index");if(n<=s&&i<=e)return 0;if(n<=s)return-1;if(i<=e)return 1;if(this===t)return 0;for(var o=(n>>>=0)-(s>>>=0),a=(i>>>=0)-(e>>>=0),r=Math.min(o,a),h=this.slice(s,n),c=t.slice(e,i),l=0;l<r;++l)if(h[l]!==c[l]){o=h[l],a=c[l];break}return o<a?-1:a<o?1:0},d.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},d.prototype.indexOf=function(t,e,i){return f(this,t,e,i,!0)},d.prototype.lastIndexOf=function(t,e,i){return f(this,t,e,i,!1)},d.prototype.write=function(t,e,i,s){if(void 0===e)s="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)s=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===s&&(s="utf8")):(s=i,i=void 0)}var n=this.length-e;if((void 0===i||n<i)&&(i=n),0<t.length&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var o,a,r,h,c,l,d,u,g,p=!1;;)switch(s){case"hex":return v(this,t,e,i);case"utf8":case"utf-8":return u=e,g=i,x(U(t,(d=this).length-u),d,u,g);case"ascii":return y(this,t,e,i);case"latin1":case"binary":return y(this,t,e,i);case"base64":return h=this,c=e,l=i,x(B(t),h,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=e,r=i,x(function(t,e){for(var i,s,n,o=[],a=0;a<t.length&&!((e-=2)<0);++a)i=t.charCodeAt(a),s=i>>8,n=i%256,o.push(n),o.push(s);return o}(t,(o=this).length-a),o,a,r);default:if(p)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),p=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function C(t,e,i){var s="";i=Math.min(t.length,i);for(var n=e;n<i;++n)s+=String.fromCharCode(127&t[n]);return s}function k(t,e,i){var s="";i=Math.min(t.length,i);for(var n=e;n<i;++n)s+=String.fromCharCode(t[n]);return s}function T(t,e,i){var s=t.length;(!e||e<0)&&(e=0),(!i||i<0||s<i)&&(i=s);for(var n="",o=e;o<i;++o)n+=M(t[o]);return n}function L(t,e,i){for(var s=t.slice(e,i),n="",o=0;o<s.length;o+=2)n+=String.fromCharCode(s[o]+256*s[o+1]);return n}function F(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(i<t+e)throw new RangeError("Trying to access beyond buffer length")}function A(t,e,i,s,n,o){if(!d.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n<e||e<o)throw new RangeError('"value" argument is out of bounds');if(i+s>t.length)throw new RangeError("Index out of range")}function _(t,e,i,s){e<0&&(e=65535+e+1);for(var n=0,o=Math.min(t.length-i,2);n<o;++n)t[i+n]=(e&255<<8*(s?n:1-n))>>>8*(s?n:1-n)}function N(t,e,i,s){e<0&&(e=4294967295+e+1);for(var n=0,o=Math.min(t.length-i,4);n<o;++n)t[i+n]=e>>>8*(s?n:3-n)&255}function I(t,e,i,s,n,o){if(i+s>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function D(t,e,i,s,n){return n||I(t,0,i,4),o.write(t,e,i,s,23,4),i+4}function R(t,e,i,s,n){return n||I(t,0,i,8),o.write(t,e,i,s,52,8),i+8}d.prototype.slice=function(t,e){var i,s=this.length;if((t=~~t)<0?(t+=s)<0&&(t=0):s<t&&(t=s),(e=void 0===e?s:~~e)<0?(e+=s)<0&&(e=0):s<e&&(e=s),e<t&&(e=t),d.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=d.prototype;else{var n=e-t;i=new d(n,void 0);for(var o=0;o<n;++o)i[o]=this[o+t]}return i},d.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||F(t,e,this.length);for(var s=this[t],n=1,o=0;++o<e&&(n*=256);)s+=this[t+o]*n;return s},d.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||F(t,e,this.length);for(var s=this[t+--e],n=1;0<e&&(n*=256);)s+=this[t+--e]*n;return s},d.prototype.readUInt8=function(t,e){return e||F(t,1,this.length),this[t]},d.prototype.readUInt16LE=function(t,e){return e||F(t,2,this.length),this[t]|this[t+1]<<8},d.prototype.readUInt16BE=function(t,e){return e||F(t,2,this.length),this[t]<<8|this[t+1]},d.prototype.readUInt32LE=function(t,e){return e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},d.prototype.readUInt32BE=function(t,e){return e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},d.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||F(t,e,this.length);for(var s=this[t],n=1,o=0;++o<e&&(n*=256);)s+=this[t+o]*n;return(n*=128)<=s&&(s-=Math.pow(2,8*e)),s},d.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||F(t,e,this.length);for(var s=e,n=1,o=this[t+--s];0<s&&(n*=256);)o+=this[t+--s]*n;return(n*=128)<=o&&(o-=Math.pow(2,8*e)),o},d.prototype.readInt8=function(t,e){return e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},d.prototype.readInt16LE=function(t,e){e||F(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},d.prototype.readInt16BE=function(t,e){e||F(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},d.prototype.readInt32LE=function(t,e){return e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},d.prototype.readInt32BE=function(t,e){return e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},d.prototype.readFloatLE=function(t,e){return e||F(t,4,this.length),o.read(this,t,!0,23,4)},d.prototype.readFloatBE=function(t,e){return e||F(t,4,this.length),o.read(this,t,!1,23,4)},d.prototype.readDoubleLE=function(t,e){return e||F(t,8,this.length),o.read(this,t,!0,52,8)},d.prototype.readDoubleBE=function(t,e){return e||F(t,8,this.length),o.read(this,t,!1,52,8)},d.prototype.writeUIntLE=function(t,e,i,s){(t=+t,e|=0,i|=0,s)||A(this,t,e,i,Math.pow(2,8*i)-1,0);var n=1,o=0;for(this[e]=255&t;++o<i&&(n*=256);)this[e+o]=t/n&255;return e+i},d.prototype.writeUIntBE=function(t,e,i,s){(t=+t,e|=0,i|=0,s)||A(this,t,e,i,Math.pow(2,8*i)-1,0);var n=i-1,o=1;for(this[e+n]=255&t;0<=--n&&(o*=256);)this[e+n]=t/o&255;return e+i},d.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||A(this,t,e,1,255,0),d.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},d.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||A(this,t,e,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):_(this,t,e,!0),e+2},d.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||A(this,t,e,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):_(this,t,e,!1),e+2},d.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||A(this,t,e,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):N(this,t,e,!0),e+4},d.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||A(this,t,e,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},d.prototype.writeIntLE=function(t,e,i,s){if(t=+t,e|=0,!s){var n=Math.pow(2,8*i-1);A(this,t,e,i,n-1,-n)}var o=0,a=1,r=0;for(this[e]=255&t;++o<i&&(a*=256);)t<0&&0===r&&0!==this[e+o-1]&&(r=1),this[e+o]=(t/a>>0)-r&255;return e+i},d.prototype.writeIntBE=function(t,e,i,s){if(t=+t,e|=0,!s){var n=Math.pow(2,8*i-1);A(this,t,e,i,n-1,-n)}var o=i-1,a=1,r=0;for(this[e+o]=255&t;0<=--o&&(a*=256);)t<0&&0===r&&0!==this[e+o+1]&&(r=1),this[e+o]=(t/a>>0)-r&255;return e+i},d.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||A(this,t,e,1,127,-128),d.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},d.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||A(this,t,e,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):_(this,t,e,!0),e+2},d.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||A(this,t,e,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):_(this,t,e,!1),e+2},d.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||A(this,t,e,4,2147483647,-2147483648),d.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):N(this,t,e,!0),e+4},d.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||A(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),d.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},d.prototype.writeFloatLE=function(t,e,i){return D(this,t,e,!0,i)},d.prototype.writeFloatBE=function(t,e,i){return D(this,t,e,!1,i)},d.prototype.writeDoubleLE=function(t,e,i){return R(this,t,e,!0,i)},d.prototype.writeDoubleBE=function(t,e,i){return R(this,t,e,!1,i)},d.prototype.copy=function(t,e,i,s){if(i||(i=0),s||0===s||(s=this.length),e>=t.length&&(e=t.length),e||(e=0),0<s&&s<i&&(s=i),s===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-e<s-i&&(s=t.length-e+i);var n,o=s-i;if(this===t&&i<e&&e<s)for(n=o-1;0<=n;--n)t[n+e]=this[n+i];else if(o<1e3||!d.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)t[n+e]=this[n+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+o),e);return o},d.prototype.fill=function(t,e,i,s){if("string"==typeof t){if("string"==typeof e?(s=e,e=0,i=this.length):"string"==typeof i&&(s=i,i=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!d.isEncoding(s))throw new TypeError("Unknown encoding: "+s)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var o;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(o=e;o<i;++o)this[o]=t;else{var a=d.isBuffer(t)?t:U(new d(t,s).toString()),r=a.length;for(o=0;o<i-e;++o)this[o+e]=a[o%r]}return this};var P=/[^+\/0-9A-Za-z-_]/g;function M(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var i;e=e||1/0;for(var s=t.length,n=null,o=[],a=0;a<s;++a){if(55295<(i=t.charCodeAt(a))&&i<57344){if(!n){if(56319<i){-1<(e-=3)&&o.push(239,191,189);continue}if(a+1===s){-1<(e-=3)&&o.push(239,191,189);continue}n=i;continue}if(i<56320){-1<(e-=3)&&o.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&-1<(e-=3)&&o.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function B(t){return s.toByteArray(function(t){var e;if((t=(e=t,e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(P,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function x(t,e,i,s){for(var n=0;n<s&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:4,isarray:3}],3:[function(t,e,i){var s={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==s.call(t)}},{}],4:[function(t,e,i){i.read=function(t,e,i,s,n){var o,a,r=8*n-s-1,h=(1<<r)-1,c=h>>1,l=-7,d=i?n-1:0,u=i?-1:1,g=t[e+d];for(d+=u,o=g&(1<<-l)-1,g>>=-l,l+=r;0<l;o=256*o+t[e+d],d+=u,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=s;0<l;a=256*a+t[e+d],d+=u,l-=8);if(0===o)o=1-c;else{if(o===h)return a?NaN:1/0*(g?-1:1);a+=Math.pow(2,s),o-=c}return(g?-1:1)*a*Math.pow(2,o-s)},i.write=function(t,e,i,s,n,o){var a,r,h,c=8*o-n-1,l=(1<<c)-1,d=l>>1,u=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,g=s?0:o-1,p=s?1:-1,f=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(r=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-a))<1&&(a--,h*=2),2<=(e+=1<=a+d?u/h:u*Math.pow(2,1-d))*h&&(a++,h/=2),l<=a+d?(r=0,a=l):1<=a+d?(r=(e*h-1)*Math.pow(2,n),a+=d):(r=e*Math.pow(2,d-1)*Math.pow(2,n),a=0));8<=n;t[i+g]=255&r,g+=p,r/=256,n-=8);for(a=a<<n|r,c+=n;0<c;t[i+g]=255&a,g+=p,a/=256,c-=8);t[i+g-p]|=128*f}},{}],CameraControl:[function(t,e,i){"use strict";cc._RF.push(e,"e56ebU/EyNPN4qinkwEUIpP","CameraControl");var s=t("Types").GameState,n=cc.Class({extends:cc.Component,properties:{target:{default:null,type:cc.Node}},onLoad:function(){this.camera=this.getComponent(cc.Camera)},init:function(t){this.game=t},initPos:function(){this.node.position=cc.p(cc.winSize.width/2,cc.winSize.height/2)},onEnable:function(){cc.director.getPhysicsManager().attachDebugDrawToCamera(this.camera)},onDisable:function(){cc.director.getPhysicsManager().detachDebugDrawFromCamera(this.camera)},cameraUpdate:function(t){if(this.game&&(this.game.state===s.Down||this.game.state===s.Fishing||this.game.state===s.Up)){if(this.game.gameUI.battle.isBossMode)return;var e=this.target.convertToWorldSpaceAR(cc.Vec2.ZERO),i=this.node.parent.convertToNodeSpaceAR(e);return i.y>cc.winSize.height/2&&(i.y=cc.winSize.height/2),void(this.node.position=cc.p(cc.winSize.width/2,i.y))}this.node.position=cc.p(cc.winSize.width/2,cc.winSize.height/2)}});e.exports=n,cc._RF.pop()},{Types:"Types"}],CrazyProgress:[function(t,e,i){"use strict";cc._RF.push(e,"42effJo45lD1ZlPg0HzhlQl","CrazyProgress"),cc.Class({extends:cc.Component,properties:{progressBar:cc.ProgressBar,crazyPower:cc.Node,crazyAni:cc.Animation,rateTxt:cc.Label,maxValue:3},init:function(t){this.game=t,this.currentCrazyValue=0,this.maxCrazyValue=Math.floor(1.5*this.game.hook.getMaxFish()),!1===this.game.userData.guide.crazy&&(this.maxCrazyValue=F.CRAZY_FIRST_VALUE),this.setPowerAniShow(!1),this.updateProgress(),this.node.opacity=0},resetData:function(){this.currentCrazyValue=0,this.maxCrazyValue=Math.floor(1.5*this.game.hook.getMaxFish()),!1===this.game.userData.guide.crazy&&(this.maxCrazyValue=F.CRAZY_FIRST_VALUE),this.updateProgress()},addValue:function(t){this.game.gameUI.battle.isCrazyMode||(0===this.node.opacity&&(this.node.opacity=255),this.currentCrazyValue+=t,this.updateProgress(),this.crazyShake())},setPowerAniShow:function(t){this.crazyPower.active=t},updateProgress:function(){var t=this.currentCrazyValue/this.maxCrazyValue;if(1<=t&&(t=1),this.progressBar.node.getComponent("RollNumProgress").rollRecord(.2,this.progressBar.progress,t),1===t&&!this.game.gameUI.battle.isCrazyMode){var e=this.game.hook.getFishList,i=e[Object.getOwnPropertyNames(e).length-1].getComponent("Fish").id;this.crazyFishID=i,this.game.hook.node.position.y+4*cc.winSize.height<-20*F.PTM_RATIO&&!this.game.hook.isCreelFull()&&!this.game.gameUI.battle.isBossMode&&this.game.gameUI.battle.enterCrazyMode(i)}},checkProgress:function(){var t=this.currentCrazyValue/this.maxCrazyValue;1<=t&&(t=1,this.game.gameUI.battle.isCrazyMode||this.game.hook.node.position.y+4*cc.winSize.height<-20*F.PTM_RATIO&&!this.game.hook.isCreelFull()&&!this.game.gameUI.battle.isBossMode&&this.game.gameUI.battle.enterCrazyMode(this.crazyFishID))},crazyShake:function(){this.crazyAni.play("crazyShake")},start:function(){}}),cc._RF.pop()},{}],Creel:[function(t,e,i){"use strict";cc._RF.push(e,"e9194jTdzZM+rdNsiXFVio5","Creel"),cc.Class({extends:cc.Component,properties:{spr_bg:cc.Sprite,spr_icon:cc.Sprite,mask_node:cc.Node,num:cc.Label},onLoad:function(){},start:function(){},init:function(t){this.initMaskHeight=this.spr_bg.node.height,this.game=t,this.updateProgress()},updateProgress:function(){var t=this.game.hook.currentFish/this.game.hook.maxFish;this.num.string=this.game.hook.maxFish-this.game.hook.currentFish,this.mask_node.height=this.initMaskHeight*t}}),cc._RF.pop()},{}],DistanceTipMng:[function(t,e,i){"use strict";cc._RF.push(e,"23253iJi3ZC977UCrvZUMAz","DistanceTipMng");var o=t("Types").GameState;cc.Class({extends:cc.Component,properties:{distanceTipPrefab:cc.Prefab},onLoad:function(){},start:function(){},init:function(t,e){this.game=t,this.distanceTipPool=new cc.NodePool,this.distanceTipList=[];for(var i=0;i<4;++i){var s=cc.instantiate(this.distanceTipPrefab);this.distanceTipPool.put(s)}},createItem:function(t,e,i){var s=i||cc.p(0,0),n=null;return(n=0<this.distanceTipPool.size()?this.distanceTipPool.get():cc.instantiate(this.distanceTipPrefab)).parent=t,n.position=s,n.getComponent("DistanceTip").init(this.game,e),n},returnItem:function(t){this.distanceTipPool.put(t)},returnAllItem:function(t){for(var e=t.length-1;0<=e;e--){var i=t[e];this.returnItem(i),t.splice(e,1)}},setAllItem:function(t){var e=this.game.hook;this.returnAllItem(this.distanceTipList),this.distanceTipList=[];for(var i=Math.abs(Math.floor(e.maxFishingY_M/5)),s=0;s<4;s++){var n=e.initPos.y-5*(s+i)*F.PTM_RATIO,o=this.createItem(t,Math.abs(5*(i+s)),cc.p(0,n));this.distanceTipList.push(o)}},updatePos:function(){for(var t=this.game.hook,e=0;e<this.distanceTipList.length;e++){var i=this.distanceTipList[e],s=i.getComponent("DistanceTip");if(this.game.state===o.Down&&i.y-i.height/2>this.game.hook.node.y+cc.winSize.height/2)i.y-=5*this.distanceTipList.length*F.PTM_RATIO,s.resetData(s.distance+5*this.distanceTipList.length);else if((this.game.state===o.Fishing||this.game.state===o.Up)&&i.y+i.height/2<this.game.hook.node.y-cc.winSize.height/2){var n=i.y+5*this.distanceTipList.length*F.PTM_RATIO;n<=t.initPos.y-Math.abs(t.maxFishingY_M)*F.PTM_RATIO&&(i.y=n,s.resetData(s.distance-5*this.distanceTipList.length))}}},update:function(t){!this.game||this.game.state!==o.Down&&this.game.state!==o.Fishing&&this.game.state!==o.Up||this.updatePos()}}),cc._RF.pop()},{Types:"Types"}],DistanceTip:[function(t,e,i){"use strict";cc._RF.push(e,"18726UgwaBII5QJeTPUx70u","DistanceTip"),cc.Class({extends:cc.Component,properties:{tipTxt:cc.Label},init:function(t,e){this.game=t,this.distance=e,this.tipTxt.string=e+"M"},resetData:function(t){this.distance=t,this.tipTxt.string=t+"M"},start:function(){},update:function(t){}}),cc._RF.pop()},{}],DragableFishTank:[function(t,e,i){"use strict";cc._RF.push(e,"5351aa8MV1Hl4Mlw/e4Lhb3","DragableFishTank"),cc.Class({extends:cc.Component,onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this)},start:function(){},onEnable:function(){},_onTouchStart:function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation());this.offset=cc.p(e.x,e.y)},_onTouchMove:function(t){var e=t.getLocation(),i=this.node.parent.convertToNodeSpaceAR(e),s=i.x-this.offset.x*this.node.scale,n=i.y-this.offset.y*this.node.scale,o=cc.size((this.node.width-cc.winSize.width)/2,(this.node.height-cc.winSize.height)/2);s>o.width?this.node.x=o.width:s<-o.width?this.node.x=-o.width:this.node.x=s,n>o.height?this.node.y=o.height:n<-o.height?this.node.y=-o.height:this.node.y=n}}),cc._RF.pop()},{}],Dragable:[function(t,e,i){"use strict";cc._RF.push(e,"1daa3O4smxCtrwu70zXT51K","Dragable"),cc.Class({extends:cc.Component,onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),cc.log("onload")},start:function(){cc.log("start")},onEnable:function(){cc.log("enable")},_onTouchMove:function(t){var e=t.getLocation();console.log(e),this.node.position=this.node.parent.convertToNodeSpaceAR(e)}}),cc._RF.pop()},{}],Evaluate:[function(t,e,i){"use strict";cc._RF.push(e,"2b49fgEx+JLDZgi4ZUojQw9","Evaluate");var s=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{},init:function(t){this.game=t},giveUp:function(){this.node.destroy()},goRating:function(){s.updateGuide("rating",!1),cc.sys.isNative&&goAppRating(),this.node.destroy()},start:function(){}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage"}],FishBookDetail:[function(t,e,i){"use strict";cc._RF.push(e,"d72f0oOgSVNhKNyTsF24OhN","FishBookDetail");var s=t("Utils");cc.Class({extends:cc.Component,properties:{backgroud:cc.Sprite,fishBookBgList:{default:[],type:cc.SpriteFrame},fishName:cc.Label,fishCoin:cc.Label,fishInfo:cc.Label,specialFishIcon:cc.Sprite,fishIcon:cc.Sprite,newTip:cc.Sprite,iconSize:cc.v2(100,100),specialIconSize:cc.v2(50,50)},onLoad:function(){},start:function(){},init:function(t,e){this.game=t,this.item=e,this.type=e.type,this.id=e.id,this.isNewTip=e.isNewTip,this.resetI18nTxt(),this.setFishShow(),this.setFishData(),this.setFishState()},resetI18nTxt:function(){},setFishShow:function(){var o=this,t="fish/"+this.game.fishConfigTable.config[this.id].res;if(cc.loader.loadRes(t,function(t,e){if(t)cc.error("load img error:"+t);else{cc.log("load img success"),o.fishIcon.spriteFrame=new cc.SpriteFrame(e);var i=o.fishIcon.spriteFrame.getOriginalSize(),s=o.iconSize.x/i.width,n=o.iconSize.y/i.height;o.fishIcon.node.scale=Math.min(s,n)}}),"common"===this.type)if(this.game.fishConfigTable.config.hasOwnProperty(this.id+100)){var e="fish/"+this.game.fishConfigTable.config[this.id+100].res;cc.loader.loadRes(e,function(t,e){if(t)cc.error("load img error:"+t);else{cc.log("load img success"),o.specialFishIcon.node.active=!0,o.specialFishIcon.spriteFrame=new cc.SpriteFrame(e);var i=o.specialFishIcon.spriteFrame.getOriginalSize(),s=o.specialIconSize.x/i.width,n=o.specialIconSize.y/i.height;o.specialFishIcon.node.scale=Math.min(s,n)}})}else o.specialFishIcon.node.active=!1;else o.specialFishIcon.node.active=!1},setFishState:function(){"common"===this.type?(this.game.userData.fishGet.common.hasOwnProperty(this.id)?(this.fishIcon.srcBlendFactor=cc.macro.SRC_ALPHA,this.fishIcon.node.opacity=255):(this.fishIcon.srcBlendFactor=cc.macro.ZERO,this.fishIcon.node.opacity=150),this.game.userData.fishGet.special.hasOwnProperty(this.id+100)?(this.specialFishIcon.srcBlendFactor=cc.macro.SRC_ALPHA,this.specialFishIcon.node.opacity=255):(this.specialFishIcon.srcBlendFactor=cc.macro.ZERO,this.specialFishIcon.node.opacity=150)):this.game.userData.fishGet.rare.hasOwnProperty(this.id)?(this.fishIcon.srcBlendFactor=cc.macro.SRC_ALPHA,this.fishIcon.node.opacity=255):(this.fishIcon.srcBlendFactor=cc.macro.ZERO,this.fishIcon.node.opacity=150),this.newTip.node.active=this.isNewTip},setFishData:function(){var t=!1;if("common"===this.type?(this.game.userData.fishGet.common.hasOwnProperty(this.id)&&(t=!0),this.game.userData.fishGet.special.hasOwnProperty(this.id+100)&&(t=!0)):this.game.userData.fishGet.rare.hasOwnProperty(this.id)&&(t=!0),t){this.backgroud.spriteFrame=this.fishBookBgList[1];var e=this.game.fishConfigTable.config[this.id],i=window.i18n.curLang;this.fishName.string=e.nameList[i],this.fishCoin.string=""+s.formatNumber(Number(e.gold)),this.fishInfo.string=e.info}else this.backgroud.spriteFrame=this.fishBookBgList[0],this.fishName.string="???",this.fishCoin.string="???",this.fishInfo.string="???"},close:function(){this.game.audioMng.playSound("sound_books"),this.item.setNotNew(),this.item.setNewHide(),this.node.destroy()}}),cc._RF.pop()},{Utils:"Utils"}],FishBookItem:[function(t,e,i){"use strict";cc._RF.push(e,"48c6coxrhBPI5R2xSpXO4/j","FishBookItem");var s=t("Utils");cc.Class({extends:cc.Component,properties:{backgroud:cc.Sprite,fishBookBgList:{default:[],type:cc.SpriteFrame},fishName:cc.Label,fishCoin:cc.Label,fishInfo:cc.Label,specialFishIcon:cc.Sprite,fishIcon:cc.Sprite,newTip:cc.Sprite,iconSize:cc.v2(100,100),specialIconSize:cc.v2(50,50)},onLoad:function(){},start:function(){},init:function(t,e,i){this.game=t,this.type=e,this.id=i,this.resetI18nTxt(),this.setFishShow(),this.setFishData(),this.setFishState(),this.node.scale=1},jelly:function(){this.node.getComponent("ActEffect").jelly(0)},resetI18nTxt:function(){},setFishShow:function(){var o=this,t="fish/"+this.game.fishConfigTable.config[this.id].res;if(cc.loader.loadRes(t,function(t,e){if(t)cc.error("load img error:"+t);else{cc.log("load img success"),o.fishIcon.spriteFrame=new cc.SpriteFrame(e);var i=o.fishIcon.spriteFrame.getOriginalSize(),s=o.iconSize.x/i.width,n=o.iconSize.y/i.height;o.fishIcon.node.scale=Math.min(s,n)}}),"common"===this.type)if(this.game.fishConfigTable.config.hasOwnProperty(this.id+100)){var e="fish/"+this.game.fishConfigTable.config[this.id+100].res;cc.loader.loadRes(e,function(t,e){if(t)cc.error("load img error:"+t);else{cc.log("load img success"),o.specialFishIcon.node.active=!0,o.specialFishIcon.spriteFrame=new cc.SpriteFrame(e);var i=o.specialFishIcon.spriteFrame.getOriginalSize(),s=o.specialIconSize.x/i.width,n=o.specialIconSize.y/i.height;o.specialFishIcon.node.scale=Math.min(s,n)}})}else o.specialFishIcon.node.active=!1;else o.specialFishIcon.node.active=!1},setFishState:function(){var t=!1;if("common"===this.type){var e=!1;this.game.userData.fishGet.common.hasOwnProperty(this.id)?(this.fishIcon.srcBlendFactor=cc.macro.SRC_ALPHA,e=this.game.userData.fishGet.common[this.id],this.fishIcon.node.opacity=255):(this.fishIcon.srcBlendFactor=cc.macro.ZERO,this.fishIcon.node.opacity=150);var i=!1;this.game.userData.fishGet.special.hasOwnProperty(this.id+100)?(this.specialFishIcon.srcBlendFactor=cc.macro.SRC_ALPHA,i=this.game.userData.fishGet.special[this.id+100],this.specialFishIcon.node.opacity=255):(this.specialFishIcon.srcBlendFactor=cc.macro.ZERO,this.specialFishIcon.node.opacity=150),t=e||i}else{var s=!1;this.game.userData.fishGet.rare.hasOwnProperty(this.id)?(this.fishIcon.srcBlendFactor=cc.macro.SRC_ALPHA,s=this.game.userData.fishGet.rare[this.id],this.fishIcon.node.opacity=255):(this.fishIcon.srcBlendFactor=cc.macro.ZERO,this.fishIcon.node.opacity=150),t=s}this.isNewTip=t,this.newTip.node.active=t},setFishData:function(){var t=!1;if("common"===this.type?(this.game.userData.fishGet.common.hasOwnProperty(this.id)&&(t=!0),this.game.userData.fishGet.special.hasOwnProperty(this.id+100)&&(t=!0)):this.game.userData.fishGet.rare.hasOwnProperty(this.id)&&(t=!0),t){this.backgroud.spriteFrame=this.fishBookBgList[1];var e=this.game.fishConfigTable.config[this.id],i=window.i18n.curLang;this.fishName.string=e.nameList[i],this.fishCoin.string=""+s.formatNumber(Number(e.gold)),this.fishInfo.string=e.info,this.node.getComponent(cc.Button).interactable=!0}else this.backgroud.spriteFrame=this.fishBookBgList[0],this.fishName.string="???",this.fishCoin.string="???",this.fishInfo.string="???",this.node.getComponent(cc.Button).interactable=!1},setNotNew:function(){"common"===this.type?(this.game.userData.fishGet.common[this.id]&&(this.game.userData.fishGet.common[this.id]=!1),this.game.userData.fishGet.special[this.id+100]&&(this.game.userData.fishGet.special[this.id+100]=!1)):this.game.userData.fishGet.rare[this.id]&&(this.game.userData.fishGet.rare[this.id]=!1)},setNewHide:function(){this.newTip.node.active=!1,this.isNewTip=!1},showDetail:function(){this.game.audioMng.playSound("sound_books"),this.game.gameUI.fishHome.fishBookNode.getComponent("FishBook").showDetail(this.game,this)}}),cc._RF.pop()},{Utils:"Utils"}],FishBook:[function(t,e,i){"use strict";cc._RF.push(e,"6a00ehQNZhGArLu/Ym2a6Q/","FishBook");var s=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{fishBookItem:cc.Prefab,fishBookDetail:cc.Prefab,illustrationsTxt:cc.Label,commonScrollView:{default:null,type:cc.ScrollView},rareScrollView:{default:null,type:cc.ScrollView},commonBtn:cc.Toggle,rareBtn:cc.Toggle,spawnCount:8,spacingH:0,bufferZone:0},onLoad:function(){this.commonScrollView._onTouchMoved=this._onTouchMoved,this.rareScrollView._onTouchMoved=this._onTouchMoved},_onTouchMoved:function(t,e){var i=t.touch,s=cc.pSub(i.getLocation(),i.getStartLocation());if(this.enabledInHierarchy&&!this._hasNestedViewGroup(t,e)&&(this.content&&this._handleMoveLogic(i),this.cancelInnerEvents)){if(50<cc.pLength(s)&&!this._touchMoved&&t.target!==this.node){var n=new cc.Event.EventTouch(t.getTouches(),t.bubbles);n.type=cc.Node.EventType.TOUCH_CANCEL,n.touch=t.touch,n.simulate=!0,t.target.dispatchEvent(n),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(t)}},init:function(t){var e=this;this.game=t;this.node.getComponent("MoveEffect").setActCallFunc(function(){e.game.gameUI.removeLoadingLayer(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,e.onKeyDown,e)}),this.resetI18nTxt(),this.commonItems=[],this.rareItems=[],this.items=[],this.initialize("common"),this.initialize("rare"),this.pageType="common",this.switchPage(null,this.pageType),this.updateTimer=0,this.updateInterval=.08,this.lastContentPosY=0},resetI18nTxt:function(){this.illustrationsTxt.string=this.game.i18n.t("illustrations")},switchPage:function(t,e){var i=null;"common"===e?(this.scrollView=this.commonScrollView,this.items=this.commonItems,i=this.game.fishConfigTable.commonConfig,this.commonScrollView.node.active=!0,this.rareScrollView.node.active=!1):(this.scrollView=this.rareScrollView,this.items=this.rareItems,i=this.game.fishConfigTable.rareConfig,this.commonScrollView.node.active=!1,this.rareScrollView.node.active=!0),this.totalCount=Object.getOwnPropertyNames(i).length,this.pageType=e,this.commonBtn.interactable="common"!==e,this.rareBtn.interactable="common"===e,this.content=this.scrollView.content,t&&this.game.audioMng.playSound("sound_books"),this.jellyAllItems()},jellyAllItems:function(){for(var t=0;t<this.items.length;t++){this.items[t].getComponent("FishBookItem").jelly()}},initialize:function(t){var e=null,i=null,s=null;"common"===t?(e=this.commonScrollView.content,i=this.commonItems,s=this.game.fishConfigTable.commonConfig):(e=this.rareScrollView.content,i=this.rareItems,s=this.game.fishConfigTable.rareConfig);var n=Object.getOwnPropertyNames(s).length;n<=this.spawnCount&&(this.spawnCount=n),e.height=Math.ceil(n/2)*(this.fishBookItem.data.height+this.spacingH)+this.spacingH;for(var o=0;o<this.spawnCount;++o){var a=cc.instantiate(this.fishBookItem);e.addChild(a);var r=(cc.winSize.width-2*a.width)/3,h=0;h=o%2==0?-a.width/2-r/2:a.width/2+r/2,a.setPosition(h,-a.height*(.5+Math.floor(o/2))-this.spacingH*(Math.floor(o/2)+1));var c=o+1;"common"!==t&&(c+=200),a.getComponent("FishBookItem").init(this.game,t,c),i.push(a)}},getPositionInView:function(t){var e=t.parent.convertToWorldSpaceAR(t.position);return this.scrollView.node.convertToNodeSpaceAR(e)},onKeyDown:function(t){switch(t.keyCode){case cc.KEY.back:cc.sys.os===cc.sys.OS_ANDROID&&this.close()}},showDetail:function(t,e){var i=cc.instantiate(this.fishBookDetail);i.getComponent("FishBookDetail").init(t,e),this.node.addChild(i,2)},close:function(){this.game.audioMng.playSound("sound_books"),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this);var t=this,e=function(){s.saveData(),t.game.gameUI.fishHome.switchCloseEvent(!0),t.game.gameUI.fishHome.fishBookNode=null,t.node.destroy()};this.node.getComponent("MoveEffect")&&this.node.getComponent("MoveEffect").enabled?this.node.getComponent("MoveEffect").reverseAct(e):e()},start:function(){},update:function(t){if(this.updateTimer+=t,!(this.updateTimer<this.updateInterval)){this.updateTimer=0;for(var e=this.items,i=this.bufferZone,s=this.scrollView.content.y<this.lastContentPosY,n=(this.fishBookItem.data.height+this.spacingH)*Math.floor(e.length/2),o=0;o<e.length;++o){var a=this.getPositionInView(e[o]);if(s){if(a.y<-i&&e[o].y+n<0){var r=e[o].getComponent("FishBookItem"),h=r.id-e.length;if(!this.game.fishConfigTable.config.hasOwnProperty(h))continue;e[o].setPositionY(e[o].y+n),r.init(this.game,this.pageType,h)}}else if(a.y>i&&e[o].y-n>-this.content.height){var c=e[o].getComponent("FishBookItem"),l=c.id+e.length;if(!this.game.fishConfigTable.config.hasOwnProperty(l))continue;e[o].setPositionY(e[o].y-n),c.init(this.game,this.pageType,l)}}this.lastContentPosY=this.scrollView.content.y}}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage"}],FishHome:[function(t,e,i){"use strict";cc._RF.push(e,"3fef2kdcptBFZDUbHpaH3rt","FishHome");var o=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{fishLogLayer:cc.Prefab,fishBook:cc.Prefab,skinLayer:cc.Prefab,achievement:cc.Prefab,fishTankTypeSelectLayer:cc.Prefab,SetThemeAndPetLayer:cc.Prefab,tankFishShowLayer:cc.Prefab,fishTank:cc.Node,tankTip_grey:cc.Label,tankTip:cc.Label,tipMask:cc.Node,hideList:{default:[],type:cc.Node},red_skin:cc.Sprite,red_cup:cc.Sprite,red_tank:cc.Sprite,topBtnNode:cc.Node,bottomBtnNode:cc.Node,fishTankBtn:cc.Button},init:function(t,e){var i=this;this.game=t,this.red_skin.node.active=!1,this.red_cup.node.active=!1,this.red_tank.node.active=!1,this.switchRedIsShow(),this.fishTank=this.fishTank.getComponent("FishTank"),this.fishTank.init(t,e),this.game.boat.stopBlink();var s=cc.size(this.tipMask.width,this.tipMask.height);this.initMaskSize=s;var n=cc.p(this.tipMask.x,this.tipMask.y);this.initMaskPos=n,this.resetI18nTxt();this.node.getComponent("MoveEffect").setActCallFunc(function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,i.onKeyDown,i)}),this.switchCloseEvent(!0),!1===this.game.userData.guide.tank?(this.tipAni(),o.updateGuide("tank",!0)):(this.tipMask.active=!1,this.tankTip_grey.node.color=cc.color(230,95,59)),this.fishTank.node.width=2*cc.winSize.width,this.fishTank.node.height=2*cc.winSize.height,this.game.showFishHomeMask&&(this.scheduleOnce(function(){this.achievementNode||this.game.gameUI.initWithMask(this.fishTankBtn.node,!0,!0)},0),this.game.showFishHomeMask=!1),cc.sys.isNative&&setBannerVisible(!1)},start:function(){},switchRedIsShow:function(){this.switchskinRedDot(),this.switchCupRedDot()},switchCupRedDot:function(){var t=!1;for(var e in this.game.userData.achievement)!1===this.game.userData.achievement[e]&&(t=!0);this.red_cup.node.active=t},switchskinRedDot:function(){var t=!1;for(var e in this.game.userData.skinGet.boat)!0===this.game.userData.skinGet.boat[e]&&(t=!0);for(var i in this.game.userData.skinGet.hook)!0===this.game.userData.skinGet.hook[i]&&(t=!0);this.red_skin.node.active=t},switchTankRedDot:function(){var t=!1,e=this.game.userData.fishShow.common,i=this.game.userData.fishShow.rare,s=this.game.userData.fishGet.common,n=this.game.userData.fishGet.rare;t=Object.getOwnPropertyNames(i).length<Object.getOwnPropertyNames(n).length||Object.getOwnPropertyNames(e).length<Object.getOwnPropertyNames(s).length,this.red_tank.node.active=t},switchCloseEvent:function(t){this.shieldCloseEvent=t},resetI18nTxt:function(){this.tankTip.string=this.game.i18n.t("tankTip"),this.tankTip_grey.string=this.game.i18n.t("tankTip")},tipAni:function(){this.tipAniTotalTime=2,this.tipAniWidth=this.initMaskSize.width,this.tipAniTime=0,this.tipAniStart=!0},tipAni2:function(){},blinkTipOutline:function(){var t=this,e=cc.callFunc(function(){t.tankTip.node.getComponent(cc.LabelOutline).enabled=!0}),i=cc.callFunc(function(){t.tankTip.node.getComponent(cc.LabelOutline).enabled=!1});this.tankTip.node.runAction(cc.sequence(cc.delayTime(.2),i,cc.delayTime(.2),e,cc.delayTime(.2),i,cc.delayTime(.2),e,cc.delayTime(.2),i,cc.delayTime(.2),e,cc.delayTime(.2),i,cc.delayTime(.2),e))},colorToRed:function(){var t=cc.tintTo(.5,255,0,0),e=cc.tintTo(1,230,95,59);this.tankTip_grey.node.runAction(cc.sequence(t,e))},openSkin:function(){this.game.gameUI.initWithLoadingLayer(!0),this.switchCloseEvent(!1);var t=cc.instantiate(this.skinLayer);t.getComponent("SkinLayer").init(this.game),this.skinNode=t,this.node.addChild(t,2),this.game.audioMng.playSound("sound_books")},openfishBook:function(){this.game.gameUI.initWithLoadingLayer(!0),this.switchCloseEvent(!1);var t=cc.instantiate(this.fishBook);t.getComponent("FishBook").init(this.game),this.fishBookNode=t,this.node.addChild(t,2),this.game.audioMng.playSound("sound_books")},openAchievement:function(t,e){this.game.gameUI.initWithLoadingLayer(!0),this.switchCloseEvent(!1);var i=cc.instantiate(this.achievement);i.getComponent("Achievement").init(this.game,e),this.achievementNode=i,this.node.addChild(i,2),this.game.audioMng.playSound("sound_books")},hideAllBtn:function(){var t=this,e=function(){t.topBtnNode.active=!1},i=function(){t.bottomBtnNode.active=!1};this.topBtnNode.getComponent("MoveEffect")&&this.topBtnNode.getComponent("MoveEffect").enabled?this.topBtnNode.getComponent("MoveEffect").reverseAct(e):e(),this.bottomBtnNode.getComponent("MoveEffect")&&this.bottomBtnNode.getComponent("MoveEffect").enabled?this.bottomBtnNode.getComponent("MoveEffect").reverseAct(i):i()},showAllBtn:function(){this.topBtnNode.active=!0,this.bottomBtnNode.active=!0},openFishLog:function(){this.game.gameUI.initWithLoadingLayer(!0),this.switchCloseEvent(!1);var t=cc.instantiate(this.fishLogLayer);t.getComponent("FishLog").init(this.game),this.fishLogNode=t,this.node.addChild(t,2),this.game.audioMng.playSound("sound_books")},openFishTankTypeSelect:function(){this.game.gameUI.initWithLoadingLayer(!0),this.switchCloseEvent(!1);var t=cc.instantiate(this.fishTankTypeSelectLayer),e=t.getComponent("FishTankTypeSelect");this.fishTankTypeSelectNode=t,e.init(this.game),this.node.addChild(t,2),this.game.audioMng.playSound("sound_books")},openThemeLayer:function(){this.switchCloseEvent(!1);var t=cc.instantiate(this.SetThemeAndPetLayer),e=t.getComponent("SetThemeAndPetLayer");this.setThemeNode=t,e.init(this.game,"theme"),this.node.addChild(t,2),this.hideAllBtn(),this.game.audioMng.playSound("sound_books"),console.log("创建鱼缸主题切换页面")},openTankFishShow:function(){this.game.gameUI.initWithLoadingLayer(!0),this.switchCloseEvent(!1);var t=cc.instantiate(this.tankFishShowLayer),e=t.getComponent("TankFishShow");this.tankFishShowNode=t,e.init(this.game),this.node.addChild(t,2),this.hideAllBtn(),this.game.audioMng.playSound("sound_books")},onKeyDown:function(t){switch(t.keyCode){case cc.KEY.back:cc.sys.os===cc.sys.OS_ANDROID&&this.shieldCloseEvent&&this.close()}},share:function(){this.game.audioMng.playSound("sound_books"),cc.sys.isNative&&(this.isHide(!0),setBackgroundPageEnabled(!1),this.addShareListener(),shareScreen(),this.game.gameUI.initWithLoadingLayer(!0))},addShareListener:function(){var e=this;this.shareSucceedListener=cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:"OnShareSucceed",callback:function(t){console.log("OnShareSucceed"),e.shareSucceed(),e.removeShareListener()}}),this.shareFailedListener=cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:"OnShareFailed",callback:function(t){console.log("OnShareFailed"),e.shareFailed(),e.removeShareListener()}}),cc.eventManager.addListener(this.shareSucceedListener,1),cc.eventManager.addListener(this.shareFailedListener,1)},shareSucceed:function(){cc.sys.isNative&&(trackEvent_1("Share"),setBackgroundPageEnabled(!0));var t=this.game.userData.shareCount;o.updateShareCount(t+1,!1),this.game.achievementCheck.checkAchievementState(),this.isHide(!1),this.game.gameUI.removeLoadingLayer()},shareFailed:function(){cc.sys.isNative&&setBackgroundPageEnabled(!0),this.isHide(!1),this.game.gameUI.removeLoadingLayer()},removeShareListener:function(){cc.eventManager.removeListener(this.shareSucceedListener),this.shareSucceedListener=null,cc.eventManager.removeListener(this.shareFailedListener),this.shareFailedListener=null},isHide:function(t){if(!0===t)for(var e=0;e<Object.getOwnPropertyNames(this.hideList).length-1;e++)this.hideList[e].opacity=0;else if(!1===t)for(var i=0;i<Object.getOwnPropertyNames(this.hideList).length-1;i++)this.hideList[i].opacity=255},close:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.switchCloseEvent(!1);var t=this;this.game.audioMng.playSound("sound_books"),t.game.gameUI.ready.fadeSkillTip();var e=function(){t.fishTank.returnAllFish(),t.game.bubbleMng.returnAllBubble(),t.game.hook.setCollisionSwitch(!0),t.game.gameUI.fishHome=null,cc.sys.isNative&&setBannerVisible(!0),t.node.destroy()};this.node.getComponent("MoveEffect")&&this.node.getComponent("MoveEffect").enabled?this.node.getComponent("MoveEffect").reverseAct(e):e()},update:function(t){this.tipAniStart&&(this.tipAniTime>=this.tipAniTotalTime&&(this.tipAniTime=this.tipAniTotalTime,this.tipAniStart=!1,this.colorToRed()),this.tipAniTime+=t,this.tipMask.x=this.initMaskPos.x+(this.tankTip.node.width+2*this.initMaskSize.width)*(this.tipAniTime/this.tipAniTotalTime),this.tankTip.node.x=-this.tipMask.x)}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage"}],FishLog:[function(t,e,i){"use strict";cc._RF.push(e,"46480hkqdFOwYLDCg2X+U94","FishLog");var o=t("Types").LogType;cc.Class({extends:cc.Component,properties:{contentNode:cc.Node,fishLogItem:cc.Prefab,logTitle:cc.Label},init:function(t){var e=this;this.game=t;this.node.getComponent("MoveEffect").setActCallFunc(function(){e.game.gameUI.removeLoadingLayer(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,e.onKeyDown,e)}),this.resetI18nTxt(),this.setContent()},start:function(){},resetI18nTxt:function(){this.logTitle.string=this.game.i18n.t("nauticalLog")},setContent:function(){this.list=[];var t=this.fishLogItem.data.height,e=cc.Enum.getList(o),i=0;for(var s in e)if(e.hasOwnProperty(s)){var n=this.game.fishLogMng.createItem();this.list.push(n),n.getComponent("fishLogItem").init(this.game,Number(s),i),this.contentNode.addChild(n),n.position=cc.p(0,-(t+2)*i-t/2),i++}},onKeyDown:function(t){switch(t.keyCode){case cc.KEY.back:cc.sys.os===cc.sys.OS_ANDROID&&this.close()}},close:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this);var t=this;this.game.audioMng.playSound("sound_books");var e=function(){t.game.fishLogMng.returnAllItem(t.list),t.game.gameUI.fishHome.switchCloseEvent(!0),t.game.gameUI.fishHome.fishLogNode=null,t.node.destroy()};this.node.getComponent("MoveEffect")&&this.node.getComponent("MoveEffect").enabled?this.node.getComponent("MoveEffect").reverseAct(e):e()}}),cc._RF.pop()},{Types:"Types"}],FishMng:[function(t,e,i){"use strict";cc._RF.push(e,"31d42z2TJJOg5on6p967K1v","FishMng");var b=t("Utils"),r=t("Types").GameState;cc.Class({extends:cc.Component,properties:{fishPoolMng:cc.Node,rareSpawnCount:10},onLoad:function(){this.fishPoolMng=this.fishPoolMng.getComponent("FishPoolMng"),this.fishPoolMng.init(this.game)},start:function(){},init:function(t){this.game=t,this.fishList=[],this.lotterySpawnCount=F.LOTTERY_FIRST_SHOW_TIME},fishStart:function(){this.fishList=[],this.maxDistance_M=Math.abs(this.game.hook.getLimitY()),this.specialAddWeight=!1,this.game.specialFishTime--,this.game.specialFishTime<=0&&(this.game.specialFishTime=b.randomNumBoth(F.SPECIAL_FISH_TIME.min,F.SPECIAL_FISH_TIME.max),this.specialAddWeight=!0),this.buffID=this.game.lotteryBuffID;var t=this.getFishPosList(this.maxDistance_M);this.allPosList=t},spawnAllFish:function(){if(!this.game.gameUI.battle.isBossMode){var t=this.game.state;if(t===r.Down){for(var e=0;e<this.allPosList.length;e++)if(this.allPosList[e]&&!this.allPosList[e].isShow&&!(this.game.hook.node.y-cc.winSize.height/2<this.allPosList[e].pos.y||this.game.hook.node.y-1.5*cc.winSize.height>this.allPosList[e].pos.y)){var i=this.allPosList[e],s=0;i.hasOwnProperty("crazyMode")&&0!==i.crazyMode&&(s=i.crazyMode),this.spawnFoe(i.fishID,i.pos,e,s)}}else if(t===r.Fishing||t===r.Up)for(var n=this.allPosList.length-1;0<=n;n--)if(this.allPosList[n]&&!this.allPosList[n].isShow&&!(this.game.hook.node.y+cc.winSize.height/2>this.allPosList[n].pos.y||this.game.hook.node.y+1.5*cc.winSize.height<this.allPosList[n].pos.y)){var o=this.allPosList[n],a=0;o.hasOwnProperty("crazyMode")&&0!==o.crazyMode&&(a=o.crazyMode),this.spawnFoe(o.fishID,o.pos,n,a)}}},getFishPosList:function(t){var e=this.game.generatedConfigList,i=[];for(var s in this.rareFishList={},this.rareSpawnRule(i,t),this.lotterySpawnRule(i,t),e)if(e.hasOwnProperty(s)){var n=e[s],o=n.ranges,a=n.numbers,r=n.stoneNumbers,h=b.randomNumBoth(a[0],a[1]),c=b.randomNumBoth(r[0],r[1]),l=this.getFishPosListByRuleData(h,n,t);i=i.concat(l),204===this.game.lotteryBuffID&&(c=Math.ceil(2*c));var d=this.getStoneFishPosListByRuleData(c,n,t);if(i=i.concat(d),o[1]*F.PTM_RATIO>=t*F.PTM_RATIO+cc.winSize.height/2)break}return i},isRareSee:function(){for(var t=this.game.hook.node.position.y,e=0;e<this.allPosList.length;e++){var i=this.allPosList[e];if(!(i.fishID<=200||300<=i.fishID)){var s=i.pos.y;if(s<t+cc.winSize.height/2&&t-cc.winSize.height/2<s)return!0}}return!1},getFishPosListByRuleData:function(t,e,i){for(var s=-i*F.PTM_RATIO,n=[],o=0;o<t;o++){var a,r=e.ranges,h=b.randomNumBoth(-cc.winSize.width/2,cc.winSize.width/2),c=(cc.winSize.height/2+150)/F.PTM_RATIO,l=r[0]<c?c:r[0],d=r[1],u=-b.randomNumBoth(l*F.PTM_RATIO,d*F.PTM_RATIO);if(this.checkPosLegal(u,n)){var g=b.deepClone(e.rulesData);if(104===this.buffID)for(var p in g){if(g.hasOwnProperty(p))g[p].fishID<=100&&delete g[p]}else if(203===this.buffID)for(var f in g)if(g.hasOwnProperty(f)){var m=g[f];101<=m.fishID&&m.fishID<=200&&delete g[f]}if(0===Object.getOwnPropertyNames(g).length)return void console.error("没有可生成的鱼类型");if(this.specialAddWeight)for(var v in g)if(g.hasOwnProperty(v)){var y=g[v];101<=y.fishID&&y.fishID<=200&&(y.weight+=20)}var S=b.getResultByWeight(g).fishID,w=0;try{w=Number(this.game.fishConfigTable.config[S].type)}catch(t){console.log(S),console.log(this.game.fishConfigTable.config)}this.game.userData.fishGet.rare.hasOwnProperty(S)?o--:3===w&&1<=Object.getOwnPropertyNames(this.rareFishList).length?o--:(3===w&&(console.log("已生成稀有鱼,id:"+S),cc.sys.isNative&&trackEvent_1("BounsTime"),this.rareFishList[S]=!0),u<s-cc.winSize.height/2||(3===w&&u<s+100&&(u=s+300),a={fishID:S,pos:cc.p(h,u),isShow:!1},n.push(a)))}}return n},getStoneFishPosListByRuleData:function(t,e,i){for(var s=-i*F.PTM_RATIO,n=[],o=0;o<t;o++){var a,r=e.ranges,h=b.randomNumBoth(-cc.winSize.width/2,cc.winSize.width/2),c=(cc.winSize.height/2+150)/F.PTM_RATIO,l=r[0]<c?c:r[0],d=r[1],u=-b.randomNumBoth(l*F.PTM_RATIO,d*F.PTM_RATIO);if(this.checkPosLegal(u,n)){var g=b.deepClone(e.stoneRulesData),p=b.getResultByWeight(g).fishID;u<s-cc.winSize.height/2||(a={fishID:p,pos:cc.p(h,u),isShow:!1},n.push(a))}}return n},checkPosLegal:function(t,e){for(var i=0;i<e.length;i++){var s=e[i];if(t>=s.pos.y-20&&t<=s.pos.y+20)return!1}return!0},rareSpawnRule:function(t,e){var i=this.game.userData.fishData.fishCount+1;if(!(this.game.userData.fishGet.rare.hasOwnProperty(201)||i<this.rareSpawnCount||(i-this.rareSpawnCount)%3!=0)){var s=b.randomNumBoth(-cc.winSize.width/2,cc.winSize.width/2),n=-(e-10)*F.PTM_RATIO,o={fishID:201,pos:cc.p(s,n),isShow:!1};this.rareFishList[201]=!0,t.push(o)}},lotterySpawnRule:function(t,e){var i=this.game.userData.fishData.fishCount+1;if(!(i<this.lotterySpawnCount||(i===this.lotterySpawnCount&&(this.game.lotteryTime=0),this.game.lotteryTime--,0<this.game.lotteryTime))){var s=b.randomNumBoth(-cc.winSize.width/2,cc.winSize.width/2),n=-b.randomNumBoth(.8*e,.95*e)*F.PTM_RATIO,o={fishID:401,pos:cc.p(s,n),isShow:!1};t.push(o),cc.sys.isNative&&trackEvent_1("LotteryShow")}},spawnFoe:function(t,e,i,s){var n=e||cc.p(0,0),o=this.fishPoolMng.request(t);o?(this.game.fishGroup.addChild(o),o.getComponent("Fish").init(this.game,t,i,s),o.setPosition(n),this.fishList.push(o),200<=t&&console.log("spawnFoe 生成稀有鱼,id:"+t),this.allPosList[i]&&(this.allPosList[i].isShow=!0)):cc.log("max foe count reached");return o},spawnFoeCustom:function(t,e,i,s){var n=e||cc.p(0,0),o=this.fishPoolMng.request(t);o?(o.parent=i,o.getComponent("Fish").init(this.game,t,null,s),o.setPosition(n)):cc.log("max foe count reached");return o},getFishGeneratedDataByPosYM:function(t){var e=this.game.generatedConfigList;for(var i in e)if(e.hasOwnProperty(i)){var s=e[i],n=s.ranges;if(t<=n[1]&&t>=n[0])return s}return null},crazyFishArray:function(){for(var t=Math.abs(this.game.hook.getHookDownM()),e=this.getFishGeneratedDataByPosYM(t).crazyFishData,i=b.getResultByWeight(this.game.crazyArrayConfigList).fishArray,s=this.game.hook.node.position,n={min:s.y+cc.winSize.height/2,max:100*i.length+s.y+cc.winSize.height/2+50},o=0;o<this.allPosList.length;o++)if(this.allPosList[o]){var a=this.allPosList[o].pos;if(a.y>=n.min&&a.y<=n.max){var r=a.fishID;201<=r&&r<=300?this.allPosList[o].pos.y=n.max+100:this.allPosList[o]=null}}this.returnFoeByRanges(n);for(var h=0;h<i.length;h++)for(var c=i[h],l=0;l<c.length;l++){var d=c[l];if(0!==d){var u=0;u=0<d?1:-1;var g={fishID:e[Math.abs(d)].fishID,pos:cc.p(-cc.winSize.width/2+l*(cc.winSize.width/c.length),100*(i.length-h-1)+s.y+cc.winSize.height/2),isShow:!1,crazyMode:u};this.allPosList.push(g)}}return n},returnAllFoe:function(){for(var t=this.fishList.length-1;0<=t;t--){var e=this.fishList[t],i=e.getComponent("Fish");this.fishPoolMng.return(i.id,e),this.fishList.splice(t,1)}},returnFoeByRanges:function(t){for(var e=this.fishList.length-1;0<=e;e--){var i=this.fishList[e];if(i.y>=t.min&&i.y<=t.max){var s=i.getComponent("Fish");3===s.type?i.y=t.max+100:(this.fishPoolMng.return(s.id,i),this.fishList.splice(e,1))}}},returnFoe:function(t){if(this.allPosList[t.index]&&this.allPosList[t.index].isShow){200<=t.id&&console.log("spawnFoe 回收稀有鱼,id:"+t.id),this.fishPoolMng.return(t.id,t.node);for(var e=0;e<this.fishList.length;e++){if(this.fishList[e]===t.node){this.fishList.splice(e,1),this.allPosList[t.index].isShow=!1;break}}}},pauseAllFoe:function(t){for(var e=this.fishList.length-1;0<=e;e--){var i=this.fishList[e].getComponent("Fish");3===i.type&&t||i.pause()}},resumeAllFoe:function(){for(var t=this.fishList.length-1;0<=t;t--){this.fishList[t].getComponent("Fish").resume()}},allFishFlee:function(){for(var t=this.fishList.length-1;0<=t;t--){this.fishList[t].getComponent("Fish").flee()}},getRareFishNode:function(){for(var t=this.fishList.length-1;0<=t;t--){var e=this.fishList[t];if(3===e.getComponent("Fish").type)return e}return null},fishMngUpdate:function(t){var e=this.game.state;e!==r.Down&&e!==r.Fishing&&e!==r.Up||this.spawnAllFish()}}),cc._RF.pop()},{Types:"Types",Utils:"Utils"}],FishNodePool:[function(t,e,i){"use strict";cc._RF.push(e,"e1d41txeopM5pXa8SFvpCcU","FishNodePool");var s=t("Types").FishID,n=cc.Class({name:"FishNodePool",properties:{id:{type:s,default:s.Fish1},prefab:cc.Prefab,size:10},ctor:function(){this.idx=0,this.initList=[],this.list=[]},init:function(){for(var t=0;t<this.size;++t){var e=cc.instantiate(this.prefab);this.initList[t]=e,this.list[t]=e}this.idx=this.size-1},reset:function(){for(var t=0;t<this.size;++t){var e=this.initList[t];(this.list[t]=e).active&&(e.active=!1),e.parent&&e.removeFromParent()}this.idx=this.size-1},request:function(){if(this.idx<0){cc.log("this.idx < 0， 生成:"+this.id);var t=cc.instantiate(this.prefab);return this.initList[this.initList.length]=t,this.list[this.list.length]=t,this.size++,t.active=!0,t}var e=this.list[this.idx];return e&&(e.active=!0),--this.idx,e},return:function(t){++this.idx,t.active=!1,t.parent&&t.removeFromParent(),this.list[this.idx]=t}});e.exports=n,cc._RF.pop()},{Types:"Types"}],FishPoolMng:[function(t,e,i){"use strict";cc._RF.push(e,"88039PR+RRCk6JdzWE3FXeZ","FishPoolMng");var c=t("FishNodePool"),l=t("Types").FishID;cc.Class({extends:cc.Component,properties:{commonSize:10,specialSize:5,rareSize:1},init:function(t){var h=this;this.game=t,this.pools={},cc.loader.loadResDir("fishPrefab",cc.Prefab,function(t,e){if(t)console.log(t);else{for(var i=e,s=0;s<i.length;s++){var n=i[s],o=n.name,a=Number(o.substring(o.lastIndexOf("_")+1,o.length));if(0!==a&&!isNaN(a)&&l.hasOwnProperty(a)){h.pools[a]=new c,h.pools[a].id=a,h.pools[a].prefab=n;var r=h.commonSize;201<=a?r=h.rareSize:101<=a&&(r=h.specialSize),h.pools[a].size=r,h.pools[a].init()}}h.isLoad=!0,h.game.hook.checkFishListen(),h.game.gameUI.playWhiteLayerAni()}})},request:function(t){var e=this.pools[t];return e&&e.request?e.request():null},return:function(t,e){var i=this.pools[t];i.idx<i.size?i.return(e):cc.log("Return obj to a full pool, something has gone wrong")}}),cc._RF.pop()},{FishNodePool:"FishNodePool",Types:"Types"}],FishTankTypeSelect:[function(t,e,i){"use strict";cc._RF.push(e,"e3151pnhQpFSLuPZxABGi5x","FishTankTypeSelect"),cc.Class({extends:cc.Component,properties:{themeBtn:cc.Button,fishShowBtn:cc.Button,redDot:cc.Node},init:function(t){this.game=t,this.checkRedDotHide(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.game.gameUI.removeLoadingLayer()},start:function(){},openThemeLayer:function(){this.game.gameUI.fishHome.openThemeLayer(),this.close()},openFishShowLayer:function(){this.game.gameUI.fishHome.openTankFishShow(),this.close()},onKeyDown:function(t){switch(t.keyCode){case cc.KEY.back:cc.sys.os===cc.sys.OS_ANDROID&&this.close()}},setRedDotActive:function(t){this.redDot.active=t},checkRedDotHide:function(){var t=this.game.userData.fishShow.common,e=this.game.userData.fishShow.rare,i=this.game.userData.fishGet.common,s=this.game.userData.fishGet.rare;Object.getOwnPropertyNames(t).length<Object.getOwnPropertyNames(i).length||Object.getOwnPropertyNames(e).length<Object.getOwnPropertyNames(s).length?this.setRedDotActive(!0):this.setRedDotActive(!1)},close:function(){this.game.audioMng.playSound("sound_books"),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this);var t=this,e=function(){t.game.gameUI.fishHome.switchCloseEvent(!0),t.game.gameUI.fishHome.fishTankTypeSelectNode=null,t.node.destroy()};this.node.getComponent("MoveEffect")&&this.node.getComponent("MoveEffect").enabled?this.node.getComponent("MoveEffect").reverseAct(e):e()}}),cc._RF.pop()},{}],FishTank:[function(t,e,i){"use strict";cc._RF.push(e,"f3b95vWMO5Lv5CjgSKrPxXz","FishTank");var l=t("Utils"),s=t("UserDataStorage"),r=t("Types").FishID;cc.Class({extends:cc.Component,properties:{fishGroupNode:cc.Node,fishListNode:cc.Node,bubbleListNode:cc.Node,img_box:cc.Sprite,waterAnisNode:cc.Node,waterNode:cc.Node,waterAniPrefab:cc.Prefab,tankSand:cc.Node,tankThemeSpr:cc.Sprite,tankThemeList:{default:[],type:cc.SpriteFrame},limitFishCount:100},onLoad:function(){},init:function(t,e){this.game=t,this.isRareFishCreate=!1,this.img_box.node.active=!1,this.bubbleMakeTime=5,this.tankShowFishObj=l.deepClone(this.game.userData.tankShowFish),this.tempFishItems=[],this.spawnFish();var i=l.randomNumBoth(3,7);this.spawnBubble(i);var s=this.game.userData.selectSkin.theme;this.switchTheme(s)},initAct:function(){},inToNewFish:function(){var i=this,s=this,t={},n=0;for(var o in t=Object.assign(this.game.userData.fishGet.common,this.game.userData.fishGet.rare))t.hasOwnProperty(o)&&function(){var t=o;if(!i.game.userData.tankShowFish.hasOwnProperty(t)){var e=cc.callFunc(function(){s.joinFishTemp(t)});n+=.5,s.node.runAction(cc.sequence(cc.delayTime(n),e)),s.setTankShowFish(!0,Number(t))}}();s.saveShowFishData()},checkFishCount:function(){var t=0,e=[];for(var i in this.tankShowFishObj)if(this.tankShowFishObj.hasOwnProperty(i)){var s=this.tankShowFishObj[i],n=Number(i);n>=r.Fish201&&1<=s&&e.push(n),t+=s}if(this.game.gameUI.fishHome.tankFishShowNode&&this.game.gameUI.fishHome.tankFishShowNode.getComponent("TankFishShow").resetItemCount(),t>=this.limitFishCount)this.game.gameUI.fishHome.tankFishShowNode&&this.game.gameUI.fishHome.tankFishShowNode.getComponent("TankFishShow").setGray();else if(this.game.gameUI.fishHome.tankFishShowNode){this.game.gameUI.fishHome.tankFishShowNode.getComponent("TankFishShow").cancelGray();for(var o=0;o<e.length;o++){var a=e[o];this.game.gameUI.fishHome.tankFishShowNode.getComponent("TankFishShow").setGrayById(a)}}return t},switchTheme:function(t){this.tankThemeList[t-1]&&(this.tankThemeSpr.spriteFrame=this.tankThemeList[t-1])},resetShowFishData:function(){this.tankShowFishObj=l.deepClone(this.game.userData.tankShowFish),this.spawnFish()},saveShowFishData:function(){s.updateTankShowFish(this.tankShowFishObj,!1)},spawnFish:function(){for(var t in this.fishList=[],this.tankShowFishObj)for(var e=0;e<this.tankShowFishObj[t];e++){var i=t,s=l.getRandomRate(-this.fishGroupNode.width/2,this.fishGroupNode.width/2),n=l.getRandomRate(-this.fishGroupNode.height/2+50,this.fishGroupNode.height/2-300),o=this.game.fishMng.spawnFoeCustom(i,cc.p(s,n),this.fishListNode,0);if(o&&this.fishList.push(o),o||(o=this.spawnFoeCustomTank(i,cc.p(s,n),this.fishListNode,0))&&this.tempFishItems.push(o),!o)return;var a=o.getComponent("Fish");if(a.limitSand){var r=this.tankSand.convertToWorldSpaceAR(cc.Vec2.ZERO),h=this.fishGroupNode.convertToNodeSpaceAR(r);h.y+=this.tankSand.height/2-50,n=h.y,o.y=n}o.rotation=0;var c=Math.random()<.5?1:-1;a.speedScale(c),a.setScaleX(c),a.inTank(),a.limitSand?o.zIndex=2:o.zIndex=3}},spawnFoeCustomTank:function(t,e,i,s){if(this.game.fishMng.fishPoolMng.pools[t]){var n=e||cc.p(0,0),o=cc.instantiate(this.game.fishMng.fishPoolMng.pools[t].prefab);if(o)i.addChild(o),o.getComponent("Fish").init(this.game,t,null,s),o.setPosition(n);return o}return null},joinFishTemp:function(t){var e=this,i=this.waterNode.x,s=-300,n=this.game.fishMng.spawnFoeCustom(t,cc.p(i,cc.winSize.height/2),this.fishListNode,0);if(n&&this.fishList.push(n),n||(n=this.spawnFoeCustomTank(t,cc.p(i,cc.winSize.height/2),this.fishListNode,0))&&this.tempFishItems.push(n),n){var o=n.getComponent("Fish");if(o.limitSand){var a=this.tankSand.convertToWorldSpaceAR(cc.Vec2.ZERO),r=this.fishGroupNode.convertToNodeSpaceAR(a);r.y+=this.tankSand.height/2-50,s=r.y}var h=Math.random()<.5;h?(n.rotation=-90,o.speedScale(0),o.setScaleX(1)):(n.rotation=90,o.speedScale(0),o.setScaleX(-1));var c=cc.callFunc(function(){e.scheduleOnce(function(){var t=i+this.waterNode.parent.x;e.playWaterAni(t)},.15)}),l=cc.callFunc(function(){h?o.speedScale(2):o.speedScale(-2)}),d=cc.callFunc(function(){o.initTankSpeed(h)});n.runAction(cc.sequence(c,cc.spawn(cc.moveTo(1,cc.p(i,s)).easing(cc.easeOut(1.5)),cc.sequence(cc.delayTime(.3),l),cc.sequence(cc.delayTime(.3),cc.rotateTo(.7,0),d)))),o.inTank(),o.limitSand?n.zIndex=2:n.zIndex=3,this.setTankShowFish(!0,Number(t)),this.checkFishCount()>=this.limitFishCount&&Tip.show(this.game.i18n.t("Maximum"),2)}},playWaterAni:function(t){var e=cc.instantiate(this.waterAniPrefab),i=e.getComponent(cc.Animation);i.play("waterAni");var s=i.getAnimationState("waterAni");this.waterAnisNode.x=t,s.on("finished",function(){e.destroy()},this),this.waterAnisNode.addChild(e),this.game.audioMng.playSoundAndValue("sound_fishing",this.game.audioMng.sound+3)},spawnBubble:function(t,e,i){var s={minX:-this.fishGroupNode.width/2,maxX:this.fishGroupNode.width/2},n=e||{minY:-this.fishGroupNode.height/2,maxY:this.fishGroupNode.height/2-20};this.game.bubbleMng.spawnBubbleTank(t,s,n,this.bubbleListNode,i)},returnAllFish:function(){if(this.fishList){for(var t=this.fishList.length-1;0<=t;t--){var e=this.fishList[t],i=e.getComponent("Fish");this.game.fishMng.fishPoolMng.return(i.id,e),this.fishList.splice(t,1)}for(var s=this.tempFishItems.length-1;0<=s;s--){var n=this.tempFishItems[s];n.removeFromParent(),n.destroy(),this.tempFishItems.splice(s,1)}this.tankShowFishObj={}}},setTankShowFish:function(t,e){t?this.tankShowFishObj.hasOwnProperty(e)?201<=e&&1<=this.tankShowFishObj[e]?this.tankShowFishObj[e]=1:this.tankShowFishObj[e]++:this.tankShowFishObj[e]=1:this.tankShowFishObj.hasOwnProperty(e)&&(this.tankShowFishObj[e]--,this.tankShowFishObj[e]<=0&&delete this.tankShowFishObj[e])},start:function(){},update:function(t){if(this.bubbleMakeTime-=t,this.bubbleMakeTime<=0){var e=cc.p(l.getRandomRate(-this.fishGroupNode.width/2,this.fishGroupNode.width/2),-this.fishGroupNode.height/2);this.spawnBubble(1,null,e),this.bubbleMakeTime=l.randomNumBoth(3,7)}}}),cc._RF.pop()},{Types:"Types",UserDataStorage:"UserDataStorage",Utils:"Utils"}],Fish:[function(t,e,i){"use strict";cc._RF.push(e,"5efddKa6VJBXqLaXx/6lBpf","Fish");var u=t("Types").GameState,s=t("Utils"),n=cc.Class({extends:cc.Component,properties:{rotationSpeed:1,limitHookSpeedX:1,fishNode:cc.Node,balance:{default:!1,tooltip:"是否水平平衡"},balanceAngleMin:-30,balanceAngleMax:30,balanceUp:0,moveTilt:{default:!1,tooltip:"是否斜线移动"},scaleY:{default:!1,tooltip:"翻转时是否不翻转X而翻转Y方向"},limitSand:{default:!1,tooltip:"是否限制只在地上移动"},ani:sp.Skeleton,rareAniNode:cc.Node,lotterySpr:cc.Sprite,lotteryNode:cc.Node},onLoad:function(){},init:function(t,e,i,s){this.node.rotation=0;var n=this;this.game=t,this.id=e,this.index=i;var o=this.game.fishConfigTable.config[e];this.fishData=o,this.type=Number(o.type),this.speedX=-Number(o.speed),this.coin=Number(o.gold)+this.game.buffList[4],105===this.game.lotteryBuffID?this.coin=parseInt(2*this.coin):205===this.game.lotteryBuffID&&(this.coin=parseInt(this.coin/2)),this.fishNode.getComponent(cc.Sprite)&&(this.fishSpr=this.fishNode.getComponent(cc.Sprite),4!==this.type&&5!==this.type?this.fishSpr.enabled=!1:this.fishSpr.enabled=!0),this._capture=!1,this.node.scale=1,this.setScaleX(1),this.initRotation=this.fishNode.rotation,this._rotationRate=[60,120],this.isInTank=!1,this.isPause=!1,this.isShow=!1,this.isFlee=!1,this.tankMoveY=0,this.balance&&(this._rotationRate=[this.balanceAngleMin,this.balanceAngleMax]),this.crazyMode=s,this.isCrazy=!1,0!==this.crazyMode&&(this.isCrazy=!0),this.isCrazy&&(-1===this.crazyMode?(this.speedX=-Math.abs(Number(o.speed)),this.speedValue(-5),this.setScaleX(1)):(this.speedX=Math.abs(Number(o.speed)),this.speedValue(5),this.setScaleX(-1))),this.limitHookSpeedX=1,this.tankSpeedList=o.displaySpeedList,this.rareAniNode&&(this.rareAniNode.active=3===this.type||5===this.type),this.scheduleOnce(function(){n.ani&&n.ani.setAnimation(0,"role_move",!0)})},speedScale:function(t){if(void 0!==this.speedX||null!==this.speedX){var e=0<this.speedX?1:-1;this.speedX=Number(this.fishData.speed)*t*e}},speedValue:function(t){void 0===this.speedX&&null===this.speedX||(this.speedX=t)},flee:function(){this.speedScale(8),this.isFlee=!0},inTank:function(){this.isInTank=!0,this.showInterval=10*Math.random()+2,this.currentTime=0,this.rareAniNode&&(this.rareAniNode.active=!1)},onCollisionEnter:function(t,e){},showAni:function(){var s=this,n=0;this.ani&&(this.ani.setCompleteListener(function(t,e){var i=t.animation?t.animation.name:"";"role_show"===i?1<=++n&&(s.isShow=!1,s.moveAni()):"role_show2-1"===i&&(s.isShow=!1,s.moveAni())}),this.ani.findAnimation("role_show")?(this.isShow=!0,this.ani.setAnimation(0,"role_show",!0)):this.ani.findAnimation("role_show1-2")&&this.ani.findAnimation("role_show1")&&this.ani.findAnimation("role_show2-1")&&(this.isShow=!0,this.ani.setAnimation(0,"role_show1-2",!1),this.ani.addAnimation(0,"role_show1",!1),this.ani.addAnimation(0,"role_show2-1",!1)))},moveAni:function(){this.currentTime=0,this.ani.findAnimation("role_move")&&this.ani.setAnimation(0,"role_move",!0)},hooked:function(){var i=this;if(this._capture=!0,this.setScaleX(1),this.node.parent=this.game.hook.node,this.node.position=cc.p(0,-this.game.hook.node.height),this.setRotation(this._rotationRate[0]),1===this.type)this.game.audioMng.playSound("sound_getfish1");else if(2===this.type){if(!this.isCrazy){var t="fish/"+String(this.fishData.res);cc.loader.loadRes(t,function(t,e){t?cc.error("load special img error:"+t):i.game.gameUI.battle.specialFishHooked(i,e)})}this.game.audioMng.playSound("sound_getfish2")}else this.game.audioMng.playSound("sound_getfish2");this.game.showCoinLabel(this.coin,!1,this.type),this.rareAniNode&&(this.rareAniNode.active=!1),this.ani&&this.fishSpr&&(this.ani.clearTracks(),this.fishSpr.enabled=!0,this.ani.node.active=!1)},lotteryFishHooked:function(){this.game.gameUI.battle.lotteryFishHooked(this),this.fishSpr.enabled=!1,this.rareAniNode&&(this.rareAniNode.active=!1),this.game.lotteryTime=s.randomNumBoth(F.LOTTERY_SHOW_TIME.min,F.LOTTERY_SHOW_TIME.max)},setRotation:function(t){this.fishNode.rotation=t},getRotation:function(){return this.fishNode.rotation},getRandomTankSpeed:function(){var t=0;return this.speedX<0?t=-s.getRandomRate(this.tankSpeedList.min,this.tankSpeedList.max):0<this.speedX&&(t=s.getRandomRate(this.tankSpeedList.min,this.tankSpeedList.max)),t},initTankSpeed:function(t){t?this.setScaleX(1):this.setScaleX(-1),this.speedX=this.getRandomTankSpeed();var e=Math.random();this.tankMoveY=e<1/3?-1:e<2/3?0:1},setScaleX:function(t){this.scaleY?this.fishNode.scaleY=t:this.fishNode.scaleX=t},getScaleXX:function(){return this.fishNode.scaleX},getScaleX:function(){return this.scaleY?this.fishNode.scaleY:this.fishNode.scaleX},putPool:function(){var t=this;t.node.scale=1,t.fishSpr&&t.ani&&(t.fishSpr.enabled=!1,t.ani.node.active=!0),t.setRotation(t.initRotation),this.game.fishMng.returnFoe(this)},awardAct:function(t){var e=t||1,i=this;this.setRotation(0),this.node.active=!0;var s=this.game.hook.node.convertToWorldSpace(cc.Vec2.ZERO),n=this.game.fishGroup.convertToNodeSpace(s);this.node.parent=this.game.fishGroup,this.node.scale=1.5;var o=cc.size(this.node.width,this.node.height),a=cc.p(n.x+(this.node.anchorX-.5)*o.width,n.y+(this.node.anchorY-.5)*o.height);this.node.position=a,-90===this.initRotation&&(this.node.x+=this.node.width/2,this.node.y+=this.node.height/2);var r=cc.scaleTo(.1/e,1.5),h=cc.scaleTo(.05/e,.5),c=cc.callFunc(function(){i.node.scale=1,i.fishSpr&&i.ani&&(i.fishSpr.enabled=!1,i.ani.node.active=!0),i.setRotation(i.initRotation),i.game.fishMng.returnFoe(i)});this.node.runAction(cc.sequence(cc.moveBy(.5/e,cc.p(0,120)),r,h,c)),this.game.showCoinLabel(this.coin,!0,this.type)},pause:function(){this.isPause||(this.isPause=!0)},resume:function(){this.isPause&&(this.isPause=!1)},update:function(t){if(this.game&&this.isInTank&&(this.currentTime+=t,this.currentTime>=this.showInterval&&(this.showInterval=10*Math.random()+2,this.currentTime=0,this.showAni())),this.game&&(this.game.state===u.Down||this.game.state===u.Fishing||this.game.state===u.Up||this.game.state===u.Ready))if(this._capture){var e=this.rotationSpeed,i=!1;if(this.game.state===u.Up){var s=90;this.balance&&(s=this.balanceUp),this.getRotation()<s+this.rotationSpeed&&this.getRotation()>s-this.rotationSpeed?this.setRotation(s):this.getRotation()>s?this.setRotation(this.getRotation()-Math.abs(e)):this.getRotation()<s&&this.setRotation(this.getRotation()+Math.abs(e))}else this.game.state===u.Fishing&&(Math.abs(this.game.hook.getSpeedX())>this.limitHookSpeedX&&(e=this.game.hook.getSpeedX()/3,i=!0),this.setRotation(this.getRotation()+e),this.getRotation()>=this._rotationRate[1]?(this.setRotation(this._rotationRate[1]),i||(this.rotationSpeed=-Math.abs(this.rotationSpeed))):this.getRotation()<=this._rotationRate[0]&&(this.setRotation(this._rotationRate[0]),i||(this.rotationSpeed=Math.abs(this.rotationSpeed))))}else{if(this.isPause||this.isShow||(this.node.x+=this.speedX),this.moveTilt&&!this.isPause&&(this.node.y+=Math.abs(this.speedX/2)),this.isInTank){var n=this.game.gameUI.fishHome.fishTank,o=n.fishGroupNode.height/2-150;if(this.limitSand){var a=n.tankSand.convertToWorldSpaceAR(cc.Vec2.ZERO),r=n.fishGroupNode.convertToNodeSpaceAR(a);r.y+=n.tankSand.height/2-30,o=r.y}this.node.y>o&&(this.tankMoveY=-1),this.node.y<-n.fishGroupNode.height/2+50&&(this.tankMoveY=1),this.isShow||this.isPause||(1===this.tankMoveY?this.node.y+=Math.abs(this.speedX/2):-1===this.tankMoveY?this.node.y-=Math.abs(this.speedX/2):0===this.tankMoveY&&(this.node.y+=0))}var h=0,c=0;if(this.isInTank){var l=this.game.gameUI.fishHome.fishTank;h=-l.fishGroupNode.width/2,c=l.fishGroupNode.width/2}else h=-cc.winSize.width/2,c=cc.winSize.width/2,this.isCrazy&&(h=-cc.winSize.width/2,c=cc.winSize.width/2);if(this.node.x>c||this.node.x<h){this.isInTank?(this.speedX=-this.getRandomTankSpeed(),this.setScaleX(-this.getScaleX())):this.isCrazy||(this.speedX*=-1,this.setScaleX(-this.getScaleX()));var d=Math.random();this.tankMoveY=d<1/3?-1:d<2/3?0:1,this.isCrazy?this.node.x>c?this.node.x=h:this.node.x<h&&(this.node.x=c):this.node.x>c?0===this.node.anchorX?this.node.x=c-this.node.width:this.node.x=c:0===this.node.anchorX?this.node.x=h+this.node.width:this.node.x=h,this.isFlee&&this.game.fishMng.returnFoe(this)}this.game.state===u.Down&&this.node.y-this.node.height/2>this.game.hook.node.y+cc.winSize.height/2?this.game.fishMng.returnFoe(this):(this.game.state===u.Fishing||this.game.state===u.Up)&&this.node.y+this.node.height/2<this.game.hook.node.y-cc.winSize.height/2&&this.game.fishMng.returnFoe(this)}}});e.exports=n,cc._RF.pop()},{Types:"Types",Utils:"Utils"}],GameUI:[function(t,e,i){"use strict";cc._RF.push(e,"89a21G7mshG8595hYNsh5rA","GameUI");var s=t("Types").GameState,n=t("UserDataStorage"),o=cc.Enum({COMMON_LAYER:1,LOTTERY:-1,FISHHOME:-1,TOP_ACHIEVEMNT:-1,MASK:-1,OVER_OR_LEVELCOIN:-1,RARELAYER:-1,EVALUATE:20,WHITELAYER:-1,LOADING:1e3});cc.Class({extends:cc.Component,properties:{readyLayer:cc.Prefab,battleLayer:cc.Prefab,overLayer:cc.Prefab,leaveLayer:cc.Prefab,fishHomeLayer:cc.Prefab,getRareLayer:cc.Prefab,getLotteryLayer:cc.Prefab,loadingLayer:cc.Prefab,evaluateLayer:cc.Prefab,MaskLayer:cc.Prefab,petNode:cc.Node,whiteLayerAni:cc.Animation,windowLightNode:cc.Node,windowLightList:{default:[],type:cc.SpriteFrame},bossRewardAniPre:cc.Prefab,maskLayerReferNode:cc.Node},onLoad:function(){this.node.x=cc.winSize.width/2,this.node.y=cc.winSize.height/2,this.node.width=cc.winSize.width,this.node.height=cc.winSize.height,this.whiteLayerAni.node.zIndex=o.WHITELAYER,this.whiteLayerAni.node.opacity=255,this.preLoadMaskLayer()},start:function(){},init:function(t){this.game=t,this.initWithPet(t)},preLoadMaskLayer:function(){var t=cc.instantiate(this.MaskLayer);this.node.addChild(t,o.MASK),this.maskLayerNode=t,this.maskLayerNode.active=!1},playWhiteLayerAni:function(){this.whiteLayerAni.play("inGameScene")},checkAllSkillState:function(){this.ready&&this.ready.checkAllSkillState()},randomSkillADState:function(){this.ready&&this.ready.randomSkillADState()},setCoin:function(t){this.ready&&this.ready.setCoin(t)},setReadyUIShow:function(t){this.ready||this.initWithReady(this.game),this.ready.node.active=t},setBattleUIShow:function(t){this.battle||this.initWithBattle(this.game),this.battle.node.active=t,this.battle.resetLottery()},initWithPet:function(){var t=this.petNode.getComponent("Pet");(this.pet=t).init(this.game)},initWithReady:function(){var t=cc.instantiate(this.readyLayer),e=t.getComponent("ReadyUI");(this.ready=e).init(this.game),this.ready=e,this.node.addChild(t,o.COMMON_LAYER)},initWithBattle:function(){var t=cc.instantiate(this.battleLayer),e=t.getComponent("BattleUI");e.init(this.game),this.battle=e,this.node.addChild(t,o.COMMON_LAYER)},initWithOver:function(t,e){if(this.overNode)this.overNode.active=!0;else{var i=cc.instantiate(this.overLayer);this.node.addChild(i,o.OVER_OR_LEVELCOIN),this.overNode=i}this.overNode.getComponent("Over").init(this.game,t,e),this.setBattleUIShow(!1)},initWithLeave:function(t){var e=cc.instantiate(this.leaveLayer),i=e.getComponent("LeaveCoin");(this.leave=i).init(this.game,t),this.node.addChild(e,o.OVER_OR_LEVELCOIN)},initWithFishHome:function(t,e){if(this.game.state===s.Ready&&!this.fishHome){n.updateClickHomeCount(this.game.userData.clickHomeCount+1,!0),cc.sys.isNative&&trackEvent_2("ClickHomeCount",String(this.game.userData.clickHomeCount)),console.log("点击船舱次数："+this.game.userData.clickHomeCount),null==e&&(e=!0),this.game.hook.setCollisionSwitch(!1),t||this.game.audioMng.playSound("sound_into");var i=cc.instantiate(this.fishHomeLayer);this.fishHome=i.getComponent("FishHome"),this.fishHome.init(this.game,e),this.node.addChild(i,o.FISHHOME)}},initWithRareLayer:function(t,e){var i=cc.instantiate(this.getRareLayer);i.getComponent("GetRareLayer").init(this.game,t,e),this.node.addChild(i,o.RARELAYER),this.setBattleUIShow(!1)},initWithLotteryLayer:function(){var t=cc.instantiate(this.getLotteryLayer);t.getComponent("Lottery").init(this.game),this.node.addChild(t,o.LOTTERY),this.lotteryLayerNode=t},initWithLoadingLayer:function(t){if(!this.loadingNode){var e=cc.instantiate(this.loadingLayer);this.loadingNode=e,t&&(this.loadingNode.opacity=0),this.node.addChild(e,o.LOADING)}},removeLoadingLayer:function(){this.loadingNode&&(this.loadingNode.destroy(),this.loadingNode=null)},initWithEvaluate:function(){var t=cc.instantiate(this.evaluateLayer);t.getComponent("Evaluate").init(this.game),this.node.addChild(t,o.EVALUATE)},initWithMask:function(t,e,i){if(this.maskLayerNode)this.maskLayerNode.active=!0;else{var s=cc.instantiate(this.MaskLayer);this.node.addChild(s,o.MASK),this.maskLayerNode=s}this.maskLayerNode.getComponent("MaskLayer").init(this.game,t,e,i)},removeMaskLayer:function(){this.maskLayerNode&&this.maskLayerNode.getComponent("MaskLayer").onDestroy()},windowLightEffectShow:function(t,e){var i=this;"red"===t?this.windowLightNode.getComponent(cc.Sprite).spriteFrame=this.windowLightList[0]:"yellow"===t&&(this.windowLightNode.getComponent(cc.Sprite).spriteFrame=this.windowLightList[1]),!1===e?(this.windowLightNode.getComponent(cc.Animation).stop(),this.windowLightNode.runAction(cc.sequence(cc.fadeOut(1),cc.callFunc(function(){i.windowLightNode.active=!1})))):(this.windowLightNode.active=!0,this.windowLightNode.getComponent(cc.Animation).play("ui_WindowLight"))},playBossRewardAni:function(t){var e=this;this.game.audioMng.playSound("sound_bossReward");var i=cc.instantiate(this.bossRewardAniPre),s=i.getComponent(cc.Animation),n=s.getAnimationState("boss_reward_coin");s.play("boss_reward_coin");n.on("finished",function(){i.removeFromParent(),i.destroy()},this),n.repeatCount=Math.ceil(t/n.duration);var o=n.repeatCount*n.duration;if(this.game.hook.bossNode){var a=this.game.hook.bossNode;a.parent=this.node,a.scale=.5,a.rotation=90,a.anchorX=.5,a.anchorY=.5,a.getChildByName("role_boss").active=!1,a.getComponent(cc.Sprite).enabled=!0,a.position=cc.p(0,0);var r=cc.callFunc(function(){e.game.hook.bossNode.destroy(),e.game.hook.bossNode=null}),h=cc.spawn(cc.sequence(cc.moveTo(.5,cc.p(a.x,cc.winSize.height/2)),cc.moveTo(1,cc.p(a.x,cc.winSize.height/2-370))),cc.rotateTo(1.5,-900),cc.sequence(cc.delayTime(.55),cc.scaleTo(.7,0)));a.runAction(cc.sequence(h,r))}return this.node.addChild(i,2),i.position=cc.p(0,150),o}}),cc._RF.pop()},{Types:"Types",UserDataStorage:"UserDataStorage"}],Game:[function(t,e,i){"use strict";cc._RF.push(e,"24ca85nW1pLYb0mnvFKA7+E","Game");var a=t("Types").GameState,r=t("UserDataStorage"),h=t("Utils"),n=t("LanguageData"),o=t("ADUtils");cc.Class({extends:cc.Component,properties:{bg:cc.Sprite,hook:cc.Sprite,line:cc.Graphics,boat:cc.Node,fishMng:cc.Node,fishGroup:cc.Node,achievementCheck:cc.Node,bottomAniNode:cc.Node,rareShowAniPrefab:cc.Prefab,aniNode:cc.Node,gameUI:cc.Node,coinShowPre:cc.Prefab,distanceTipNode:cc.Node,distanceTipPre:cc.Prefab,stoneNode:cc.Node,stoneBottomNode:cc.Node,camera:cc.Node,sea:cc.Node,playerNode:cc.Node,seaWave:cc.Node,distanceTipMng:cc.Node,stoneMng:cc.Node,bubbleMng:cc.Node,fishLogMng:cc.Node,loadConfig:cc.Node,audioMng:cc.Node,stoneIntervalM:10},onLoad:function(){this.i18n=n;var t=cc.sys.language;t===cc.sys.LANGUAGE_CHINESE?n.init("zh_tw"):(cc.sys.LANGUAGE_ENGLISH,n.init("en")),this.UserDataStorage=r,this.userData=r.UserData,this.loadConfig=this.loadConfig.getComponent("LoadConfig"),this.loadConfig.init(this),this.camera=this.camera.getComponent("CameraControl"),this.camera.init(this),this.fishMng=this.fishMng.getComponent("FishMng"),this.fishMng.init(this),this.achievementCheck=this.achievementCheck.getComponent("AchievementCheck"),this.achievementCheck.init(this),this.boat=this.boat.getComponent("Boat"),this.boat.init(this),this.hook=this.hook.getComponent("Hook"),this.hook.init(this),this.line=this.line.getComponent("Line"),this.line.init(this),this.gameUI=this.gameUI.getComponent("GameUI"),this.gameUI.init(this),this.player=this.playerNode.getComponent("Player"),this.player.resetSkin(),this.seaWave=this.seaWave.getComponent("seaWave"),this.seaWave.init(this),this.bubbleMng=this.bubbleMng.getComponent("BubbleMng"),this.bubbleMng.init(this),this.audioMng=this.audioMng.getComponent("AudioMng"),this.audioMng.init();var e=cc.director.getCollisionManager();(this.collisionManager=e).enabled=!0,o.init(this),this.resetBgSize(),this.updateTimer=0,this.updateInterval=60,this.specialFishTime=h.randomNumBoth(F.SPECIAL_FISH_TIME.min,F.SPECIAL_FISH_TIME.max),this.lotteryTime=h.randomNumBoth(F.LOTTERY_SHOW_TIME.min,F.LOTTERY_SHOW_TIME.max),this.ratingTime=F.RATING_TIME,this.showFishHomeMask=!1,h.isDayNewGame(this.userData.lastPlayTimeStamp)&&r.updateSkillAdInfoDay("current",0,!0);var i=Math.random()<.5?1:2;this.bgMusic="music_playing"+i,cc.sys.isNative&&0===this.userData.fishData.fishCount&&trackEvent_2("Action",String("2")),this.colorInterval=150,this.colorConfig=[{r:47,g:186,b:221},{r:92,g:40,b:189},{r:199,g:217,b:0},{r:187,g:20,b:209},{r:90,g:219,b:0},{r:201,g:20,b:58},{r:46,g:10,b:190}],this.lotteryBuffID=0,cc.game.on(cc.game.EVENT_SHOW,this.gameShow),cc.game.on(cc.game.EVENT_HIDE,this.gameHide),cc.sys.isNative&&loadOrShowBanner("Banner");var s=this;this.mutelistener=cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:"MuteMusic",callback:function(t){console.log("muteMusic"),s.audioMng.mute()}}),cc.eventManager.addListener(this.mutelistener,1),this.unMutelistener=cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:"UnmuteMusic",callback:function(t){console.log("UnmuteMusic"),s.userData.soundSwitch&&s.audioMng.resumeMute()}}),cc.eventManager.addListener(this.unMutelistener,1)},setLotteryBuff:function(t,e){if(1===t)1===e||2===e||3===e?this.gameUI.ready.skillLotteryUp(e-1):this.lotteryBuffID=100*t+e;else if(2===t)this.lotteryBuffID=100*t+e;else{var i="";3===t?i="boat":4===t?i="hook":5===t?i="theme":6===t&&(i="pet"),6===t?this.gameUI.pet.getPetSkin(e):r.getSkinList(i,e,!1)}this.gameUI.ready.resetAllSkillUI(),this.gameUI.ready.checkAllSkillState(),this.hook.resetHookData()},resetLotteryBuff:function(t){("skill"!==t||206!==this.lotteryBuffID&&106!==this.lotteryBuffID)&&("other"!==t||206===this.lotteryBuffID&&106===this.lotteryBuffID)||(this.lotteryBuffID=-1)},start:function(){},gameHide:function(){this.hideTime=h.getTimeStamp(0)},gameShow:function(){var t=this;if(console.log("gameShow"),t.hideTime){t.showTime=h.getTimeStamp(0);var e=t.showTime-t.hideTime;60<=e&&(cc.find("Game").getComponent("Game").gameUI.leave?cc.find("Game").getComponent("Game").gameUI.leave.isWatchAd||cc.find("Game").getComponent("Game").gameUI.leave.refreshCoin(e):cc.find("Game").getComponent("Game").gameUI.initWithLeave(e)),t.hideTime=null}cc.sys.platform===cc.sys.ANDROID&&cc.find("Game").getComponent("Game").userData.soundSwitch&&cc.find("Game").getComponent("Game").audioMng.resumeMute()},loadFinish:function(){this.resetBuffList(),this.setState(a.Ready),this.initSkin(),this.gameUI.setCoin(this.userData.coin),this.gameUI.checkAllSkillState();var t=h.getTimeStamp(0);if(this.userData.newPlayer)r.updateNewPlayer(!1);else{var e=t-this.userData.lastPlayTimeStamp;60<=e&&this.gameUI.initWithLeave(e),r.updateLastPlayTimeStamp(t,!0)}this.distanceTipList=[];var i=Object.getOwnPropertyNames(this.generatedConfigList).length,s=this.generatedConfigList[i].ranges[1],n=Math.ceil(s/5);this.distanceTipMng=this.distanceTipMng.getComponent("DistanceTipMng"),this.distanceTipMng.init(this,n),this.fishLogMng=this.fishLogMng.getComponent("fishLogMng"),this.fishLogMng.init(),this.stoneList=[],this.stoneMng=this.stoneMng.getComponent("StoneMng");var o=Math.ceil(s/this.stoneIntervalM);this.stoneMng.init(this,o),this.saveTime(!0),this.achievementCheck.checkAchievementState()},resetSkin:function(){this.resetBuffList(),this.hook.resetHookData()},resetBuffList:function(){var t={1:0,2:0,3:0,4:0},e=this.userData.selectSkin.hook,i=this.userData.selectSkin.boat,s=this.hookSkinConfigList[e].toget;t[s.type]+=s.effect;var n=this.boatSkinConfigList[i].toget;t[n.type]+=n.effect,this.buffList=t},initSkin:function(){var t=this.userData.selectSkin.hook;this.hook.selectSkin(t);var e=this.userData.selectSkin.boat;this.boat.selectSkin(e)},resetBgSize:function(){var t=cc.winSize.width,e=cc.winSize.height;this.bg.node.x=t/2,this.bg.node.y=e/2,this.bg.node.width=t,this.bg.node.height=e},setState:function(t){var e=this;(this.state=t)===a.Ready?(this.gameUI.setReadyUIShow(!0),this.gameUI.setBattleUIShow(!1),this.hook.readyFish(),this.gameUI.pet.setBtnEnable(!0),this.gameUI.randomSkillADState(),this.audioMng.playerBgMusic(this.bgMusic)):t===a.Down?(this.collisionManager.enabled=!1,this.scheduleOnce(function(){e.gameUI.pet.startReady()},.5),this.gameUI.pet.setBtnEnable(!1),this.hook.resetDownTime(),this.boat.pauseBoatAct(),this.fishMng.fishStart(),this.gameUI.setReadyUIShow(!1),this.gameUI.setBattleUIShow(!0),this.gameUI.battle.resetBattleUI(),this.resetDistanceTip(),this.resetStone(),this.bubbleMng.spawnBubble()):t===a.Fishing?(this.hook.resetFishTime(),this.gameUI.pet.startShow(),0===this.userData.fishData.fishCount&&this.gameUI.battle.setHandShow(),this.collisionManager.enabled=!0,this.gameUI.battle.crazyProgress.checkProgress()):t===a.Up?(this.collisionManager.enabled=!1,this.gameUI.battle.removeHandShow(),this.hook.resetUpTime(),this.hook.closeMoveListen()):t===a.Over&&(this.boat.resumeBoatAct(),this.bubbleMng.returnAllBubble(),this.gameUI.battle.quitCrazyMode(),this.gameUI.battle.quitBossMode(),0===this.hook.node.opacity&&this.hook.show())},setBgColor:function(t){var e,i=Math.abs(Math.floor(t/F.PTM_RATIO)),s=(i-(e=parseInt(i/this.colorInterval))*this.colorInterval)/this.colorInterval;s<0?s=0:1<s&&(s=1);var n=0;0!==e&&(n=(e-1)%(this.colorConfig.length-1)+1);var o=this.colorConfig[n],a=e%(this.colorConfig.length-1)+1,r=this.colorConfig[a],h=cc.color((r.r-o.r)*s+o.r,(r.g-o.g)*s+o.g,(r.b-o.b)*s+o.b);this.bg.node.color=h},setCoin:function(t){this.gameUI.setCoin(t),r.updateCoin(t);var e=String(this.userData.upgrade[2]);t>this.upgradeConfigList[2][e].cost&&!this.gameUI.lotteryLayerNode&&(this.userData.guide.upgrade||(this.gameUI.ready.setSkillListActive(!0),this.gameUI.initWithMask(this.gameUI.ready.maskNode,!0,!0),r.updateGuide("upgrade",!0))),this.gameUI.checkAllSkillState()},showCoinLabel:function(t,e,i){var s=cc.instantiate(this.coinShowPre),n="";2===i?n=this.i18n.t("specialFish"):3===i&&(n=this.i18n.t("rareFish")),s.getComponent("coinShow").setCoinTxt(t,n);var o=cc.find("Canvas");s.position=o.convertToNodeSpaceAR(this.hook.node.convertToWorldSpaceAR(cc.Vec2.ZERO)),e||(s.y+=30),s.parent=this.aniNode;var a=s.getComponent(cc.Animation);e?a.play("moveCoin_show"):a.play("coin_show"),a.on("finished",function(){s.removeFromParent()},this)},showRareAni:function(t,e){var i=cc.instantiate(this.rareShowAniPrefab),s=this.bottomAniNode.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.Vec2.ZERO)),n=t.getChildByName("fishNode"),o=cc.size(n.width,n.height);s=cc.p(s.x+(.5-n.anchorX)*n.scaleX*o.width,s.y+(.5-n.anchorY)*n.scaleY*o.height),i.position=s;var a=e/Math.max(i.width,i.height);i.scale=1.5*a,this.aniNode.addChild(i);var r=i.getComponent(cc.Animation),h=r.getAnimationState("rare_show");r.play("rare_show");h.on("finished",function(){i.removeFromParent(),i.destroy()},this)},resetStone:function(){var t=this.hook;this.stoneMng.returnAllItem(this.stoneList);var e=Math.floor(-20/this.stoneIntervalM);-20%this.stoneIntervalM==0&&e--;for(var i=Math.floor((t.maxLimitY_M-cc.winSize.height/2/F.PTM_RATIO)/this.stoneIntervalM),s=e;i<s;s--){var n=null,o=Math.random()<1/3;n=o?this.stoneBottomNode:this.stoneNode;var a=10*(Math.random()-.5),r=t.initPos.y+s*this.stoneIntervalM*F.PTM_RATIO+a*F.PTM_RATIO,h=.5<=Math.random(),c=cc.winSize.width/2+30*Math.random();h&&(c*=-1);var l=this.stoneMng.createItem(h,n,cc.p(c,r),o);this.stoneList.push(l)}},resetDistanceTip:function(){this.distanceTipMng.setAllItem(this.distanceTipNode)},saveTime:function(s){var n=this,o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState)if(200<=o.status&&o.status<400){var t=o.responseText.split(" "),e=Math.floor(t[0]);e=h.Time2ZoneOffset(e),console.log("获取网络时间: "+e),s?(n.startPlayTime=e,n.lastTotalPlayTime=n.userData.fishTime):r.updateFishTime(n.lastTotalPlayTime+e-n.startPlayTime,!0),r.updateLastPlayTimeStamp(e,!1)}else{var i=h.getTimeStamp(0);s?(n.startPlayTime=i,n.lastTotalPlayTime=n.userData.fishTime):r.updateFishTime(n.lastTotalPlayTime+i-n.startPlayTime,!0),r.updateLastPlayTimeStamp(i,!1)}},o.open("GET","http://free.timeanddate.com/ts.php",!0),o.send()},watchAd:function(){r.updateWatchAdCount(this.userData.watchAdCount+1),cc.sys.isNative&&(console.log("watchAd:"+String(this.userData.watchAdCount)),trackEvent_2("WatchAdCount",String(this.userData.watchAdCount)))},update:function(t){this.updateTimer+=t,this.updateTimer<this.updateInterval||this.state!==a.Down&&this.state!==a.Fishing&&this.state!==a.Up&&(this.updateTimer=0,this.saveTime())}}),cc._RF.pop()},{ADUtils:"ADUtils",LanguageData:"LanguageData",Types:"Types",UserDataStorage:"UserDataStorage",Utils:"Utils"}],GetRareLayer:[function(t,e,i){"use strict";cc._RF.push(e,"c21fapatu1L7KTWS0QHzjMQ","GetRareLayer"),cc.Class({extends:cc.Component,properties:{txt_tip:cc.Label,img_fish:cc.Sprite,txt_get:cc.Label,fishCoin:cc.Label,iconSize:cc.v2(200,200)},start:function(){},init:function(t,e,i){this.game=t,this.callFunc=i,this.resetI18nTxt(),this.setFishSprite(e),this.setCoinShow(e)},resetI18nTxt:function(){this.txt_tip.string=this.game.i18n.t("getRareTip"),this.txt_get.string=this.game.i18n.t("get")},setFishSprite:function(t){var h=this,e="fish/"+this.game.fishConfigTable.config[t].res;cc.loader.loadRes(e,function(t,e){if(t)cc.error("load img error:"+t);else{cc.log("load img success"),h.img_fish.spriteFrame=new cc.SpriteFrame(e);var i=h.img_fish.spriteFrame.getOriginalSize(),s=h.iconSize.x/i.width,n=h.iconSize.y/i.height,o=Math.min(s,n);h.img_fish.node.scale=.5;var a=cc.scaleTo(.2,1.1*o),r=cc.scaleTo(.05,o);h.img_fish.node.runAction(cc.sequence(a,r))}})},setCoinShow:function(t){var e=Number(this.game.fishConfigTable.config[t].gold);this.fishCoin.node.getComponent("RollNum").rollRecord(1.2,0,e,"$ ")},get:function(t,e){this.game.audioMng.playSound("sound_books"),this.callFunc&&this.callFunc(),this.node.destroy()}}),cc._RF.pop()},{}],GetRewardLayer:[function(t,e,i){"use strict";cc._RF.push(e,"429efHPdUZKVbbkW3Rl/HOf","GetRewardLayer");var s=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{tipTxt:cc.Label,okBtn:cc.Button,okTxt:cc.Label,iconImg:cc.Sprite,coinTxt:cc.Label},init:function(t,e,i,s){this.game=t,this.data=e,this.type=this.data.rewardType,this.reward=this.data.reward,(this.noAchievement=s)||(this.iconName=this.data.iconName),this.callFunc=i,this.resetI18nTxt(),this.setIconSprite(this.type,this.reward)},start:function(){},resetI18nTxt:function(){this.tipTxt.string=this.game.i18n.t("getReward"),this.okTxt.string=this.game.i18n.t("ok")},setIconSprite:function(l,d){var u=this,t=null;this.coinTxt.node.active=!1,1===l?t="boat/"+this.game.boatSkinConfigList[d].res:2===l?t="hook/"+this.game.hookSkinConfigList[d].res:3===l?t="common/img_coin":4===l?t="theme/"+this.game.themeConfigList[d].res:5===l&&(t="pet/"+this.game.petConfigList[d].res),cc.loader.loadRes(t,function(t,e){if(t)cc.error("load img error:"+t);else{cc.log("load img success"),u.iconImg.spriteFrame=new cc.SpriteFrame(e);var i=cc.size(u.iconImg.node.width,u.iconImg.node.height),s=u.iconImg.spriteFrame.getOriginalSize(),n=i.width/s.width,o=i.height/s.height,a=Math.min(n,o);u.iconImg.node.scale=.5;var r=cc.scaleTo(.2,1.1*a),h=cc.scaleTo(.05,a),c=cc.callFunc(function(){3===l&&(u.coinTxt.node.active=!0),u.coinTxt.node.getComponent("RollNum").rollRecord(1.2,0,d,"$")});u.iconImg.node.runAction(cc.sequence(r,h,c))}})},ok:function(){if(this.game.audioMng.playSound("sound_books"),3===this.type){var t=this.game.userData.fishData.getAllCoin;s.updateFishData("getAllCoin",t+Number(this.reward),!1)}if(!this.noAchievement){var e=this.iconName;cc.sys.isNative&&(unlockAchievement(e),trackEvent_2("achieve",String(this.data.id)))}this.callFunc&&this.callFunc(),this.node.destroy()}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage"}],Global:[function(t,e,i){"use strict";cc._RF.push(e,"3df2eisRu9DNrKyQTx0Jisx","Global"),window.F={PTM_RATIO:96,RATING_TIME:9,LOTTERY_FIRST_SHOW_TIME:10,LOTTERY_SHOW_TIME:{min:7,max:9},SPECIAL_FISH_TIME:{min:4,max:8},BOSS_FIRST_SHOW_TIME:6,BOSS_SHOW_TIME:{min:8,max:12},CRAZY_FIRST_VALUE:15,PET_EFFECT:10},cc._RF.pop()},{}],HelloWorld:[function(t,e,i){"use strict";cc._RF.push(e,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld");var s=t("encryptjs"),n="open_sesame";cc.Class({extends:cc.Component,properties:{text:"Hello, World!"},onLoad:function(){var t=JSON.stringify("wh"),e=s.encrypt(t,n,256);cc.sys.localStorage.setItem("userData",e),this.scheduleOnce(function(){var t=cc.sys.localStorage.getItem("userData");console.log(t);var e=JSON.parse(s.decrypt(t,n,256));console.log(e)},2)},update:function(t){}}),cc._RF.pop()},{encryptjs:"encryptjs"}],Hook:[function(t,e,i){"use strict";cc._RF.push(e,"40b58J9+spIYKX1pk4C6bag","Hook");var a=t("Types").GameState,f=t("UserDataStorage"),m=t("Utils");cc.Class({extends:cc.Component,properties:{touchLayer:cc.Node,hookSkin:cc.Sprite,bossCoinPre:cc.Prefab,maxFishingY_M:{default:-150,tooltip:"快速收杆距离"},_downLimitTime:3,upSpeed:5,fishSpeed:5},onLoad:function(){var t=this.node.position;this.posList=[t,t,t],this.posxAge=this.posList[0],this.initFishSpeed=this.fishSpeed},start:function(){},init:function(t){this.game=t,this.rareShowList={}},selectSkin:function(t){var e=this.game.hookSkinConfigList[t],s=this;f.updateSelectSkin("hook",t,!0),this.game.resetSkin();var i="resources/hook/"+e.res+".png";cc.loader.load(cc.url.raw(i),function(t,e){if(t)cc.error("load img error:"+t);else{cc.log("load img success"),s.hookSkin.spriteFrame=new cc.SpriteFrame(e);var i=s.hookSkin.spriteFrame.getOriginalSize();s.hookSkin.node.getComponent(cc.BoxCollider).size=cc.size(i.width,i.height/2),s.hookSkin.node.getComponent(cc.BoxCollider).offset=cc.p(0,3*-i.height/4)}})},setFishSpeed:function(t){this.fishSpeed=this.initFishSpeed*t},readyFish:function(){this.maxFish=this.getMaxFish(),this.maxLimitY_M=this.getLimitY(),this.getFishCount=0,this.currentFish=0,this.getFishList={},this.isIntoSea=!1,this.initPos=this.node.position,this.isReady=!0,this.hasPause=!1,this.isGetLottery=!1,this.isChallengeBossSuccess=!1,this.checkFishListen()},resetHookData:function(){this.maxFish=this.getMaxFish(),this.maxLimitY_M=this.getLimitY(),this.game.gameUI.battle.updataCreelProgress()},getMaxFish:function(){var t=this.game.userData.upgrade[1],e=Number(this.game.upgradeConfigList[1][t].effect)+this.game.buffList[1];return 201===this.game.lotteryBuffID&&(e=Math.ceil(e/2)),e},getLimitY:function(){var t=this.game.userData.upgrade[2],e=-(Number(this.game.upgradeConfigList[2][t].effect)+Number(this.game.buffList[2]));return 202===this.game.lotteryBuffID&&(e=Math.ceil(e/2)),e},getHookDownM:function(){return(this.node.y-this.initPos.y)/F.PTM_RATIO},onCollisionEnter:function(t,e){if("fish"===t.node.group&&this.currentFish<this.maxFish&&!t.node.parent.getComponent("Fish")._capture)if(5===t.node.parent.getComponent("Fish").type)t.node.parent.getComponent("Fish").lotteryFishHooked(),this.game.audioMng.playSound("sound_getBottle"),this.isGetLottery=!0,cc.sys.isNative&&trackEvent_1("LotteryGet");else if(this.addFishedNum(),0!==this.game.userData.selectSkin.pet&&this.fishedNum>=F.PET_EFFECT&&1===t.node.parent.getComponent("Fish").type){this.game.gameUI.pet.getGewardAnimation(),this.resetFishedNum();var i=this.upgradeFish(t.node.parent);i.getComponent("Fish").hooked(),this.getFish(i),this.game.fishMng.returnFoe(t.node.parent.getComponent("Fish"))}else t.node.parent.getComponent("Fish").hooked(),this.getFish(t.node.parent)},upgradeFish:function(t){var e=t.getComponent("Fish");if(e&&1===e.type){var i=e.id+100,s=t.position,n={fishID:i,pos:s,isShow:!0,crazyMode:0};this.game.fishMng.allPosList.push(n);var o=this.game.fishMng.allPosList.length-1;return this.game.fishMng.spawnFoe(i,s,o,0)}},setCollisionSwitch:function(t){this.hookSkin.node.getComponent(cc.BoxCollider).enabled=t},getFish:function(t){this.getFishList[this.getFishCount]=t;var e=this.game.hook.node.position.y;this.game.gameUI.battle.isCrazyMode&&cc.sys.isNative&&shakeDevice(1),this.game.gameUI.battle.isCrazyMode||(this.currentFish++,e<-25*F.PTM_RATIO&&3===this.currentFish&&this.game.gameUI.battle.BossTime<=0&&(this.game.gameUI.battle.enterBossMode(),this.thirdFishCoin=t.getComponent("Fish").coin),2===t.getComponent("Fish").type&&this.game.gameUI.battle.addCrazyValue(1)),this.getFishCount++,this.game.gameUI.battle.updataCreelProgress(),this.currentFish>=this.maxFish&&this.receipt()},clearOnHookFish:function(){for(var t in this.getFishList){if(this.getFishList.hasOwnProperty(t))this.getFishList[t].getComponent("Fish").putPool(),delete this.getFishList[t],this.currentFish=0,this.getFishCount=0}},bossHooked:function(t,e){this.bossNode=t,this.bossCoinRate=e,this.bossNode.parent=this.node,this.bossNode.position=cc.p(0,0)},isCreelFull:function(){return this.currentFish>=this.maxFish},setHookToMid:function(){var t=this.node.parent.convertToNodeSpaceAR(cc.p(cc.winSize.width/2,0));this.node.runAction(cc.moveTo(1,cc.p(t.x,this.node.position.y)))},receipt:function(){this.game.setState(a.Up),this.startUpPosY=this.node.y,this.startUpPosX=this.node.x,this.receiptMusic=this.game.audioMng.playMusicByKey("sound_fishover",!0)},fishFinish:function(){this.receiptMusic&&(this.game.audioMng.stopMusic(this.receiptMusic),this.receiptMusic=null),this.game.setState(a.Over),this.getAward()},challengeBossState:function(t){this.isChallengeBossSuccess=t},bossHookAct:function(){var t=this,e=this.node.position;this.bossHomingHookPos=e;var i=cc.moveTo(.2,cc.p(e.x,e.y+300)),s=[cc.p(e.x-cc.winSize.width/4,e.y+200),cc.p(e.x-cc.winSize.width/4,e.y+600),cc.p(e.x,e.y+300)],n=cc.bezierTo(.5,s),o=[cc.p(e.x+cc.winSize.width/4,e.y+200),cc.p(e.x+cc.winSize.width/4,e.y+600),cc.p(e.x,e.y+300)],a=cc.bezierTo(.5,o),r=cc.callFunc(function(){t.node.stopAllActions(),t.node.runAction(cc.repeatForever(cc.sequence(n,a)))});this.node.runAction(cc.sequence(i,r))},homingY:function(){this.node.stopAllActions();return this.node.runAction(cc.moveTo(.5,cc.p(this.node.x,this.bossHomingHookPos.y))),.5},challengeBossFaild:function(){var t=this;this.node.stopAllActions();var e=this.node.position,i=cc.callFunc(function(){t.hide(),t.game.gameUI.battle.bossLayer.bossRunAway(),t.bossNode.destroy(),t.bossNode=null});this.node.runAction(cc.sequence(cc.moveTo(.3,cc.p(e.x,e.y-cc.winSize.height/2-100)),i))},hide:function(){this.node.opacity=0},show:function(){this.node.opacity=255},getAward:function(){var o=this,c=this,n=0,l=0,d=Object.getOwnPropertyNames(this.getFishList).length,u=[],g=[],p=[];for(var a in this.getFishList)this.getFishList.hasOwnProperty(a)&&function(){var t=o.getFishList[a];t.active=!0;var e=t.getComponent("Fish"),i=l+=e.coin;t.rotation=0,t.active=!1;var s=null;switch(e.type){case 1:u.push(e.id),s="sound_sellfish1";break;case 2:g.push(e.id),s="sound_sellfish2";break;case 3:p.push(e.id),o.rareShowList[e.id]=!0,s="sound_sellfish3"}o.game.gameUI.battle.setAllCoinStage(!0),o.scheduleOnce(function(){c.game.audioMng.playSound(s),e.awardAct(1),c.game.gameUI.battle.setAllCoinNumAct(i,d)},.15*n),n++}();var t=.15;0!==d&&(t=.15*d+.6);var s=0;this.isChallengeBossSuccess&&function(){var t=o.bossCoinRate/1e3,e=o.getMaxFish();e<10&&(e=10);var n=Math.floor(o.thirdFishCoin*e*t/10);l=10*n;for(var i=0;i<10;i++)o.scheduleOnce(function(){for(var t=function(t){var e=cc.instantiate(c.bossCoinPre),i=m.randomNumBoth(-cc.winSize.width/2+200,cc.winSize.width/2-100),s=m.randomNumBoth(cc.winSize.height/10,cc.winSize.height/2-300);e.position=cc.p(i,s),c.game.gameUI.node.addChild(e),e.getComponent("BossCoin").setCoin("$"+m.formatNumber(n)),e.getComponent(cc.Animation).play("bossCoinShow");e.getComponent(cc.Animation).getAnimationState("bossCoinShow").on("finished",function(){e.destroy()},c)},e=0;e<1;e++)t();c.game.audioMng.playSound("sound_bossReward")},.4*i);s+=4,o.game.gameUI.playBossRewardAni(s)}();var e=0;0!==this.game.gameUI.pet.skinId&&(this.scheduleOnce(function(){this.game.gameUI.pet.goIceAnimation()},t+s),e=this.game.gameUI.pet.getGoIceAniTime()),this.scheduleOnce(function(){c.game.gameUI.battle.allCoin.node.scale=this.game.gameUI.battle.initAllCoinScale,c.game.gameUI.battle.setAllCoinStage(!1),f.getFishList("common",u,!0),f.getFishList("special",g,!0),f.getFishList("rare",p,!0);var t=c.game.userData.fishData.totalCount;f.updateFishData("totalCount",t+d,!0);var e=c.game.userData.fishData.totalCoin;f.updateFishData("totalCoin",e+l,!0);var i=c.game.userData.fishData.specialFishCount;f.updateFishData("specialFishCount",g.length+i,!0);var s=c.game.userData.fishData.specialFishCountOnce,n=g.length;s<n&&f.updateFishData("specialFishCountOnce",n,!0);var o=this.game.userData.totalDistance;f.updateTotalDistance(o+this.game.fishMng.maxDistance_M,!0);var a=this.game.userData.fishData.fishCount;f.updateFishData("fishCount",a+1,!0);var r=m.getTimeStamp(0);f.updateLastPlayTimeStamp(r,!0);if(cc.sys.isNative&&trackEvent_2("FishPrize",String(l)),0!==p.length){cc.sys.isNative&&trackEvent_1("BounsGet");var h=p[0];c.game.gameUI.initWithRareLayer(h,function(){1===Object.getOwnPropertyNames(c.game.userData.fishGet.rare).length?c.game.gameUI.initWithOver(l,!0):c.game.gameUI.initWithOver(l)}),this.game.boat.setBlink()}else c.game.gameUI.initWithOver(l)},t+e+s)},checkFishListen:function(){this.isReady&&this.game.fishMng.fishPoolMng.isLoad&&(this.openFishListen(),this.openMoveListen())},openFishListen:function(){this.touchLayer.on(cc.Node.EventType.TOUCH_START,this.hookStartDown,this)},closeFishListen:function(){this.touchLayer.off(cc.Node.EventType.TOUCH_START,this.hookStartDown,this)},openMoveListen:function(){this.touchLayer.on(cc.Node.EventType.TOUCH_MOVE,this.moveX,this)},closeMoveListen:function(){this.touchLayer.off(cc.Node.EventType.TOUCH_MOVE,this.moveX,this)},getPosxAge:function(){return this.posxAge},getSpeedX:function(){return 2<=this.posList.length?this.posList[this.posList.length-1].x-this.posList[this.posList.length-2].x:0},getSpeedY:function(){return 2<=this.posList.length?this.posList[this.posList.length-1].y-this.posList[this.posList.length-2].y:0},moveX:function(t){this.downPause||this.game.gameUI.battle.isBossMode||this.setOffsetPosX(2*t.getDeltaX())},setOffsetPosX:function(t){this.node.x+=t;var e=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);if(e.x<0){e.x=0;var i=this.node.parent.convertToNodeSpaceAR(e);this.node.x=i.x}if(e.x>cc.winSize.width){e.x=cc.winSize.width;var s=this.node.parent.convertToNodeSpaceAR(e);this.node.x=s.x}},addFishedNum:function(){this.fishedNum++},resetFishedNum:function(){this.fishedNum=0},hookStartDown:function(){if(cc.sys.isNative&&(loadOrShowBanner("Banner"),loadAds("Gameover"),60<=this.game.userData.fishData.fishCount+1&&(this.game.userData.fishData.fishCount+1-60)%9==0&&loadAds("OverAD"),sendReportImmediately()),this.fishedNum=0,this.closeFishListen(),this._maxLimitY=this.maxLimitY_M*F.PTM_RATIO+this.initPos.y,this.game.setState(a.Down),this.game.stoneMng.randomSeaBg(),this.game.gameUI.battle.BossTime--,console.log("Boss出现倒计时："+this.game.gameUI.battle.BossTime),cc.sys.isNative){0===this.game.userData.fishData.fishCount&&trackEvent_2("Action",String("3"));var t=this.game.userData.fishData.fishCount+1;trackEvent_2("FishingCount",String(t)),this.game.gameUI.ready&&this.game.gameUI.ready.hasAdSkill()&&(trackEvent_1("nodas"),console.log("出现广告未点击"))}},resetDownTime:function(){this._downTime=0,this._downDeceTime=0},resetFishTime:function(){this._fishTime=0},resetUpTime:function(){this._upTime=0},hookPause:function(){var t=this;if(!this.hasPause){var e=this.game.fishMng.getRareFishNode();if(e){this.downPause=!0,this.hasPause=!0,this.game.fishMng.pauseAllFoe(!1),e.x=m.randomNumBoth(-cc.winSize.width/4,cc.winSize.width/4);var i=this.game.hook.node.convertToWorldSpaceAR(cc.Vec2.ZERO),s=e.convertToWorldSpaceAR(cc.Vec2.ZERO);i.y-s.y>cc.winSize.height/2-100&&(e.y+=180),this.game.gameUI.initWithMask(e),this.scheduleOnce(function(){t.game.gameUI.removeMaskLayer(),t.downPause=!1,t._downTime=0,t.game.fishMng.resumeAllFoe()},3)}}},update:function(t){if(this.game){if(this.posList.push(this.node.position),5<this.posList.length&&this.posList.shift(),this.posxAge=this.posList[0],this.game.setBgColor(this.node.y),this.game.state===a.Ready);else if(this.game.state===a.Down)if(this.node.y<=this._maxLimitY)this.game.setState(a.Fishing);else{this._downTime+=t;var e=this._maxLimitY*t/(this._downLimitTime/2/this._downTime);if(this.game.fishMng.isRareSee()&&!this.hasPause&&(this.hookPause(),console.log("hookPause")),this.downPause&&(e=0),e<-cc.winSize.height&&(e=-cc.winSize.height),this.node.y+=e,this.node.y<this._maxLimitY&&(this.node.y=this._maxLimitY,this._dowmMaxSpeed=e),!this.isIntoSea){var i=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),s=this.game.sea.convertToWorldSpaceAR(cc.Vec2.ZERO);i.y<=s.y&&(this.isIntoSea=!0,this.game.audioMng.playSoundAndValue("sound_fishing",this.game.audioMng.sound+3))}}else if(this.game.state===a.Fishing)this._fishTime+=t,this.downPause||(this.node.y+=5*this._fishTime>this.fishSpeed?this.fishSpeed:5*this._fishTime),this.node.y>=this.initPos.y+this.maxFishingY_M*F.PTM_RATIO&&this.receipt(),this.game.gameUI.battle.isCrazyMode&&this.node.y>=this.game.gameUI.battle.topCrazyPosY&&this.game.gameUI.battle.quitCrazyMode();else if(this.game.state===a.Up){if(this.node.x=this.startUpPosX*this.node.y/this.startUpPosY+this.initPos.x*(this.startUpPosY-this.node.y)/this.startUpPosY,!this.downPause){var n=3*this._upTime+this.upSpeed;this.node.y+=n,this._upTime++}this.node.y>=this.initPos.y&&(this.fishFinish(),this.node.x=this.initPos.x,this.node.y=this.initPos.y);var o=this.getHookDownM();!1===this.game.gameUI.pet.haveStopRun&&-70<o&&this.game.gameUI.pet.stopRun()}else this.game.state,a.Over;this.game.camera.cameraUpdate(),this.game.fishMng.fishMngUpdate(),this.game.line.drawLine()}}}),cc._RF.pop()},{Types:"Types",UserDataStorage:"UserDataStorage",Utils:"Utils"}],LanguageData:[function(t,e,i){"use strict";cc._RF.push(e,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var s=t("polyglot.min"),n=null;function o(t){return window.i18n.languages[t]}function a(t){t&&(n?n.replace(t):n=new s({phrases:t,allowMissing:!0}))}window.i18n||(window.i18n={languages:{},curLang:""}),e.exports={init:function(t){if(t!==window.i18n.curLang){var e=o(t)||{};window.i18n.curLang=t,a(e),this.inst=n}},t:function(t,e){if(n)return n.t(t,e)},inst:n,updateSceneRenderers:function(){for(var t=cc.director.getScene().children,e=[],i=0;i<t.length;++i){var s=t[i].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(e,s)}for(var n=0;n<e.length;++n){e[n].updateLabel()}for(var o=[],a=0;a<t.length;++a){var r=t[a].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(o,r)}for(var h=0;h<o.length;++h){o[h].updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],LeaveCoin:[function(t,e,i){"use strict";cc._RF.push(e,"33b61cuZ91FVIEqv6Po6343","LeaveCoin");var o=t("Utils"),s=t("ADUtils"),n=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{coinTxt:cc.Label,btnAD:cc.Button,leaveCoinTxt:cc.Label,coinBtnTxt:cc.Label,mulTxt:cc.Label,adBtnTxt:cc.Label,_coinMinute:50},start:function(){},init:function(t,e){this.game=t,this.timeStamp=e,this.isWatchAd=!1,this.mulTxt.node.active=!1,this.resetI18nTxt(),this.setLeaveCoin(e),this.showStar()},showStar:function(){if(this.node.getComponent(cc.Animation)){var t=this.node.getComponent(cc.Animation),e=t.getAnimationState("star_show");t.play("star_show");e.on("finished",function(){t.play("star_loop")},this)}},resetI18nTxt:function(){this.leaveCoinTxt.string=this.game.i18n.t("leaveCoin"),this.coinBtnTxt.string=this.game.i18n.t("collect"),this.adBtnTxt.string=this.game.i18n.t("double")},setLeaveCoin:function(t){var e=this.game.userData.upgrade[3],i=0;60*(i=e<10?4:e<=20?8:e<=30?12:24)*60<t&&(t=60*i*60);var s=this.game.userData.upgrade[3];this._coinMinute=Number(this.game.upgradeConfigList[3][s].effect)+this.game.buffList[3];var n=Math.floor(t/60)*this._coinMinute;this.leaveCoin=n,this.coinTxt.string="$"+o.formatNumber(n)},getCoin:function(){this.getAward(),this.game.gameUI.leave=null,this.node.destroy()},getAward:function(){var t=this.game.userData.fishData.getAllCoin;n.updateFishData("getAllCoin",t+this.leaveCoin,!0);var e=this.game.userData.coin;this.game.setCoin(e+this.leaveCoin)},ad:function(){var t=this;console.log("ad"),this.game.audioMng.playSound("sound_books");s.showAD("Doublebonus","2",function(){t.adFinish()})},refreshCoin:function(t){7200<t&&(t=7200);var e=this.game.userData.upgrade[3];this._coinMinute=Number(this.game.upgradeConfigList[3][e].effect)+this.game.buffList[3];var i=Math.floor(t/60)*this._coinMinute;this.coinTxt.node.getComponent("RollNum").rollRecord(1.2,this.leaveCoin,this.leaveCoin+i,"$"),this.leaveCoin=this.leaveCoin+i},adFinish:function(){console.log("Leave 播放广告完成"),this.btnAD.node.active=!1,this.coinTxt.node.getComponent("RollNum").rollRecord(1.2,this.leaveCoin,2*this.leaveCoin,"$"),this.leaveCoin=2*this.leaveCoin,this.mulTxt.node.active=!0,this.mulTxt.string="x 2",this.isWatchAd=!0}}),cc._RF.pop()},{ADUtils:"ADUtils",UserDataStorage:"UserDataStorage",Utils:"Utils"}],Line:[function(t,e,i){"use strict";cc._RF.push(e,"2e7b6ifGFlOKbUKF2KWK+Wm","Line");var o=t("Types").GameState;cc.Class({extends:cc.Component,properties:{Target_p:cc.Node,Rod:cc.Node,Boat:cc.Node,Hooker:cc.Node},onLoad:function(){},start:function(){},init:function(t){this.game=t},drawLine:function(){var t=this.node.getComponent(cc.Graphics);t.clear(),t.strokeColor=cc.Color.BLACK,t.fillColor=cc.Color.BLACK;var e=this.Target_p.getComponent("Hook").getPosxAge();if(t.moveTo(0,0),this.game.state===o.Down&&this.game.hook.node.y<-cc.winSize.height/2||this.game.state===o.Fishing){var i=this.game.camera.node.position;t.lineTo(e.x-this.Target_p.x,i.y-this.Target_p.y+cc.winSize.height/2)}else{var s=this.Boat.convertToWorldSpaceAR(cc.v2(this.Rod.x,this.Rod.y)),n=this.Hooker.convertToNodeSpaceAR(s);t.lineTo(n.x,n.y)}t.close(),t.stroke(),t.fill()},update:function(t){}}),cc._RF.pop()},{Types:"Types"}],LoadConfig:[function(require,module,exports){"use strict";cc._RF.push(module,"3b401uT9UBF3JOlY+bijP64","LoadConfig");var Utils=require("Utils");cc.Class({extends:cc.Component,properties:{},init:function(t){this.game=t,this.loadConfig()},start:function(){},loadConfig:function(){this.maxCofingCount=11,this.loadConfigCount=0,this.loadFishConfig(),this.loadUpgradeData(),this.loadFishGenerated(),this.loadHookSkinConfig(),this.loadBoatSkinConfig(),this.loadAchievementData(),this.loadThemeData(),this.loadPetData(),this.loadLotteryData(),this.loadBossFishGenerated(),this.loadCrazyArrayGenerated()},loadFinishCheck:function(){this.loadConfigCount++,this.loadConfigCount>=this.maxCofingCount&&this.game.loadFinish()},loadFishConfig:function(){var o=this;cc.loader.load(cc.url.raw("resources/config/Fish.json"),function(t,e){if(t)cc.log(t);else{var i=o.trimFishData(e),s=i.fishConfigTable,n=i.stoneConfigTable;o.game.fishConfigTable=s,o.game.stoneConfigTable=n,o.loadFinishCheck()}})},trimFishData:function(t){var e=Utils.deepClone(t),i={},s={};i.config={},i.commonConfig={},i.specialConfig={},i.rareConfig={};for(var n=0;n<e.length;n++){var o=e[n],a=Number(o.id),r=o.name.split("|");o.nameList={},o.nameList.zh_cn=r[0],o.nameList.zh_tw=r[1],o.nameList.en=r[2];var h=o.displayspeed.split("-");switch(o.displaySpeedList={min:Number(h[0]),max:Number(h[1])},i.config[a]=o,Number(o.type)){case 1:i.commonConfig[a]=o;break;case 2:i.specialConfig[a]=o;break;case 3:i.rareConfig[a]=o;break;case 4:s[a]=o}}return{fishConfigTable:i,stoneConfigTable:s}},loadUpgradeData:function(){var i=this;cc.loader.load(cc.url.raw("resources/config/Upgrade.json"),function(t,e){t?cc.log(t):(i.game.upgradeConfigList=i.trimUpgradeData(e),i.loadFinishCheck())})},trimUpgradeData:function(t){for(var e=Utils.deepClone(t),i={},s=0;s<e.length;s++){var n=e[s],o=Number(n.type),a=Number(n.lv);i.hasOwnProperty(o)||(i[o]={}),i[o][a]=n}return i},loadFishGenerated:function(){var i=this;cc.loader.load(cc.url.raw("resources/config/Generated.json"),function(t,e){t?cc.log(t):(i.game.generatedConfigList=i.trimFishGenerated(e),i.loadFinishCheck())})},trimFishGenerated:function(t){for(var e=Utils.deepClone(t),i={},s=0;s<e.length;s++){var n=e[s],o={};o.id=Number(n.id);var a=n.numbers.split("-");o.numbers=[Number(a[0]),Number(a[1])];var r=n.layerRange.split("-");o.ranges=[Number(r[0]),Number(r[1])];var h=n.total_chance.split("|");o.rulesData={};for(var c=0;c<h.length;c++){var l={},d=h[c].split(",");l.fishID=Number(d[0]),l.weight=Number(d[1]),o.rulesData[l.fishID]=l}var u=n.stone_numbers.split("-");o.stoneNumbers=[Number(u[0]),Number(u[1])];var g=n.stone_total_chance.split("|");o.stoneRulesData={};for(var p=0;p<g.length;p++){var f={},m=g[p].split(",");f.fishID=Number(m[0]),f.weight=Number(m[1]),o.stoneRulesData[f.fishID]=f}var v=n.CrazyFish.split("|");o.crazyFishData={};for(var y=0;y<v.length;y++){var S={},w=v[y].split(",");S.crazyID=Number(w[0]),S.fishID=Number(w[1]),o.crazyFishData[S.crazyID]=S}i[o.id]=o}return i},loadHookSkinConfig:function(){var i=this;cc.loader.load(cc.url.raw("resources/config/Skinhook.json"),function(t,e){t?cc.log(t):(i.game.hookSkinConfigList=i.trimHookSkinConfig(e),i.loadFinishCheck())})},trimHookSkinConfig:function(t){for(var e=Utils.deepClone(t),i={},s=0;s<e.length;s++){var n=e[s],o={};o.id=Number(n.id),o.res=String(n.res);var a=n.toget.split(",");o.toget={type:Number(a[0]),effect:Number(a[1])},i[o.id]=o}return i},loadBoatSkinConfig:function(){var i=this;cc.loader.load(cc.url.raw("resources/config/Skinship.json"),function(t,e){t?cc.log(t):(i.game.boatSkinConfigList=i.trimBoatSkinConfig(e),i.loadFinishCheck())})},trimBoatSkinConfig:function(t){for(var e=Utils.deepClone(t),i={},s=0;s<e.length;s++){var n=e[s],o={};o.id=Number(n.id),o.res=String(n.res);var a=n.toget.split(",");o.toget={type:Number(a[0]),effect:Number(a[1])},i[o.id]=o}return i},loadAchievementData:function(){var i=this;cc.loader.load(cc.url.raw("resources/config/Achievement.json"),function(t,e){t?cc.log(t):(i.game.achievementConfigList=i.trimAchievementData(e),i.loadFinishCheck())})},trimAchievementData:function(t){for(var e=Utils.deepClone(t),i={},s=0;s<e.length;s++){var n=e[s],o={};o.id=Number(n.id);var a=n.name.split("|");o.nameList={},o.nameList.zh_cn=a[0],o.nameList.zh_tw=a[1],o.nameList.en=a[2],o.iconName=String(n.icon);var r=n.info.split("|");o.infoList={},o.infoList.zh_cn=r[0],o.infoList.zh_tw=r[1],o.infoList.en=r[2],o.type=Number(n.type),o.count=Number(n.count);var h=n.reward.split(",");o.rewardType=Number(h[0]),o.reward=Number(h[1]),i[o.id]=o}return i},loadThemeData:function(){var i=this;cc.loader.load(cc.url.raw("resources/config/Theme.json"),function(t,e){t?cc.log(t):(i.game.themeConfigList=i.trimThemeData(e),i.loadFinishCheck())})},trimThemeData:function(t){for(var e=Utils.deepClone(t),i={},s=0;s<e.length;s++){var n=e[s],o={};o.id=Number(n.id),o.name=String(n.name),o.res=String(n.res),o.type=Number(n.type),o.gold=Number(n.gold),i[o.id]=o}return i},loadPetData:function(){var i=this;cc.loader.load(cc.url.raw("resources/config/Pet.json"),function(t,e){t?cc.log(t):(i.game.petConfigList=i.trimPetData(e),i.loadFinishCheck())})},trimPetData:function(t){for(var e=Utils.deepClone(t),i={},s=0;s<e.length;s++){var n=e[s],o={};o.id=Number(n.id),o.name=String(n.name),o.res=String(n.res),o.type=Number(n.type),o.gold=Number(n.gold),i[o.id]=o}return i},loadLotteryData:function(){var i=this;cc.loader.load(cc.url.raw("resources/config/Lottery.json"),function(t,e){t?cc.log(t):(i.game.lotteryConfigList=i.trimLotteryData(e),i.loadFinishCheck())})},trimLotteryData:function(t){for(var e=Utils.deepClone(t),i={},s=0;s<e.length;s++){var n=e[s],o={};o.id=Number(n.id),o.icon=String(n.icon);var a=n.rewardinfo.split("|");o.infoList={},o.infoList.zh_cn=String(a[0]),o.infoList.zh_tw=String(a[1]),o.infoList.en=String(a[2]),o.rewardtype=Number(n.rewardtype),o.rewardcount=Number(n.rewardcount),o.weight=Number(n.Weight),i[o.id]=o}return i},loadBossFishGenerated:function(){var i=this;cc.loader.load(cc.url.raw("resources/config/Boss.json"),function(t,e){t?cc.log(t):(i.game.bossGeneratedConfigList=i.trimBossFishGenerated(e),i.loadFinishCheck())})},trimBossFishGenerated:function(t){for(var e=Utils.deepClone(t),i=[],s=0;s<e.length;s++){var n=e[s],o={};o.id=Number(n.id),o.name=String(n.name),o.gold=Number(n.gold),o.ranges=Number(n.ranges),i.push(o)}return i},loadCrazyArrayGenerated:function(){var i=this;cc.loader.load(cc.url.raw("resources/config/CrazyArray.json"),function(t,e){t?cc.log(t):(i.game.crazyArrayConfigList=i.trimCrazyArrayGenerated(e),i.loadFinishCheck())})},trimCrazyArrayGenerated:function trimCrazyArrayGenerated(generatedJsonData){for(var data=Utils.deepClone(generatedJsonData),crazyArrayConfigList={},i=0;i<data.length;i++){var crazyArrayData=data[i],trimData={};trimData.id=Number(crazyArrayData.id);var strCrazyArray=String(crazyArrayData.array),fishArray=eval(strCrazyArray);trimData.fishArray=fishArray,trimData.weight=Number(crazyArrayData.weight),crazyArrayConfigList[trimData.id]=trimData}return crazyArrayConfigList}}),cc._RF.pop()},{Utils:"Utils"}],LoadScene:[function(t,e,i){"use strict";cc._RF.push(e,"141219J3wxI96ok0BigSVGu","LoadScene");var s=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{hookAni:cc.Animation,logoAni:cc.Animation},onLoad:function(){var t=this;s.init(),this.userData=s.UserData,this.soundSwith=this.userData.soundSwitch,this.hookAni.node.getComponent("LogoAni").init(this),this.hookAni.node.active=!1,this.logoAni.node.active=!0,this.isLoadScene=!1,this.preload=!1,this.aniPlay=!1,cc.director.preloadScene("scene/fishScene",function(){t.preload=!0}),this.playLogoAni(),cc.sys.isNative&&(0===this.userData.fishData.fishCount&&trackEvent_2("Action",String("1")),removeSplash())},start:function(){},playLogoAni:function(){var t=this,e=this.logoAni.getAnimationState("logo_xchange");this.logoAni.play("logo_xchange");e.on("finished",function(){t.playHookAni()},this)},playHookAni:function(){var t=this;this.hookAni.node.active=!0;var e=this.hookAni.getAnimationState("logo");this.hookAni.play("logo");e.on("finished",function(){t.aniPlay=!0},this)},lineBreak:function(){},update:function(t){this.aniPlay&&this.preload&&!1===this.isLoadScene&&(this.isLoadScene=!0,cc.director.loadScene("scene/fishScene"))}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage"}],LocalizedLabel:[function(t,e,i){"use strict";cc._RF.push(e,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var s=t("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(t){this._dataID!==t&&(this._dataID=t,this.updateLabel())}},_dataID:""},onLoad:function(){s.inst||s.init(),this.fetchRender()},fetchRender:function(){var t=this.getComponent(cc.Label);if(t)return this.label=t,void this.updateLabel()},updateLabel:function(){this.label?s.t(this.dataID)&&(this.label.string=s.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(t,e,i){"use strict";cc._RF.push(e,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var s=t("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:s}},onLoad:function(){this.fetchRender()},fetchRender:function(){var t=this.getComponent(cc.Sprite);if(t)return this.sprite=t,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(t){for(var e=0;e<this.spriteFrameSet.length;++e)if(this.spriteFrameSet[e].language===t)return this.spriteFrameSet[e].spriteFrame},updateSprite:function(t){if(this.sprite){var e=this.getSpriteFrameByLang(t);!e&&this.spriteFrameSet[0]&&(e=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=e}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],LogoAni:[function(t,e,i){"use strict";cc._RF.push(e,"a04bcuc1DxMU5Y18ZJlWfJJ","LogoAni"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.loadScene=t},onLoad:function(){this.audioMng=this.node.getComponent("AudioMng")},lineBreak:function(){null===this.lineSound&&void 0===this.lineSound||(this.audioMng.stopMusic(this.lineSound),this.lineSound=null),this.loadScene.soundSwith&&this.audioMng.playSound("sound_lineBreak"),console.log("lineBreak")},playLineSound:function(){this.loadScene.soundSwith&&(this.lineSound=this.audioMng.playMusicByKey("sound_fishover",!0))},playHighLightSound:function(){this.audioMng.playSound("sound_levelup")},start:function(){}}),cc._RF.pop()},{}],Lottery:[function(t,e,i){"use strict";cc._RF.push(e,"46673OZMu9MarXk/NLYOTZu","Lottery");var o=t("Utils"),s=t("ADUtils"),a=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{resultNode:cc.Node,resultEffectAni:cc.Animation,lotteryNode1:cc.Node,lotteryNode2:cc.Node,lotteryAni:cc.Animation,againBtn:cc.Button,info:cc.Label,lotteryBg:cc.Sprite,block:cc.Node,effectList:{default:[],type:cc.Node},lotteryBgList:{default:[],type:cc.SpriteFrame},goodNodeList:{default:[],type:cc.Node},badNodeList:{default:[],type:cc.Node},resultIcon:cc.Sprite,iconSize:cc.v2(300,300)},init:function(t){var e=this;this.game=t,this.lotteryNode1.active=!0,this.lotteryNode2.active=!1,this.isAgain=!1,this.noDemons=!1,this.againBtn.interactable=!0,this.lotteryData=null,this.lotteryAni.play("lottery_show");this.lotteryAni.getAnimationState("lottery_show").on("finished",function(){e.lotteryAni.play("lottery_wait"),e.setBlock(!1)},this),this.setBlock(!0),this.iconObj={1:{1:"lottery_Fishs",2:"lottery_depth",3:"lottery_offlineRevenue",4:"lottery_special",5:"lottery_coin",6:"lottery_skill_all"},2:{1:"lottery_Fishs",2:"lottery_depth",3:"lottery_special",4:"lottery_stone",5:"lottery_coin",6:"lottery_skill_all"}},this.effectObj={1:{5:1,6:2},2:{1:2,2:2,3:0,4:1,5:2,6:1}}},setBlock:function(t){this.block.active=t},setLotteryType:function(t){this.lotteryBg.spriteFrame=t?this.lotteryBgList[0]:this.lotteryBgList[1];for(var e=0;e<this.goodNodeList.length;e++){this.goodNodeList[e].active=t}for(var i=0;i<this.badNodeList.length;i++){this.badNodeList[i].active=!t}},resetShow:function(t){this.setInfoData(t),this.setEffectShow(t),this.setIconShow(t)},setInfoData:function(t){var e=window.i18n.curLang;this.info.string=t.infoList[e]},setEffectShow:function(t){this.effectList[0].active=!1,this.effectList[1].active=!1,this.effectList[2].active=!1;var e=t.rewardtype,i=t.rewardcount;this.effectObj.hasOwnProperty(e)&&this.effectObj[e].hasOwnProperty(i)&&(this.effectList[this.effectObj[e][i]].active=!0)},setIconShow:function(t){var i=this,s=t.rewardtype,e=t.rewardcount,n="";1===s||2===s?n="lottery/"+this.iconObj[s][e]:3===s?n="boat/"+this.game.boatSkinConfigList[e].res:4===s?n="hook/"+this.game.hookSkinConfigList[e].res:5===s?n="theme/"+this.game.themeConfigList[e].res:6===s&&(n="pet/"+this.game.petConfigList[e].res),cc.loader.loadRes(n,function(t,e){t?cc.error("load img error:"+t):(cc.log("load img success"),i.resultIcon.spriteFrame=new cc.SpriteFrame(e),4===s?i.resultIcon.node.scale=2:5===s&&(i.resultIcon.node.scale=.7))})},start:function(){},open:function(){var t=this;this.game.audioMng.playSound("sound_books"),this.game.audioMng.playSound("sound_openBottle");s.showAD("ADOpen","3",function(){t.openAni()})},openAni:function(){var t=this;this.setBlock(!0);var e=this.lotteryAni.getAnimationState("lottery_open");this.lotteryAni.play("lottery_open");e.on("finished",function(){t.extractLottery(),this.setBlock(!1)},this)},extractLottery:function(){var t=o.deepClone(this.game.lotteryConfigList);for(var e in t)if(t.hasOwnProperty(e)){var i=t[e],s=!1;3===i.rewardtype&&this.game.userData.skinGet.boat.hasOwnProperty(i.rewardcount)&&(s=!0),4===i.rewardtype&&this.game.userData.skinGet.hook.hasOwnProperty(i.rewardcount)&&(s=!0),5===i.rewardtype&&this.game.userData.skinGet.theme.hasOwnProperty(i.rewardcount)&&(s=!0),6===i.rewardtype&&this.game.userData.skinGet.pet.hasOwnProperty(i.rewardcount)&&(s=!0),s&&delete t[e]}var n=null;!1===this.game.userData.guide.lottery?(n=t[4],a.updateGuide("lottery",!0)):n=o.getResultByWeight(t),this.lotteryNode1.active=!1,this.lotteryNode2.active=!0,console.log(n),this.lotteryData=n,this.resetShow(n),this.setLotteryType(2!==n.rewardtype),this.extractAni(2!==n.rewardtype)},extractAni:function(t){t?(this.resultEffectAni.play("lottery_wait_good"),this.game.audioMng.playSoundAndValue("sound_lottery_good",this.game.audioMng.sound+2)):(this.resultEffectAni.play("lottery_wait_bad"),this.game.audioMng.playSoundAndValue("sound_lottery_bad",this.game.audioMng.sound+2));var e=this;this.setBlock(!0),this.resultNode.scale=.7;var i=cc.callFunc(function(){e.setBlock(!1)});this.resultNode.runAction(cc.sequence(cc.scaleTo(.2,1).easing(cc.easeBackOut()),i))},checkLotteryReward:function(t){if(t){var e=t.rewardtype,i=t.rewardcount;this.game.setLotteryBuff(e,i)}},again:function(){this.game.audioMng.playSound("sound_books");var t=this;this.isAgain=!0;s.showAD("Again","3",function(){t.extractLottery(),t.againBtn.interactable=!1})},close:function(){this.game.audioMng.playSound("sound_books"),this.lotteryData||(console.log("直接关闭"),cc.sys.isNative&&trackEvent_1("LotteryOpenNoAD")),this.checkLotteryReward(this.lotteryData),this.game.gameUI.lotteryLayerNode=null,this.node.destroy()}}),cc._RF.pop()},{ADUtils:"ADUtils",UserDataStorage:"UserDataStorage",Utils:"Utils"}],MaskLayer:[function(t,e,i){"use strict";cc._RF.push(e,"c7908WI7KNCa6gI0uklFogu","MaskLayer"),cc.Class({extends:cc.Component,properties:{tip:cc.Label,maskNode:cc.Node,touchLayer:cc.Node,bg:cc.Node},init:function(t,e,i,s){this.game=t,i?(s?this.setMaskByNode(e):this.setMaskNoFish(e),this.touchLayer.on("touchstart",this.onDestroy,this),this.touchLayer.active=!0):(this.setMask(e),this.touchLayer.active=!1),this.resetI18nTxt(i),this.bg.width=cc.winSize.width,this.bg.height=cc.winSize.height,this.touchLayer.width=cc.winSize.width,this.touchLayer.height=cc.winSize.height},resetI18nTxt:function(t){this.tip.string=t?this.game.i18n.t("click"):this.game.i18n.t("rareTip")},start:function(){},setMask:function(t){if(t){var e=t.convertToWorldSpaceAR(cc.Vec2.ZERO),i=this.game.camera.node.convertToNodeSpaceAR(e),s=t.getChildByName("fishNode"),n=cc.size(s.width,s.height),o=Math.max(s.width,s.height);i=cc.p(i.x+(.5-s.anchorX)*s.scaleX*n.width,i.y+(.5-s.anchorY)*s.scaleY*n.height),this.maskNode.position=i,this.maskNode.width=1.5*o,this.maskNode.height=1.5*o,this.maskNode.scale=1.5,this.maskNode.stopAllActions(),this.maskNode.runAction(cc.scaleTo(.5,1)),this.tip.node.position=cc.p(this.maskNode.x,this.maskNode.y+this.maskNode.height/2),this.bg.position=cc.p(-this.maskNode.x,-this.maskNode.y),this.touchLayer.position=cc.p(0,0),this.game.showRareAni(t,o)}},setMaskNoFish:function(t){var e=this;if(t){var i=t.convertToWorldSpaceAR(cc.Vec2.ZERO),s=this.game.camera.node.convertToNodeSpaceAR(i),n=cc.size(t.width,t.height),o=Math.max(t.width,t.height);s=cc.p(s.x+(.5-t.anchorX)*t.scaleX*n.width,s.y+(.5-t.anchorY)*t.scaleY*n.height),this.maskNode.position=s,this.maskNode.width=1.5*o,this.maskNode.height=1.5*o,this.maskNode.scale=1.5,this.maskNode.stopAllActions(),this.maskNode.runAction(cc.scaleTo(.5,1)),this.tip.node.position=cc.p(this.maskNode.x,this.maskNode.y+this.maskNode.height/2),this.bg.position=cc.p(-this.maskNode.x,-this.maskNode.y),this.touchLayer.position=cc.p(0,0),this.node.stopAllActions();var a=cc.callFunc(function(){e.onDestroy()});this.node.runAction(cc.sequence(cc.delayTime(2),a))}},setMaskByNode:function(t){if(t){var e=t.convertToWorldSpaceAR(cc.Vec2.ZERO),i=this.game.camera.node.convertToNodeSpaceAR(e),s=Math.max(t.width,t.height);this.maskNode.position=i,this.maskNode.width=1.5*s,this.maskNode.height=1.5*s,this.maskNode.scale=1.5,this.maskNode.stopAllActions(),this.maskNode.runAction(cc.scaleTo(.5,1)),this.tip.node.position=cc.p(this.maskNode.x,this.maskNode.y+this.maskNode.height/2),this.bg.position=cc.p(-this.maskNode.x,-this.maskNode.y),this.touchLayer.position=cc.p(0,0)}},onDestroy:function(){this.node.stopAllActions(),this.touchLayer.off("touchstart",this.onDestroy,this),this.node.active=!1}}),cc._RF.pop()},{}],Mask_extend:[function(t,e,i){"use strict";cc._RF.push(e,"6d816EbgMtOZK9yhQTTEBxg","Mask_extend");var s=cc._RendererInSG,m=cc.Enum({RECT:0,ELLIPSE:1,IRR:2});cc.Class({extends:s,editor:{requireComponent:cc.PolygonCollider},properties:{_clippingStencil:{default:null,serializable:!1},_Case:null,_type:2,_segements:64,_area:{default:function(){return[cc.v2(-50,-50),cc.v2(-50,50),cc.v2(50,50),cc.v2(50,-50)]},type:[cc.Vec2]},live:{default:!0,tooltip:"是否实时刷新多边形（编辑时开启，运行看需求，主要怕影响性能？）"},type:{get:function(){return this._type},set:function(t){this._type=t,this._refreshStencil()},type:m},segements:{get:function(){return this._segements},set:function(t){t<3&&(t=3),this._segements=t,this._refreshStencil()},type:cc.Integer}},statics:{Type:m},lateUpdate:function(){this.live&&this._refreshStencil()},_createSgNode:function(){return this._clippingStencil=new cc.DrawNode,this._Case=new cc.ClippingNode(this._clippingStencil),this._Case.setInverted(0),this._Case.setAlphaThreshold(1),this._Case},_initSgNode:function(){},_hitTest:function(t){var e=this.node.getContentSize(),i=e.width,s=e.height,n=this.node.getNodeToWorldTransform();if(this._type===m.RECT){var o=cc.rect(0,0,i,s);cc._rectApplyAffineTransformIn(o,n);var a=t.x-o.x,r=o.x+o.width-t.x,h=t.y-o.y,c=o.y+o.height-t.y;return 0<=a&&0<=r&&0<=c&&0<=h}var l=i/2,d=s/2,u=n.a*l+n.c*d+n.tx,g=n.b*l+n.d*d+n.ty,p=t.x-u,f=t.y-g;return p*p/(l*l)+f*f/(d*d)<1},onEnable:function(){this._refreshStencil(),this._super(),this.node.on("size-changed",this._refreshStencil,this),this.node.on("anchor-changed",this._refreshStencil,this)},onDisable:function(){this._super(),this.node.off("size-changed",this._refreshStencil,this),this.node.off("anchor-changed",this._refreshStencil,this)},_calculateCircle:function(t,e,i){for(var s=[],n=2*Math.PI/i,o=0;o<i;++o)s.push(cc.v2(e.x*Math.cos(n*o)+t.x,e.y*Math.sin(n*o)+t.y));return s},_refreshStencil:function(){this._area=this.getComponent(cc.PolygonCollider).points;var t=this.node.getContentSize(),e=this.node.getAnchorPoint(),i=t.width,s=t.height,n=-i*e.x,o=-s*e.y,a=cc.color(255,255,255,0);if(this._clippingStencil.clear(),this._type===m.RECT){var r=[cc.v2(n,o),cc.v2(n+i,o),cc.v2(n+i,o+s),cc.v2(n,o+s)];this._clippingStencil.drawPoly(r,a,0,a)}else if(this._type===m.IRR)this._clippingStencil.drawPoly(this._area,a,0,a);else if(this._type===m.SP)this._clippingStencil=this.A;else{var h=cc.v2(n+i/2,o+s/2),c={x:i/2,y:s/2},l=this._segements;this._clippingStencil.drawPoly(this._calculateCircle(h,c,l),a,0,a)}}});cc._RF.pop()},{}],MoveEffect:[function(t,e,i){"use strict";cc._RF.push(e,"ae97eUIsnJLAZCgKIrEXbcq","MoveEffect");var n=t("Utils");cc.Class({extends:cc.Component,properties:{time:1,type:"",easeOut:!1},onLoad:function(){},start:function(){},onEnable:function(){this.scheduleOnce(this.moveAction),this.node.opacity=0},setActCallFunc:function(t){this.callFunc=t},moveAction:function(){var t=this;this.node.opacity=255,this.worldPos=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),this.initPos||(this.initPos=this.node.position);var e=n.deepClone(this.worldPos);switch(""===this.type&&(this.worldPos.y<cc.winSize.height/2?this.type="Down":this.worldPos.y>cc.winSize.height/2?this.type="Top":this.worldPos.x<cc.winSize.width/2?this.type="Left":this.type="Right"),this.type){case"Down":e.y=-this.node.height/2;break;case"Top":e.y=cc.winSize.height+this.node.height/2;break;case"Left":e.x=-this.node.width/2;break;case"Right":e.x=cc.winSize.width+this.node.width/2}var i=this.node.parent.convertToNodeSpaceAR(e);this.moveNodePos=i,this.node.position=i,this.node.stopAllActions();var s=cc.callFunc(function(){t.callFunc&&t.callFunc()});this.easeOut?this.node.runAction(cc.sequence(cc.moveTo(this.time,this.initPos).easing(cc.easeBackOut(1)),s)):this.node.runAction(cc.sequence(cc.moveTo(this.time,this.initPos),s))},reverseAct:function(t){this.node.stopAllActions();var e=cc.callFunc(function(){t&&t()});this.node.runAction(cc.sequence(cc.moveTo(this.time,this.moveNodePos),e))}}),cc._RF.pop()},{Utils:"Utils"}],NoAdsLayer:[function(t,e,i){"use strict";cc._RF.push(e,"f9a866k42JJzLNCcCcDbXI9","NoAdsLayer");var a=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{payBtn:cc.Button,payCost:cc.Label,haveIcon:cc.Sprite,getRewardLayer:cc.Prefab},onLoad:function(){this.addAllListener()},start:function(){},init:function(t){this.game=t,this.updateLayerState(),cc.sys.platform===cc.sys.ANDROID?this.payCost.string="$ 2.99":cc.sys.platform!==cc.sys.IPAD&&cc.sys.platform!==cc.sys.IPHONE||(this.payCost.string="$ 1.99")},updateLayerState:function(){var t=this.game.userData.isNoAds;this.payBtn.node.active=!t,this.haveIcon.node.active=t},toPay:function(){console.log("toPay"),cc.sys.isNative?cc.sys.platform===cc.sys.ANDROID?pay("NoAds"):cc.sys.platform!==cc.sys.IPAD&&cc.sys.platform!==cc.sys.IPHONE||pay("NoAdsIos"):this.test()},close:function(){this.removeAllListener(),this.node.destroy()},getReward:function(){var t=cc.instantiate(this.getRewardLayer),e=t.getComponent("GetRewardLayer");a.getSkinList("hook",12,!0);e.init(this.game,{rewardType:2,reward:12},null),this.node.parent.addChild(t)},test:function(){this.game.userData.isNoAds||this.getReward(),a.updateIsNoAds(!0,!1),cc.sys.isNative&&removePageAds(),this.game.gameUI.ready.hideNoAdBtn(),this.close(),console.log("removePaySucceedListener game")},paySucceedListener:function(){var e=this;this.paySucceedlistener=cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:"OnPaySucceed",callback:function(t){e.game.userData.isNoAds||e.getReward(),a.updateIsNoAds(!0,!1),cc.sys.isNative&&removePageAds(),console.log("removePaySucceedListener game"),e.game.gameUI.ready.hideNoAdBtn(),e.close()}}),cc.eventManager.addListener(e.paySucceedlistener,1)},payFaildListener:function(){this.payFaildlistener=cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:"OnPayFailed",callback:function(t){console.log("removePayFailedListener game")}}),cc.eventManager.addListener(this.payFaildlistener,1)},addAllListener:function(){this.paySucceedListener(),this.payFaildListener()},removeAllListener:function(){this.paySucceedlistener&&(cc.eventManager.removeListener(this.paySucceedlistener),this.paySucceedlistener=null),this.payFaildlistener&&(cc.eventManager.removeListener(this.payFaildlistener),this.payFaildlistener=null)},restore:function(){console.log("restore");var o=this;cc.sys.isNative&&(o.restoreSuccesslistener=cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:"OnRestoreSucceed",callback:function(t){Tip.show(o.game.i18n.t("restoreSuccess"),2),console.log("restoreSuccesslistener");var e=getRestorePurchaseResult();console.log(e);var i=e.split(",");console.log(i);for(var s=0;s<i.length;s++){var n=i[s];"NoAds"!==n&&"NoAdsIos"!==n||!1!==o.game.userData.isNoAds||(a.updateIsNoAds(!0,!1),o.getReward(),cc.sys.isNative&&removePageAds(),o.game.gameUI.ready.hideNoAdBtn(),o.removeAllRestoreListener(),o.close())}o.removeAllRestoreListener()}}),o.restoreFailedlistener=cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:"OnRestoreFailed",callback:function(t){Tip.show(o.game.i18n.t("restoreFailed"),2),console.log("restoreFailedlistener"),o.removeAllRestoreListener()}}),cc.eventManager.addListener(o.restoreSuccesslistener,1),cc.eventManager.addListener(o.restoreFailedlistener,1),restorePurchase())},removeAllRestoreListener:function(){this.restoreSuccesslistener&&(cc.eventManager.removeListener(this.restoreSuccesslistener),this.restoreSuccesslistener=null),this.restoreFailedlistener&&(cc.eventManager.removeListener(this.restoreFailedlistener),this.restoreFailedlistener=null)}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage"}],NodePool:[function(t,e,i){"use strict";cc._RF.push(e,"ae06cwk0rpIwqPET6qv+LUW","NodePool");var s=cc.Class({name:"NodePool",properties:{prefab:cc.Prefab,size:0},ctor:function(){this.idx=0,this.initList=[],this.list=[]},init:function(){for(var t=0;t<this.size;++t){var e=cc.instantiate(this.prefab);this.initList[t]=e,this.list[t]=e}this.idx=this.size-1},reset:function(){for(var t=0;t<this.size;++t){var e=this.initList[t];(this.list[t]=e).active&&(e.active=!1),e.parent&&e.removeFromParent()}this.idx=this.size-1},request:function(){if(this.idx<0)return cc.log("Error: the pool do not have enough free item."),null;var t=this.list[this.idx];return t&&(t.active=!0),--this.idx,t},return:function(t){++this.idx,t.active=!1,t.parent&&t.removeFromParent(),this.list[this.idx]=t}});e.exports=s,cc._RF.pop()},{}],OnMultiTouchCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"0d2c90g0U9FOoJIIx8pSISd","OnMultiTouchCtrl"),cc.Class({extends:cc.Component,properties:{canvas:cc.Node,target:cc.Node},onLoad:function(){var a=this,r=this.node.parent;a.canvas.on(cc.Node.EventType.TOUCH_START,function(t){var e=t.getTouches();return console.log(e.length),a.startDistance=null,!(a.endDistance=null)},a.node),a.canvas.on(cc.Node.EventType.TOUCH_MOVE,function(t){var e=t.getTouches();if(2<=e.length){var i=e[0],s=e[1],n=r.convertToNodeSpaceAR(i.getLocation()),o=r.convertToNodeSpaceAR(s.getLocation());a.startDistance?a.endDistance=cc.pDistance(n,o):(a.startDistance=cc.pDistance(n,o),console.log("startDistance move"),console.log(a.startDistance))}},a.node),a.canvas.on(cc.Node.EventType.TOUCH_END,function(t){null!==a.startDistance&&null!==a.endDistance&&(50<a.endDistance-a.startDistance&&(a.target.scale=1,a.target.position=cc.p(0,0)),50<a.startDistance-a.endDistance&&(a.target.scale=.5,a.target.position=cc.p(0,0)))},a.node)}}),cc._RF.pop()},{}],Over:[function(t,e,i){"use strict";cc._RF.push(e,"e49c7JPtuVLUYGBv6H1a1O+","Over");var s=t("Types").GameState,a=t("Utils"),n=t("ADUtils"),o=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{newRecordNode:cc.Node,newRecordTxt:cc.Label,coin:cc.Label,mul:cc.Label,btnGet:cc.Button,btnAD:cc.Button,getTxt:cc.Label,adLabel:cc.Label,superAward:{default:200,tooltip:"千分比"}},start:function(){},init:function(t,e,i){this.game=t,this.fishCoin=e,this.game.showFishHomeMask=i,this.resetI18nTxt(),this.game.fishMng.returnAllFoe(),this.coin.string="+"+a.formatNumber(e),this.mul.node.active=!1,this.isAdPlay=!1;var s=1e3*Math.random();if(this.multiple=s<=this.superAward?3:2,this.game.userData.fishData.fishCount%7==0&&(this.multiple=3),1.3*this.game.userData.fishData.highestReward<=e&&(this.multiple=4),4===this.multiple){this.adLabel.string=this.game.i18n.t("quadruple");var n=this.btnAD.node.getComponent(cc.Animation);this.anim=n.play("ads_show")}else if(3===this.multiple){this.adLabel.string=this.game.i18n.t("triple");var o=this.btnAD.node.getComponent(cc.Animation);this.anim=o.play("ads_show")}else this.adLabel.string=this.game.i18n.t("double"),this.btnAD.node.scale=1;this.showStar(),this.setRecord(e),this.btnAD.node.active=!0,this.game.resetLotteryBuff("other")},showStar:function(){var t=this;if(this.node.getComponent(cc.Animation)){var e=this.node.getComponent(cc.Animation),i=e.getAnimationState("star_show");e.play("star_show");i.on("finished",function(){t.game.updateTimer=0,t.game.saveTime(),e.play("star_loop")},this)}},setRecord:function(t){this.game.userData.fishData.highestReward<t?(this.newRecordNode.active=!0,o.updateFishData("highestReward",t,!0),this.game.audioMng.playSound("sound_record"),this.newRecordNode.scale=0,this.newRecordNode.runAction(cc.sequence(cc.delayTime(.5),cc.scaleTo(.2,1).easing(cc.easeBackOut())))):this.newRecordNode.active=!1},resetI18nTxt:function(){this.getTxt.string=this.game.i18n.t("collect"),this.newRecordTxt.string=this.game.i18n.t("newRecord")},getCoin:function(){this.game.hook.isGetLottery&&this.game.gameUI.initWithLotteryLayer(),this.game.setState(s.Ready),this.game.audioMng.playSound("sound_books"),this.getAward();var t=!1;this.game.ratingTime--,!1===this.game.userData.guide.rating&&0===this.game.ratingTime&&(this.game.gameUI.initWithEvaluate(),t=!0),cc.sys.isNative&&!1===t&&9<=this.game.userData.fishData.fishCount&&!1===this.isAdPlay&&showPageAds("Gameover","1"),this.game.achievementCheck.checkAchievementState(),this.game.showFishHomeMask&&this.game.gameUI.initWithMask(this.game.boat.boatItem.getComponent("BoatItem").fishHome.node,!0,!0),this.btnGet.node.stopAllActions(),this.btnGet.node.scale=1,this.node.active=!1},getAward:function(){var t=this.game.userData.fishData.getAllCoin;o.updateFishData("getAllCoin",t+this.fishCoin,!0);var e=this.game.userData.coin;this.game.setCoin(e+this.fishCoin)},ad:function(){var t=this;console.log("ad"),this.game.audioMng.playSound("sound_books");n.showAD("Doublebonus","1",function(){t.doublebonusAdFinish()})},overAd:function(){n.showADNoTip("OverAD","1")},doublebonusAdFinish:function(){console.log("Over doublebonusAdFinish 播放广告完成"),this.isAdPlay=!0,this.btnAD.node.active=!1,this.coin.node.getComponent("RollNum").rollRecord(1.2,this.fishCoin,this.fishCoin*this.multiple,"+"),this.fishCoin=this.fishCoin*this.multiple,this.mul.node.active=!0,this.mul.string="x "+this.multiple}}),cc._RF.pop()},{ADUtils:"ADUtils",Types:"Types",UserDataStorage:"UserDataStorage",Utils:"Utils"}],PageViewCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"becf9ZpBi5KG43ard9opUPT","PageViewCtrl"),cc.Class({extends:cc.Component,properties:{curNum:3,curTotal:10,pageTeample:cc.Prefab,target:cc.PageView},_createPage:function(){var t=cc.instantiate(this.pageTeample);t.position=new cc.p(0,0);var e=new cc.Color;return e.r=Math.floor(255*Math.random()),e.g=Math.floor(255*Math.random()),e.b=Math.floor(255*Math.random()),t.color=e,t},onLoad:function(){this.onJumpHomeNow()},init:function(t,e,i){this.game=t,this.type=e,this.targetScr=i},currentPage:function(){return this.target.getCurrentPageIndex()},update:function(){},getPageCount:function(){return this.target.getPages().length},onJumpHome:function(){this.target.scrollToPage(0)},onJumpHomeNow:function(){this.target.scrollToPage(0,0)},leftPage:function(){this.target.getCurrentPageIndex()<=0||this.target.scrollToPage(this.target.getCurrentPageIndex()-1)},rightPage:function(){this.target.getCurrentPageIndex()+1>=this.target.getPages().length||this.target.scrollToPage(this.target.getCurrentPageIndex()+1)},plusPage:function(t){this.curNum>this.curTotal||(this.curNum++,t&&t())},lessPageNum:function(t){this.curNum<=0||(this.curNum--,t&&t())},onAddPage:function(){var t=this;this.plusPage(function(){t.target.addPage(t._createPage())})},onInsertPage:function(){var t=this;this.plusPage(function(){t.target.insertPage(t._createPage(),t.target.getCurrentPageIndex())})},onRemovePage:function(){var e=this;this.lessPageNum(function(){var t=e.target.getPages();e.target.removePage(t[t.length-1])})},onRemovePageAtIndex:function(){var t=this;this.lessPageNum(function(){t.target.removePageAtIndex(t.target.getCurrentPageIndex())})},onRemoveAllPage:function(){this.target.removeAllPages(),this.curNum=0},onPageEvent:function(t,e){if(e===cc.PageView.EventType.PAGE_TURNING){console.log("当前所在的页面索引:"+t.getCurrentPageIndex());var i=t.getCurrentPageIndex();this.targetScr.checkBtnData(i)}}}),cc._RF.pop()},{}],Pet:[function(t,e,i){"use strict";cc._RF.push(e,"298dfEdCmRHG5MM9ssobQ+s","Pet");var s=t("UserDataStorage"),n=t("Utils");t("Types").GameState;cc.Class({extends:cc.Component,properties:{petSkinSp:sp.Skeleton,petShiftTime:100,iceNode:cc.Node,btnSetSkin:cc.Button,petShowNode:cc.Node,petRunNode:cc.Node},onLoad:function(){},init:function(t){this.game=t,this.wait=!0,this.setPetSkin(),this.resetPetParentNode(!0)},start:function(){},resetPetNodePos:function(){var t=cc.p(0,0);1===this.skinId?t=cc.p(cc.winSize.width/2-80,-48):2===this.skinId?t=cc.p(cc.winSize.width/2-80,-120):5===this.skinId&&(t=cc.p(cc.winSize.width/2-80,-80)),this.petShowNode.position=t;var e=this.petShowNode.convertToWorldSpaceAR(cc.Vec2.ZERO),i=this.game.gameUI.node.convertToNodeSpaceAR(e);this.petRunNode.position=i,this.petSkinSp.node.position=cc.p(0,0),this.setIceShow(!0)},resetPetParentNode:function(t){this.node.parent=t?this.petShowNode:this.petRunNode},selectPetSkin:function(){this.game.gameUI.ready.openThemeLayer()},getPetSkin:function(t){s.getSkinList("pet",t,!1);var e=this.game.userData.skinGet.pet;1===Object.getOwnPropertyNames(e).length&&(s.updateSelectSkin("pet",t,!1),this.setPetSkin())},setPetSkin:function(){var i=this;this.skinId=this.game.userData.selectSkin.pet,this.res="pet/role_Pet_"+this.skinId+"_DH/role_Pet_"+this.skinId,0!==this.skinId?(this.petSkinSp.node.active=!0,cc.loader.loadRes(this.res,sp.SkeletonData,function(t,e){t?(cc.error("load petSkin error:"+t),cc.log("pet加载图片错误")):(cc.log("load petSkin success"),5===i.skinId?i.petSkinSp.node.scale=.5:i.petSkinSp.node.scale=1,console.log(i.petSkinSp),i.petSkinSp.skeletonData=e,i.setAnimationOfWait())}),this.shiftTime=this.petShiftTime,this.CanGetGeward=!1,this.setBtnEnable(!0),this.wait=!0):this.petSkinSp.node.active=!1,this.resetPetNodePos()},setIceShow:function(t){1!==this.skinId&&(t=!1),this.iceNode.active=t},setBtnEnable:function(t){0===this.skinId&&(t=!1),this.btnSetSkin.node.active=t},setAnimationOfWait:function(){0!==this.skinId&&(this.Wait(),this.wait=!0,this.setIceShow(!0))},startReady:function(){var t=this;0!==t.skinId&&(this.wait=!1,this.isStopRun=!1,this.haveStopRun=!1,this.scheduleOnce(function(){t.resetPetParentNode(!1),t.setIceShow(!1),t.jumpTowater()},0),t.petSkinSp.setAnimation(0,"role_move",!0))},Wait:function(){0!==this.skinId&&this.petSkinSp.setAnimation(0,"role_wait",!0)},jumpTowater:function(){if(0!==this.skinId){this.node.position=this.node.parent.convertToNodeSpaceAR(cc.p(100,cc.winSize.height+200));var t=cc.p(100,cc.winSize.height-100),e=this.node.parent.convertToNodeSpaceAR(t);2===this.skinId?this.petSkinSp.node.rotation=220:1===this.skinId?this.petSkinSp.node.rotation=180:5===this.skinId&&(this.petSkinSp.node.rotation=200),this.node.runAction(cc.moveTo(1,e))}},waterRunToTargetPos:function(t){var e=this;if(0!==this.skinId){var i=cc.p(100,cc.winSize.height/2-100),s=this.node.parent.convertToNodeSpaceAR(i),n=cc.moveTo(.4,s),o=this.node.parent.convertToNodeSpaceAR(cc.p(cc.winSize.width/2-200,cc.winSize.height/2-600)),a=this.node.parent.convertToNodeSpaceAR(cc.p(cc.winSize.width/2+200,cc.winSize.height/2-600)),r=this.node.parent.convertToNodeSpaceAR(cc.p(cc.winSize.width-100,cc.winSize.height/2-400)),h=[o,a,r],c=cc.bezierTo(.8,h),l=cc.callFunc(function(){e.petSkinSp.node.rotation=d,e.node.position=r,t()});this.node.runAction(cc.sequence(n,c,l));var d=0-this.petSkinSp.node.rotation;this.petSkinSp.node.runAction(cc.sequence(cc.delayTime(.4),cc.rotateBy(.8,d)))}},stopRun:function(){0!==this.skinId&&(this.isStopRun=!0,this.haveStopRun=!0,this.petSkinSp.setAnimation(0,"role_move",!0))},startShow:function(){var t=this;if(0!==t.skinId){t.petSkinSp.setAnimation(0,"role_move",!0);this.waterRunToTargetPos(function(){t.petShowOver()})}},petShowOver:function(){0!==this.skinId&&(this.petSkinSp.setAnimation(0,"role_move",!0),this.CanGetGeward=!0)},getGewardAnimation:function(){if(0!==this.skinId&&!0===this.CanGetGeward&&(void 0===this.reward||"role_move"===this.petSkinSp.animation)){this.reward=this.petSkinSp.setAnimation(0,"role_reward",!1),this.petSkinSp.addAnimation(0,"role_move",!0);var t="sound_pet"+this.skinId+"_wow";this.game.audioMng.playSound(t)}},goIceAnimation:function(){var t=this;0!==t.skinId&&(this.isStopRun=!1,this.petSkinSp.node.rotation=0,t.setIceShow(!0),t.resetPetParentNode(!0),t.node.position=cc.p(0,0),t.petSkinSp.node.position=cc.p(0,-150),t.CanGetGeward=!1,t.petSkinSp.setAnimation(0,"role_move2",!0),t.petSkinSp.node.runAction(cc.sequence(cc.moveTo(.5,cc.v2(0,0)),cc.callFunc(function(){t.setAnimationOfWait()}))))},getGoIceAniTime:function(){return.8},setBossMode:function(t){0!==this.skinId&&(t?this.petSkinSp.setAnimation(0,"role_reward",!0):this.petSkinSp.setAnimation(0,"role_move",!0))},update:function(){var t=this;if(0!==this.skinId){if(this.isStopRun){var e=this.game.hook.getSpeedY()/3;this.node.y-=e}if(t.shiftTime--,t.shiftTime<=0){if(!0===this.wait){var i=n.getRandomRate(1,100);i<30?(t.petSkinSp.setAnimation(0,"role_show1",!1),t.petSkinSp.addAnimation(0,"role_wait",!0,0)):30<i&&i<60&&(t.petSkinSp.setAnimation(0,"role_show2",!1),t.petSkinSp.addAnimation(0,"role_wait",!0,0))}t.shiftTime=t.petShiftTime}}}}),cc._RF.pop()},{Types:"Types",UserDataStorage:"UserDataStorage",Utils:"Utils"}],Player:[function(t,e,i){"use strict";cc._RF.push(e,"13561NKsk9EQKNHK8QGRbqv","Player"),cc.Class({extends:cc.Component,properties:{skinSpr:cc.Sprite,smokeNode:cc.Node,skinList:{default:[],type:cc.SpriteFrame}},onLoad:function(){},resetSkin:function(){},start:function(){}}),cc._RF.pop()},{}],PoolMng:[function(t,e,i){"use strict";cc._RF.push(e,"cd495FDvCJABbwsP/ifP5UU","PoolMng");var s=t("NodePool");cc.Class({extends:cc.Component,properties:{pools:{default:[],type:s}},init:function(){for(var t=0;t<this.pools.length;++t)this.pools[t].init()},request:function(t){var e=this.pools[t];return 0<=e.idx?e.request():null},return:function(t,e){var i=this.pools[t];i.idx<i.size?i.return(e):cc.log("Return obj to a full pool, something has gone wrong")}}),cc._RF.pop()},{NodePool:"NodePool"}],ReadyUI:[function(t,e,i){"use strict";cc._RF.push(e,"aa468DFepJLVKcTYXaBdy3g","ReadyUI");var r=t("Utils"),s=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{soundSpr:cc.Sprite,noSoundIcon:cc.Sprite,txt_coin:cc.Label,startTip:cc.Label,SetThemeAndPetLayer:cc.Prefab,noAdsLayerPrefab:cc.Prefab,skillList:[cc.Node],maskNode:cc.Node,rankBtn:cc.Button,noADBtn:cc.Button,particleList:{default:[],type:cc.Node}},init:function(t){this.game=t,this.adSkillId=null,this.isSkillTipAct=!1;for(var e=0;e<this.skillList.length;e++){this.skillList[e].getComponent("SkillItem").init(this.game)}this.sound=this.game.userData.soundSwitch,this.initSound(),this.game.userData.guide.upgrade||this.setSkillListActive(!1),this.game.userData.isNoAds&&this.hideNoAdBtn()},hideNoAdBtn:function(){this.noADBtn.node.active=!1},start:function(){},setSkillListActive:function(t){for(var e=0;e<this.skillList.length;e++){var i=this.skillList[e];t&&(i.active=!0,i.getComponent("MoveEffect").moveAction()),t||(i.active=!1)}},initSound:function(){this.sound?(this.game.audioMng.resumeMute(),this.noSoundIcon.node.active=!1):(this.game.audioMng.mute(),this.noSoundIcon.node.active=!0)},switchSound:function(){this.sound?(this.game.audioMng.mute(),this.noSoundIcon.node.active=!0):(this.game.audioMng.resumeMute(),this.noSoundIcon.node.active=!1),s.updateSoundSwitch(!this.sound),this.sound=!this.sound},share:function(){this.game.audioMng.playSound("sound_books"),cc.sys.isNative&&(this.isHide(!0),setBackgroundPageEnabled(!1),this.addShareListener(),shareScreen(),this.game.gameUI.initWithLoadingLayer(!0))},addShareListener:function(){var e=this;this.shareSucceedListener=cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:"OnShareSucceed",callback:function(t){console.log("OnShareSucceed"),e.shareSucceed(),e.removeShareListener()}}),this.shareFailedListener=cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:"OnShareFailed",callback:function(t){console.log("OnShareFailed"),e.shareFailed(),e.removeShareListener()}}),cc.eventManager.addListener(this.shareSucceedListener,1),cc.eventManager.addListener(this.shareFailedListener,1)},shareSucceed:function(){cc.sys.isNative&&(trackEvent_1("Share"),setBackgroundPageEnabled(!0));var t=this.game.userData.shareCount;s.updateShareCount(t+1,!1),this.game.achievementCheck.checkAchievementState(),this.isHide(!1),this.game.gameUI.removeLoadingLayer()},shareFailed:function(){cc.sys.isNative&&setBackgroundPageEnabled(!0),this.isHide(!1),this.game.gameUI.removeLoadingLayer()},removeShareListener:function(){cc.eventManager.removeListener(this.shareSucceedListener),this.shareSucceedListener=null,cc.eventManager.removeListener(this.shareFailedListener),this.shareFailedListener=null},isHide:function(t){!0===t?this.node.opacity=0:!1===t&&(this.node.opacity=255);for(var e=0;e<Object.getOwnPropertyNames(this.particleList).length-1;e++)this.particleList[e].active=!t},removeAds:function(){var t=cc.instantiate(this.noAdsLayerPrefab);t.getComponent("NoAdsLayer").init(this.game),this.node.addChild(t,2)},rankingList:function(){if(cc.sys.isNative){var t=this.game.userData.fishData.getAllCoin;uploadScore("leaderboardRevenue",Number(t)),leaderBoard("leaderboardRevenue")}},achievementList:function(){cc.sys.isNative&&achievements()},resetAllSkillUI:function(){for(var t=0;t<this.skillList.length;t++){this.skillList[t].getComponent("SkillItem").resetUI()}},checkAllSkillState:function(){for(var t=0;t<this.skillList.length;t++){this.skillList[t].getComponent("SkillItem").checkState()}},refreshSkillTip:function(){for(var t=0;t<this.skillList.length;t++){this.skillList[t].getComponent("SkillItem").resetTip()}},skillLotteryUp:function(t){this.skillList[t]&&this.skillList[t].getComponent("SkillItem").lotteryUp()},fadeSkillTip:function(){if(this.isSkillTipAct){for(var t=0;t<this.skillList.length;t++){this.skillList[t].getComponent("SkillItem").ActTipIfActive()}this.isSkillTipAct=!1}},randomSkillADState:function(){var t=this.game.userData.upgrade,e=0;for(var i in t){if(t.hasOwnProperty(i))e+=t[i]}var s=.05*Math.floor(e/15),n=Math.random()<=s;if(this.game.userData.skillAdInfoDay.current>=this.game.userData.skillAdInfoDay.max&&(n=!1),this.game.userData.isNoAds&&(n=!1),this.adSkillId=null,(t[1]<Object.getOwnPropertyNames(this.game.upgradeConfigList[1]).length||t[2]<Object.getOwnPropertyNames(this.game.upgradeConfigList[2]).length||t[3]<Object.getOwnPropertyNames(this.game.upgradeConfigList[3]).length)&&n)for(;this.adSkillId=r.randomNumBoth(1,Object.getOwnPropertyNames(t).length),console.log("isAd"),t[this.adSkillId]>=Object.getOwnPropertyNames(this.game.upgradeConfigList[this.adSkillId]).length;);for(var o=0;o<this.skillList.length;o++){var a=this.skillList[o].getComponent("SkillItem");a.checkState(),a.setAdUp(a.type===this.adSkillId)}},hasAdSkill:function(){for(var t=0;t<this.skillList.length;t++){if(this.skillList[t].getComponent("SkillItem").isAdUp)return!0}return!1},setCoin:function(t){this.txt_coin.node.getComponent("RollNum").rollRecord(1.2,this.game.userData.coin,t,"")},fishHome:function(){this.game.gameUI.initWithFishHome()},openThemeLayer:function(){var t=cc.instantiate(this.SetThemeAndPetLayer),e=t.getComponent("SetThemeAndPetLayer");this.setPetNode=t,e.init(this.game,"pet"),this.node.addChild(t,2),this.game.audioMng.playSound("sound_books"),console.log("创建宠物切换页面")},testOpenLottery:function(){this.game.gameUI.initWithLotteryLayer()}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage",Utils:"Utils"}],Reward:[function(t,e,i){"use strict";cc._RF.push(e,"f61facyXHRN65DBiGgo2S+c","Reward");var s=t("UserDataStorage"),n=t("Types").GameState,o=t("Utils");cc.Class({extends:cc.Component,properties:{bg:cc.Sprite,cup:cc.Sprite,rewardBottom:cc.Sprite,txt_name:cc.Label,txt_desc:cc.Label,progress:cc.ProgressBar,txt_progress:cc.Label,progressBar:cc.ProgressBar,img_hookIcon:cc.Sprite,img_boatIcon:cc.Sprite,img_showIcon:cc.Sprite,img_coin:cc.Sprite,txt_coinNum:cc.Label,btn_get:cc.Button,img_complete:cc.Sprite,img_receive:cc.Sprite,mask:cc.Sprite,gotoAchievementBtn:cc.Button,getRewardLayer:cc.Prefab},init:function(t,e,i,s,n,o){this.game=t,this.data=e,this.index=s,this.status=n,this.currentNum=i,this.gotoAchievementBtn.node.active=o,this.initData(),this.setStatus(n)},initData:function(){var t=window.i18n.curLang;this.txt_name.string=this.data.nameList[t],this.txt_desc.string=this.data.infoList[t],this.txt_progress.string=this.currentNum+" / "+this.data.count,this.setProgress(Number(this.currentNum),Number(this.data.count)),3===this.data.rewardType&&(this.txt_coinNum.string=o.formatNumber(this.data.reward))},setProgress:function(t,e){var i=t/e;1<i&&(i=1),i<=0&&(i=1e-5),this.progress.progress=i},setStatus:function(t){var e=cc.color(134,134,134),i=cc.color(93,133,226),s=cc.color(140,103,75),n=cc.color(255,255,255);2===t?(this.bg._sgNode.setState(1),this.cup._sgNode.setState(1),this.img_coin._sgNode.setState(1),this.rewardBottom._sgNode.setState(1),this.progress.barSprite._sgNode.setState(1),4===this.data.rewardType&&this.img_showIcon._sgNode.setState(1),this.progress.node.getComponent(cc.Sprite)._sgNode.setState(1),this.txt_name.node.color=e,this.txt_desc.node.color=e,this.txt_progress.node.color=e):(this.bg._sgNode.setState(0),this.cup._sgNode.setState(0),this.img_coin._sgNode.setState(0),this.rewardBottom._sgNode.setState(0),this.progress.barSprite._sgNode.setState(0),this.progress.node.getComponent(cc.Sprite)._sgNode.setState(0),this.txt_name.node.color=i,this.txt_desc.node.color=s,this.txt_progress.node.color=n),this.rewardBottom.node.active=!0,this.img_showIcon.node.active=3!==this.data.rewardType,0===t?4===this.data.rewardType?(this.img_showIcon._sgNode.setState(1),this.img_showIcon.srcBlendFactor=cc.macro.SRC_ALPHA,this.img_showIcon.node.opacity=255):(this.img_showIcon.srcBlendFactor=cc.macro.ZERO,this.img_showIcon.node.opacity=150):(this.img_showIcon.srcBlendFactor=cc.macro.SRC_ALPHA,this.img_showIcon.node.opacity=255),1===t?this.cupShake():this.cupStopShake(),3!==this.data.rewardType&&this.setRewardShow(),this.img_coin.node.active=3===this.data.rewardType,this.txt_coinNum.node.active=3===this.data.rewardType,this.btn_get.interactable=1===t,this.img_receive.node.active=1===t,this.img_complete.node.active=2===t,this.mask.node.active=0===t},cupShake:function(){var t=cc.rotateTo(.1,-30),e=cc.rotateTo(.1,30),i=cc.rotateTo(.1,-20),s=cc.rotateTo(.1,20),n=cc.rotateTo(.1,-10),o=cc.rotateTo(.1,10),a=cc.rotateTo(.1,0),r=cc.delayTime(.2);this.cup.node.stopAllActions(),this.cup.node.runAction(cc.sequence(t,e,i,s,n,o,a,r).repeatForever())},cupStopShake:function(){this.cup.node.stopAllActions(),this.cup.node.rotation=0},complete:function(){var t=this.data.rewardType,e=this.data.reward;switch(t){case 1:s.getSkinList("boat",e,!1);break;case 2:s.getSkinList("hook",e,!1);break;case 3:var i=this.game.userData.coin;this.game.setCoin(i+e);break;case 4:s.getSkinList("theme",e,!1);break;case 5:this.game.gameUI.pet.getPetSkin(e)}s.updateAchievement(this.data.id,!0,!1),this.setStatus(2)},setRewardShow:function(){var r=this;this.let=null,1===this.data.rewardType?this.res="boat/"+this.game.boatSkinConfigList[this.data.reward].res:2===this.data.rewardType?this.res="hook/"+this.game.hookSkinConfigList[this.data.reward].res:4===this.data.rewardType?this.res="theme/"+this.game.themeConfigList[this.data.reward].res:5===this.data.rewardType&&(this.res="pet/"+this.game.petConfigList[this.data.reward].res),cc.loader.loadRes(this.res,function(t,e){if(t)cc.error("load hookskin img error:"+t);else{cc.log("load hookskin img success"),r.img_showIcon.spriteFrame=new cc.SpriteFrame(e);var i=cc.size(r.rewardBottom.node.width,r.rewardBottom.node.height),s=r.img_showIcon.spriteFrame.getOriginalSize(),n=i.width/s.width,o=i.height/s.height,a=Math.min(n,o);2===r.data.rewardType&&(a*=.8),r.img_showIcon.node.scale=a}})},gotoAchievement:function(){this.game.state===n.Ready&&(this.game.gameUI.fishHome||this.game.gameUI.initWithFishHome(!0,!1),this.game.gameUI.fishHome.achievementNode||this.game.gameUI.fishHome.openAchievement(null,null))},openGetRewardLayer:function(){this.game.audioMng.playSound("sound_books");var t=this,e=cc.instantiate(this.getRewardLayer);e.getComponent("GetRewardLayer").init(this.game,this.data,function(){t.complete()}),this.game.gameUI.fishHome.achievementNode&&this.game.gameUI.fishHome.achievementNode.addChild(e)}}),cc._RF.pop()},{Types:"Types",UserDataStorage:"UserDataStorage",Utils:"Utils"}],RollNumProgress:[function(t,e,i){"use strict";cc._RF.push(e,"9fdb4WQiflMSa9bfGkfJYHi","RollNumProgress");t("Utils");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},rollRecord:function(t,e,i){this.currentNum=e,this.node.getComponent(cc.ProgressBar)&&(e<0&&(e=0),1<i&&(i=1),this.node.getComponent(cc.ProgressBar).progress=e,this.targetNum=i,this.startRoll=!0,this.startTime=0,this.targetTime=t)},update:function(t){if(!0===this.startRoll){this.startTime+=t,this.startTime>=this.targetTime&&(this.startRoll=!1,this.startTime=this.targetTime);var e=this.startTime/this.targetTime*(this.targetNum-this.currentNum)+this.currentNum;this.node.getComponent(cc.ProgressBar).progress=e}}}),cc._RF.pop()},{Utils:"Utils"}],RollNum:[function(t,e,i){"use strict";cc._RF.push(e,"5989fp78udCPqaRtjr9bwNS","RollNum");var h=t("Utils");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},rollRecord:function(t,e,i,s,n){var o=s||"",a=n||"";if(this.pre=o,this.suf=a,this.node.getComponent(cc.Label)){this.currentNum=e;var r=h.formatNumber(e);this.node.getComponent(cc.Label).string=this.pre+String(r)+this.suf,this.targetNum=i,this.startRoll=!0,this.startTime=0,this.targetTime=t}},update:function(t){!0===this.startRoll&&(this.startTime+=t,this.startTime>=this.targetTime&&(this.startRoll=!1,this.startTime=this.targetTime),this.node.getComponent(cc.Label).string=this.pre+h.formatNumber(parseInt(this.startTime/this.targetTime*(this.targetNum-this.currentNum)+this.currentNum))+this.suf)}}),cc._RF.pop()},{Utils:"Utils"}],SetThemeAndPetLayer:[function(t,e,i){"use strict";cc._RF.push(e,"c10e0YIMktCY7w2T8D8yGMe","SetThemeAndPetLayer");var o=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{itemPrefab:cc.Prefab,itemsContent:cc.Node,funcBtn:cc.Button,btnTxt:cc.Label,pageControl:cc.Node,leftBtn:cc.Button,rightBtn:cc.Button},init:function(t,e){this.game=t,this.type="pet"===e?"pet":"theme",this.pageControl=this.pageControl.getComponent("PageViewCtrl"),this.pageControl.init(this.game,this.type,this),this.initialize(this.type),this.checkBtnData(this.pageControl.currentPage())},initialize:function(t){this.config=null,this.itemsList=[],this.config="pet"===t?this.game.petConfigList:this.game.themeConfigList,this.itemsContent.removeAllChildren();var e=0;for(var i in this.config)if(this.config.hasOwnProperty(i)){var s=this.config[i],n=cc.instantiate(this.itemPrefab),o=n.getComponent("ThemeAndPetItem"),a=this.getIDByIndex(e);o.init(this.game,t,s,a),this.itemsContent.addChild(n),this.itemsList.push(n),e++}},start:function(){},setBtnState:function(t){switch(this.btnState=t){case 1:this.funcBtn.interactable=!1,this.btnTxt.string=this.game.i18n.t("themeAndPetInUse");break;case 2:this.funcBtn.interactable=!0,this.btnTxt.string=this.game.i18n.t("themeAndPetUse");break;case 3:this.funcBtn.interactable=!0,this.btnTxt.string=this.game.i18n.t("themeAndPetBuy");break;case 4:this.funcBtn.interactable=!1,this.btnTxt.string=this.game.i18n.t("themeAndPetAchievement");break;case 5:this.funcBtn.interactable=!1,this.btnTxt.string=this.game.i18n.t("themeAndPetGift")}},funcClick:function(){this.game.audioMng.playSound("sound_levelup");var t=Number(this.pageControl.currentPage()),e=this.getIDByIndex(Number(this.pageControl.currentPage()));if(2===this.btnState)o.updateSelectSkin(this.type,e,!1),"theme"===this.type&&this.game.gameUI.fishHome&&this.game.gameUI.fishHome.fishTank?this.game.gameUI.fishHome.fishTank.switchTheme(e):"pet"===this.type&&this.game.gameUI.pet&&this.game.gameUI.pet.setPetSkin();else if(3===this.btnState){var i=this.config[e],s=this.game.userData.coin,n=Number(i.gold);if(s<n)return void Tip.show("用户金币不足",2);this.game.setCoin(s-n),o.getSkinList(this.type,e,!1)}this.checkBtnData(t)},getIDByIndex:function(t){var e=0,i=0;for(var s in this.config)this.config.hasOwnProperty(s)&&(e===t&&(i=Number(s)),e++);return i},checkBtnData:function(t){var e,i=this.getIDByIndex(Number(t)),s={},n=this.config[i];console.log(n),e=this.game.userData.selectSkin[this.type],s=this.game.userData.skinGet[this.type],e===i?this.setBtnState(1):s.hasOwnProperty(i)?this.setBtnState(2):1===Number(n.type)?this.setBtnState(3):2===Number(n.type)?this.setBtnState(4):3===Number(n.type)&&this.setBtnState(5);var o=this.pageControl.getPageCount();this.leftBtn.node.active=!0,this.rightBtn.node.active=!0,0===t&&(this.leftBtn.node.active=!1),t===o-1&&(this.rightBtn.node.active=!1)},close:function(){this.game.audioMng.playSound("sound_books");var t=this;"theme"===t.type&&(t.game.gameUI.fishHome.switchCloseEvent(!0),t.game.gameUI.fishHome.setThemeNode=null,t.game.gameUI.fishHome.showAllBtn()),t.node.destroy()}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage"}],SetZIndex:[function(t,e,i){"use strict";cc._RF.push(e,"2932d7cw7NG64umtXQ+T5Lr","SetZIndex"),cc.Class({extends:cc.Component,properties:{zIndex:{default:0,notify:function(t){t!==this.zIndex&&(this.node.zIndex=this.zIndex)}}},onLoad:function(){this.node.zIndex=this.zIndex}}),cc._RF.pop()},{}],SkillItem:[function(t,e,i){"use strict";cc._RF.push(e,"fba76PzVNhIP6UPma9cK15U","SkillItem");var o=t("UserDataStorage"),s=t("ADUtils"),a=t("Utils");cc.Class({extends:cc.Component,properties:{ani:cc.Animation,opacityNode:cc.Node,icon:cc.Sprite,desTxt:cc.Label,effectTxt:cc.Label,costTxt:cc.Label,coinSpr:cc.Sprite,adSpr:cc.Sprite,btnNode:cc.Node,tipNode:cc.Node,tipTxt:cc.Label,block:cc.Node,type:1},onLoad:function(){},start:function(){},init:function(t){this.game=t;var e="";1===this.type?e=this.game.i18n.t("creelSize"):2===this.type?e=this.game.i18n.t("depth"):3===this.type&&(e=this.game.i18n.t("earnings")),this.desTxt.string=e,this.isAdUp=!1,this.costTxt.node.active=!0,this.adSpr.node.active=!1,this.block.active=!1,this.resetUI()},setAdUp:function(t){var e=this;if(this.isAdUp=t,this.coinSpr.node.active=!t,this.costTxt.node.active=!t,this.adSpr.node.active=t){this.block.active=!0;this.node.getComponent("MoveEffect").setActCallFunc(function(){e.adUpShow()})}else this.block.active=!1,this.node.getComponent("MoveEffect").setActCallFunc(null);this.checkState()},adUpShow:function(){var t=this;this.block.active=!0,this.adSpr.node.scale=.2;var e=cc.callFunc(function(){t.block.active=!1});this.adSpr.node.runAction(cc.sequence(cc.scaleTo(.2,1.5),cc.scaleTo(.6,1),e))},resetUI:function(){var t=this.type,e=this.game.userData.upgrade[this.type],i=Number(this.game.upgradeConfigList[this.type][e].effect);1===this.type?i+=" "+this.game.i18n.t("fish"):2===this.type?i+=" "+this.game.i18n.t("rice"):3===this.type&&(i="$ "+a.formatNumber(i)+"/"+this.game.i18n.t("minute"));var s=null;if(e<Object.getOwnPropertyNames(this.game.upgradeConfigList[t]).length){var n=Number(this.game.upgradeConfigList[t][e].cost);206===this.game.lotteryBuffID?n=Number(2*n):106===this.game.lotteryBuffID&&(n=Math.ceil(n/2)),s=""+a.formatNumber(n)}else s=this.game.i18n.t("max");this.effectTxt.string=i,this.costTxt.string=s,this.resetTip()},resetTip:function(){if(this.tipNode){var t=this.game.buffList[this.type];if(0<t){this.tipNode.active=!0;var e="+"+t;3===this.type&&(e+="%"),this.tipTxt.string=e}else this.tipNode.active=!1}},ActTipIfActive:function(){this.tipNode&&this.tipNode.active&&(this.tipNode.scale=.2,this.tipNode.runAction(cc.sequence(cc.scaleTo(.2,1.5),cc.scaleTo(.6,1))))},checkState:function(){var t=this.game.userData.upgrade[this.type],e=Number(this.game.upgradeConfigList[this.type][t].cost);206===this.game.lotteryBuffID?e=Number(2*e):106===this.game.lotteryBuffID&&(e=Math.ceil(e/2)),(e<=this.game.userData.coin||this.isAdUp)&&t<Object.getOwnPropertyNames(this.game.upgradeConfigList[this.type]).length?this.setState(!0):this.setState(!1)},setState:function(t){this.node.getComponent(cc.Button).interactable=t,this.opacityNode.opacity=t?255:150},clickUp:function(){this.isAdUp?this.ad():this.skillUp()},skillUp:function(t){var e=this.game.userData.upgrade[this.type],i=this.game.userData.coin,s=Object.getOwnPropertyNames(this.game.upgradeConfigList[this.type]).length,n=Number(this.game.upgradeConfigList[this.type][e].cost);206===this.game.lotteryBuffID?n=Number(2*n):106===this.game.lotteryBuffID&&(n=Math.ceil(n/2)),s<=e?console.log("已经是最高等级"):!t&&i<n?console.log("用户金币不足"):(o.updateUpgrade(this.type,e+1,!1),this.game.resetLotteryBuff("skill"),this.game.audioMng.playSound("sound_levelup"),t||this.game.setCoin(i-n),this.game.hook.resetHookData(),this.ani.play("flash"),this.setAdUp(!1),this.game.gameUI.ready.resetAllSkillUI(),cc.sys.isNative&&(1===this.type?trackEvent_2("Upgrades",String(e+1)):2===this.type?trackEvent_2("Upgrades1",String(e+1)):3===this.type&&trackEvent_2("Upgrades2",String(e+1))))},lotteryUp:function(){this.skillUp(!0)},ad:function(){var t=this;console.log("ad");s.showAD("AdsLvUp","3",function(){t.adFinish()},function(){t.setAdUp(!1)})},adFinish:function(){this.setState(!0),o.updateSkillAdInfoDay("current",this.game.userData.skillAdInfoDay.current+1,!0),this.isAdUp&&(this.isAdUp=!1),console.log("SkillItem 播放广告完成"),this.skillUp(!0)}}),cc._RF.pop()},{ADUtils:"ADUtils",UserDataStorage:"UserDataStorage",Utils:"Utils"}],SkinItem:[function(t,e,i){"use strict";cc._RF.push(e,"c83b0TwZixONLKLmbysDZlP","SkinItem");var s=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{skinEffectDesc:cc.Label,skinEffect:cc.Label,skinIcon:cc.Sprite,skinBtn:cc.Button,useTip:cc.Sprite,newTip:cc.Sprite,iconSize:cc.v2(100,100)},init:function(t,e,i){this.game=t,this.type=e,this.id=i,this.useTip.node.active=!1,this.setSkinShow(),this.setSkinData(),this.setSkinState(),this.setNotNew()},jelly:function(){this.node.getComponent("ActEffect").jelly(0)},setSkinShow:function(){var i=this;this.let=null,"boat"===this.type?this.res="boat/"+this.game.boatSkinConfigList[this.id].res:"hook"===this.type&&(this.res="hook/"+this.game.hookSkinConfigList[this.id].res),cc.loader.loadRes(this.res,function(t,e){t?cc.error("load hookskin img error:"+t):(cc.log("load hookskin img success"),i.skinIcon.spriteFrame=new cc.SpriteFrame(e))})},setSkinState:function(){var t=!1;if("boat"===this.type){var e=!1;this.game.userData.skinGet.boat.hasOwnProperty(this.id)?(this.skinIcon.srcBlendFactor=cc.macro.SRC_ALPHA,e=this.game.userData.skinGet.boat[this.id],this.skinIcon.node.opacity=255):(this.skinIcon.srcBlendFactor=cc.macro.ZERO,this.skinIcon.node.opacity=150),t=e}else if("hook"===this.type){var i=!1;this.game.userData.skinGet.hook.hasOwnProperty(this.id)?(this.skinIcon.srcBlendFactor=cc.macro.SRC_ALPHA,i=this.game.userData.skinGet.hook[this.id]):this.skinIcon.srcBlendFactor=cc.macro.ZERO,t=i}this.newTip.node.active=t},setSkinData:function(){var t=!1;"boat"===this.type?this.game.userData.skinGet.boat.hasOwnProperty(this.id)&&(t=!0):"hook"===this.type&&this.game.userData.skinGet.hook.hasOwnProperty(this.id)&&(t=!0);var e=cc.color(134,134,134),i=cc.color(0,191,0);if(t){this.skinData=null,"boat"===this.type?this.skinData=this.game.boatSkinConfigList[this.id]:"hook"===this.type&&(this.skinData=this.game.hookSkinConfigList[this.id]);var s="",n="";switch(this.skinData.toget.type){case 0:s=this.game.i18n.t("default"),this.skinEffect.node.color=e;break;case 1:n=this.game.i18n.t("SkinAdditional_1"),s=this.skinData.toget.effect,this.skinEffect.node.color=i;break;case 2:n=this.game.i18n.t("SkinAdditional_2"),s=this.skinData.toget.effect,this.skinEffect.node.color=i;break;case 3:n=this.game.i18n.t("SkinAdditional_3"),s=this.skinData.toget.effect+"%",this.skinEffect.node.color=i;break;case 4:n=this.game.i18n.t("SkinAdditional_4"),s=this.skinData.toget.effect+"%",this.skinEffect.node.color=i}this.skinEffectDesc.string=n,this.skinEffect.string=s,this.skinIcon.Sprite=this.skinData.res,this.skinBtn.interactable=!0}else this.skinEffectDesc.string="???",this.skinEffect.string="???",this.skinBtn.interactable=!1,this.skinEffect.node.color=i;this.isGet=t},setNotNew:function(){"boat"===this.type?this.game.userData.skinGet.boat[this.id]&&(this.game.userData.skinGet.boat[this.id]=!1):"hook"===this.type&&this.game.userData.skinGet.hook[this.id]&&(this.game.userData.skinGet.hook[this.id]=!1)},useSkin:function(){this.game.audioMng.playSound("sound_books"),this.game.gameUI.fishHome.skinNode.getComponent("SkinLayer").changeHookSkin(this.type,this.id),this.newTip.node.active=!1,s.UserData.selectSkin[this.type]=this.id,s.updateSelectSkin(this.type,this.id,!1),this.game.gameUI.ready.refreshSkillTip(),this.game.gameUI.ready.isSkillTipAct=!0},isUseState:function(t){this.useTip.node.active=t,this.isGet?this.skinBtn.interactable=!t:this.skinBtn.interactable=!1}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage"}],SkinLayer:[function(t,e,i){"use strict";cc._RF.push(e,"4c93eG2zvdG6ZHKIeRi38/p","SkinLayer");var n=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{skinItem:cc.Prefab,illustrationsTxt:cc.Label,boatScrollView:{default:null,type:cc.ScrollView},hookScrollView:{default:null,type:cc.ScrollView},boatBtn:cc.Button,hookBtn:cc.Button,spawnCount:8,spacingH:0,bufferZone:0},onLoad:function(){this.boatScrollView._onTouchMoved=this._onTouchMoved,this.hookScrollView._onTouchMoved=this._onTouchMoved},_onTouchMoved:function(t,e){var i=t.touch,s=cc.pSub(i.getLocation(),i.getStartLocation());if(this.enabledInHierarchy&&!this._hasNestedViewGroup(t,e)&&(this.content&&this._handleMoveLogic(i),this.cancelInnerEvents)){if(50<cc.pLength(s)&&!this._touchMoved&&t.target!==this.node){var n=new cc.Event.EventTouch(t.getTouches(),t.bubbles);n.type=cc.Node.EventType.TOUCH_CANCEL,n.touch=t.touch,n.simulate=!0,t.target.dispatchEvent(n),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(t)}},init:function(t){var e=this;this.game=t;this.node.getComponent("MoveEffect").setActCallFunc(function(){e.game.gameUI.removeLoadingLayer(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,e.onKeyDown,e)}),this.illustrationsTxt.string=this.game.i18n.t("dock"),this.boatItems=[],this.hookItems=[],this.items=[],this.initSkin("boat"),this.initSkin("hook"),this.pageType="boat",this.switchPage(null,this.pageType),this.setUseTipActive("boat"),this.setUseTipActive("hook"),this.updateTimer=0,this.updateInterval=.03,this.lastContentPosY=0},switchPage:function(t,e){var i=null;"boat"===e?(this.scrollView=this.boatScrollView,this.items=this.boatItems,i=this.game.boatSkinConfigList,this.boatScrollView.node.active=!0,this.hookScrollView.node.active=!1):(this.scrollView=this.hookScrollView,this.items=this.hookItems,i=this.game.hookSkinConfigList,this.boatScrollView.node.active=!1,this.hookScrollView.node.active=!0),this.totalCount=Object.getOwnPropertyNames(i).length,this.pageType=e,this.boatBtn.interactable="boat"!==e,this.hookBtn.interactable="boat"===e,this.content=this.scrollView.content,t&&this.game.audioMng.playSound("sound_books"),this.jellyAllItems()},jellyAllItems:function(){for(var t=0;t<this.items.length;t++){this.items[t].getComponent("SkinItem").jelly()}},initSkin:function(t){var e=null,i=null,s=null;"boat"===t?(e=this.boatScrollView.content,i=this.boatItems,s=this.game.boatSkinConfigList):(e=this.hookScrollView.content,i=this.hookItems,s=this.game.hookSkinConfigList);var n=Object.getOwnPropertyNames(s).length;n<=this.spawnCount&&(this.spawnCount=n),e.height=Math.ceil(n/2)*(this.skinItem.data.height+this.spacingH)+this.spacingH;for(var o=0;o<this.spawnCount;++o){var a=cc.instantiate(this.skinItem);e.addChild(a);var r=(cc.winSize.width-2*a.width)/3,h=0;h=o%2==0?-a.width/2-r/2:a.width/2+r/2,a.setPosition(h,-a.height*(.5+Math.floor(o/2))-this.spacingH*(Math.floor(o/2)+1));var c=o+1;a.getComponent("SkinItem").init(this.game,t,c),i.push(a)}},getPositionInView:function(t){var e=t.parent.convertToWorldSpaceAR(t.position);return this.scrollView.node.convertToNodeSpaceAR(e)},changeHookSkin:function(t,e){"boat"===t?this.game.boat.selectSkin(Number(e)):"hook"===t&&this.game.hook.selectSkin(Number(e)),this.setUseTipActive(t)},setUseTipActive:function(t){var e=null;"boat"===t?e=this.boatItems:"hook"===t&&(e=this.hookItems);for(var i=0;i<e.length;i++){var s=e[i].getComponent("SkinItem");n.UserData.selectSkin[t]===s.id?s.isUseState(!0):s.isUseState(!1)}},onKeyDown:function(t){switch(t.keyCode){case cc.KEY.back:cc.sys.os===cc.sys.OS_ANDROID&&this.close()}},close:function(){this.game.audioMng.playSound("sound_books"),this.game.gameUI.fishHome.switchRedIsShow(),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this);var t=this,e=function(){n.saveData(),t.game.gameUI.fishHome.switchCloseEvent(!0),t.game.gameUI.fishHome.skinNode=null,t.node.destroy()};this.node.getComponent("MoveEffect")&&this.node.getComponent("MoveEffect").enabled?this.node.getComponent("MoveEffect").reverseAct(e):e()},update:function(t){if(this.updateTimer+=t,!(this.updateTimer<this.updateInterval)){this.updateTimer=0;for(var e=this.items,i=this.bufferZone,s=this.scrollView.content.y<this.lastContentPosY,n=(this.skinItem.data.height+this.spacingH)*Math.floor(e.length/2),o=0;o<e.length;++o){var a=this.getPositionInView(e[o]);if(s){if(a.y<-i&&e[o].y+n<0){var r=e[o].getComponent("SkinItem"),h=r.id-e.length;if("boat"===this.pageType){if(!this.game.boatSkinConfigList.hasOwnProperty(h))continue}else if("hook"===this.pageType&&!this.game.hookSkinConfigList.hasOwnProperty(h))continue;e[o].setPositionY(e[o].y+n),r.init(this.game,this.pageType,h),this.setUseTipActive(this.pageType)}}else if(a.y>i&&e[o].y-n>-this.content.height){var c=e[o].getComponent("SkinItem"),l=c.id+e.length;if("boat"===this.pageType){if(!this.game.boatSkinConfigList.hasOwnProperty(l))continue}else if("hook"===this.pageType&&!this.game.hookSkinConfigList.hasOwnProperty(l))continue;e[o].setPositionY(e[o].y-n),c.init(this.game,this.pageType,l),this.setUseTipActive(this.pageType)}}this.lastContentPosY=this.scrollView.content.y}}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage"}],Spawn:[function(t,e,i){"use strict";cc._RF.push(e,"25e24qDWXtEVqQ6M41Qb2rA","Spawn");var s=t("Types").FishID,n=cc.Class({name:"Spawn",properties:{foeID:{type:s,default:s.Fish1},fishPre:cc.Prefab,size:10},ctor:function(){},init:function(t){this.game=t},spawn:function(t,e){var i=cc.instantiate(this.fishPre);return i?(i.getComponent("Fish").init(t,this.foeID),i):null}});e.exports=n,cc._RF.pop()},{Types:"Types"}],SpriteFrameSet:[function(t,e,i){"use strict";cc._RF.push(e,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var s=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});e.exports=s,cc._RF.pop()},{}],StoneMng:[function(t,e,i){"use strict";cc._RF.push(e,"9474fiWnvBHirc8gBVhmGCj","StoneMng");var s=t("Utils");cc.Class({extends:cc.Component,properties:{bottomStoneNode:cc.Node,bottomRate:.5,stoneLeftPrefab:cc.Prefab,stoneRightPrefab:cc.Prefab,seaBg:cc.Sprite,seaBgSprFrame:{default:[],type:cc.SpriteFrame}},onLoad:function(){},start:function(){this.initY=-50*F.PTM_RATIO-cc.winSize.height/2-this.seaBg.node.height,this.bottomY=-300*F.PTM_RATIO+cc.winSize.height/2,this.offsetY=this.initY-this.bottomY,this.offsetHookY=250*F.PTM_RATIO},init:function(t,e){this.game=t,this.stoneLeftPool=new cc.NodePool,this.stoneRightPool=new cc.NodePool;for(var i=0;i<e/2;++i){var s=cc.instantiate(this.stoneLeftPrefab);this.stoneLeftPool.put(s)}for(var n=0;n<e/2;++n){var o=cc.instantiate(this.stoneRightPrefab);this.stoneRightPool.put(o)}},createItem:function(t,e,i,s){var n=s,o=null,a=null;t?(o=this.stoneLeftPrefab,a=this.stoneLeftPool):(o=this.stoneRightPrefab,a=this.stoneRightPool);var r=i||cc.p(0,0),h=null;return(h=0<a.size()?a.get():cc.instantiate(o)).parent=e,h.position=r,h.getComponent("Stone").init(!n),h.isLeft=t,h},returnItem:function(t){t.isLeft?this.stoneLeftPool.put(t):this.stoneRightPool.put(t)},returnAllItem:function(t){for(var e=t.length-1;0<=e;e--){var i=t[e];this.returnItem(i),t.splice(e,1)}},randomSeaBg:function(){this.seaBgType=s.randomNumBoth(1,3),console.log("重设海底背景类型为:"+this.seaBgType),this.seaBg.spriteFrame=this.seaBgSprFrame[this.seaBgType-1],this.seaBg.node.getComponent(cc.Animation).enabled=3===this.seaBgType,this.seaBg.node.getComponent("moveNode").enabled=3===this.seaBgType,this.seaBg.node.x=s.getRandomRate(-360,360)},setBottomOffset:function(){this.game.gameUI.battle.isBossMode||(this.bottomStoneNode.y=this.game.hook.node.y*this.bottomRate)},setseaBgOffset:function(){if(!this.game.gameUI.battle.isBossMode){var t=this.game.hook.getHookDownM(),e=this.game.hook.getLimitY();-50<e?this.seaBg.node.y=1e4:-300<e||3===this.seaBg.nodeType?this.seaBg.node.y=this.game.hook.node.y+(-cc.winSize.height/2-this.seaBg.node.height)+this.seaBg.node.height*((Math.abs(t)-50)/250):this.seaBg.node.y=this.game.hook.node.y+(-cc.winSize.height/2-this.seaBg.node.height)+this.seaBg.node.height*((Math.abs(t)-50)/(Math.abs(e)-50))}},lateUpdate:function(t){this.game&&(this.setBottomOffset(),this.setseaBgOffset())}}),cc._RF.pop()},{Utils:"Utils"}],Stone:[function(t,e,i){"use strict";cc._RF.push(e,"0dff3N8UglEZpwGESD7UxFW","Stone");var s=t("Utils");cc.Class({extends:cc.Component,properties:{stoneSkins:{default:[],type:cc.SpriteFrame},botanySkins:{default:[],type:cc.SpriteFrame},stone:cc.Sprite,botany:cc.Sprite},onLoad:function(){},init:function(t){this.botany.node.active=t;var e=s.randomNumBoth(0,this.stoneSkins.length-1);this.stone.spriteFrame=this.stoneSkins[e];var i=s.randomNumBoth(0,this.botanySkins.length-1);this.botany.spriteFrame=this.botanySkins[i]},start:function(){}}),cc._RF.pop()},{Utils:"Utils"}],TankFishShowItem:[function(t,e,i){"use strict";cc._RF.push(e,"3c2c4fSMSRC35jdqmcSYbbd","TankFishShowItem");var s=t("Utils"),n=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{fishBookBgList:{default:[],type:cc.SpriteFrame},redDot:cc.Node,fishBg:cc.Sprite,fishIcon:cc.Sprite,TipNode:cc.Node,tipSp:cc.Sprite,btnBuildFish:cc.Button,block:cc.Node,countTxt:cc.Label,iconSize:cc.v2(100,100)},onLoad:function(){},start:function(){},init:function(t,e,i,s){this.game=t,this.type=e,this.id=Number(i),this.index=Number(s),this.tankFishShow=this.game.gameUI.fishHome.tankFishShowNode.getComponent("TankFishShow"),this.resetI18nTxt();var n=this.id<1e3;this.isShowFish=n,this.setFishShow(n),this.checkRedDotHide(),this.node.scale=1},resetCount:function(){if(1e3<=this.id)this.countTxt.string="";else{var t=0,e=this.game.gameUI.fishHome.fishTank;e&&e.tankShowFishObj.hasOwnProperty(this.id)&&(t=e.tankShowFishObj[this.id]),this.countTxt.string=String(t)}},jelly:function(){this.node.getComponent("ActEffect").jelly(0)},setRedDotActive:function(t){this.redDot.active=t},checkRedDotHide:function(){this.game.userData.fishShow[this.type].hasOwnProperty(this.id)||!this.isShowFish?this.setRedDotActive(!1):this.setRedDotActive(!0)},resetI18nTxt:function(){},setBtnCanClick:function(t){!1===(this.btnBuildFish.interactable=t)?(this.fishIcon._sgNode.setState(1),this.fishBg._sgNode.setState(1),this.tipSp._sgNode.setState(1)):(this.fishIcon._sgNode.setState(0),this.fishBg._sgNode.setState(0),this.tipSp._sgNode.setState(0))},setFishShow:function(t){var o=this;if(t){o.block.active=!1,o.TipNode.active=!1,o.fishIcon.node.active=!0;var e="fish/"+this.game.fishConfigTable.config[this.id].res;cc.loader.loadRes(e,function(t,e){if(t)cc.error("load img error:"+t);else{cc.log("load img success"),o.fishIcon.spriteFrame=new cc.SpriteFrame(e);var i=o.fishIcon.spriteFrame.getOriginalSize(),s=o.iconSize.x/i.width,n=o.iconSize.y/i.height;o.fishIcon.node.scale=Math.min(s,n)}})}else o.block.active=!0,o.TipNode.active=!0,o.fishIcon.node.active=!1},joinFish:function(){n.fishShowList(this.type,this.id,!0),this.tankFishShow.tankJoinFish(this.id),this.checkRedDotHide()},setFishData:function(){this.backgroud.spriteFrame=this.fishBookBgList[1];var t=this.game.fishConfigTable.config[this.id],e=window.i18n.curLang;this.fishName.string=t.nameList[e],this.fishCoin.string=""+s.formatNumber(Number(t.gold)),this.fishInfo.string=t.info,this.node.getComponent(cc.Button).interactable=!0}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage",Utils:"Utils"}],TankFishShow:[function(t,e,i){"use strict";cc._RF.push(e,"6907cIRXK1PTJzdKa4KTiGE","TankFishShow");var s=t("UserDataStorage"),g=t("Utils");cc.Class({extends:cc.Component,properties:{tankFishShowItem:cc.Prefab,commonScrollView:{default:null,type:cc.ScrollView},commonTipNode:cc.Node,rareScrollView:{default:null,type:cc.ScrollView},rareTipNode:cc.Node,btn_clear:cc.Button,btn_clearLabel:cc.Label,btn_reset:cc.Button,btn_resetLabel:cc.Label,btn_finish:cc.Button,btn_finishLabel:cc.Label,bottomBtnsNode:cc.Node,commonBtn:cc.Toggle,rareBtn:cc.Toggle,commonRedDot:cc.Node,rareRedDot:cc.Node,spawnCount:8,spacingW:0,bufferZone:0},init:function(t){var e=this;this.game=t,this.setShow(!1,!1),this.fishTank=this.game.gameUI.fishHome.fishTank.getComponent("FishTank");this.node.getComponent("MoveEffect").setActCallFunc(function(){e.game.gameUI.removeLoadingLayer()}),this.resetI18nTxt(),this.commonItems=[],this.rareItems=[],this.items=[],this.initialize("common"),this.initialize("rare"),this.pageType="rare",this.checkRedDotHide(),this.pageType="common",this.checkRedDotHide(),this.switchPage(null,this.pageType),this.fishTank.checkFishCount(),this.checkRedDotHide(),this.lastContentPosX=0},resetI18nTxt:function(){this.btn_clearLabel.string=this.game.i18n.t("clear"),this.btn_resetLabel.string=this.game.i18n.t("reset"),!1===this.isClick?this.btn_finishLabel.string=this.game.i18n.t("close"):!0===this.isClick&&(this.btn_finishLabel.string=this.game.i18n.t("finish"))},switchPage:function(t,e){var i=null;"common"===e?(this.scrollView=this.commonScrollView,this.items=this.commonItems,i=this.game.userData.fishGet.common,this.commonScrollView.node.active=!0,this.rareScrollView.node.active=!1):(this.scrollView=this.rareScrollView,this.items=this.rareItems,i=this.game.userData.fishGet.rare,this.commonScrollView.node.active=!1,this.rareScrollView.node.active=!0),this.totalCount=Object.getOwnPropertyNames(i).length,this.configList=g.deepClone(i);var s=0;for(var n in this.configList)this.configList.hasOwnProperty(n)&&(this.configList[n]=s,s++);this.pageType=e,this.commonBtn.interactable="common"!==e,this.rareBtn.interactable="common"===e,this.content=this.scrollView.content,t&&this.game.audioMng.playSound("sound_books"),this.fishTank.checkFishCount()},setGray:function(){for(var t=0;t<this.items.length;t++){this.items[t].getComponent("TankFishShowItem").setBtnCanClick(!1)}},cancelGray:function(){for(var t=0;t<this.items.length;t++){this.items[t].getComponent("TankFishShowItem").setBtnCanClick(!0)}},setGrayById:function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(t===i.getComponent("TankFishShowItem").id){i.getComponent("TankFishShowItem").setBtnCanClick(!1);break}}},cancelGrayById:function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(t===i.getComponent("TankFishShowItem").id){i.getComponent("TankFishShowItem").setBtnCanClick(!0);break}}},resetItemCount:function(){for(var t=0;t<this.items.length;t++){this.items[t].getComponent("TankFishShowItem").resetCount()}},initialize:function(t){var e=null,i=null,s=null;"common"===t?(e=this.commonScrollView.content,i=this.commonItems,s=this.game.userData.fishGet.common):(e=this.rareScrollView.content,i=this.rareItems,s=this.game.userData.fishGet.rare);var n=Object.getOwnPropertyNames(s).length;n<=this.spawnCount&&(this.spawnCount=n),this.configList=g.deepClone(s);var o=4-n;if(0<o)for(var a=0;a<o;a++)this.configList[1e3+a]=!0;n=n<4?4:n,e.width=n*(this.tankFishShowItem.data.width+this.spacingW)+this.spacingW;var r=0;for(var h in this.configList)if(this.configList.hasOwnProperty(h)){var c=h;this.configList[h]=r;var l=cc.instantiate(this.tankFishShowItem);e.addChild(l);var d=l.width/2+this.spacingW+r*(l.width+this.spacingW);l.setPosition(d,0);var u=c;l.getComponent("TankFishShowItem").init(this.game,t,u,r),i.push(l),r++}},fishObjectToArray:function(t){var e=[];for(var i in t)e.push(Number(i));return e},getPositionInView:function(t){var e=t.parent.convertToWorldSpaceAR(t.position);return this.scrollView.node.convertToNodeSpaceAR(e)},close:function(){this.game.audioMng.playSound("sound_books");var t=this,e=function(){s.saveData(),t.game.gameUI.fishHome.switchCloseEvent(!0),t.game.gameUI.fishHome.tankFishShowNode=null,t.game.gameUI.fishHome.showAllBtn(),t.node.destroy()};this.node.getComponent("MoveEffect")&&this.node.getComponent("MoveEffect").enabled?this.node.getComponent("MoveEffect").reverseAct(e):e()},start:function(){},setShow:function(t,e){var i=this;if(e&&this.isClick!==t){this.setBottomBtnsEnable(!1);var s=cc.callFunc(function(){i.btn_clear.node.active=!t,i.btn_reset.node.active=t,i.setBottomBtnsEnable(!0),i.resetI18nTxt()});this.bottomBtnsNode.runAction(cc.sequence(cc.moveBy(.4,cc.p(0,-100)),s,cc.moveBy(.4,cc.p(0,100))))}else i.btn_clear.node.active=!t,i.btn_reset.node.active=t,i.resetI18nTxt();this.isClick=t},setBottomBtnsEnable:function(t){this.btn_clear.interactable=t,this.btn_reset.interactable=t,this.btn_finish.interactable=t},setRedDotActive:function(t,e){"common"===e?this.commonRedDot.active=t:"rare"===e&&(this.rareRedDot.active=t)},checkRedDotHide:function(){var t=this.game.userData.fishShow.common,e=this.game.userData.fishShow.rare,i=this.game.userData.fishGet.common,s=this.game.userData.fishGet.rare;"common"===this.pageType?Object.getOwnPropertyNames(t).length<Object.getOwnPropertyNames(i).length?this.setRedDotActive(!0,"common"):this.setRedDotActive(!1,"common"):"rare"===this.pageType&&(Object.getOwnPropertyNames(e).length<Object.getOwnPropertyNames(s).length?this.setRedDotActive(!0,"rare"):this.setRedDotActive(!1,"rare"))},tankJoinFish:function(t){this.game.gameUI.fishHome.fishTank.getComponent("FishTank").joinFishTemp(t),this.setShow(!0,!0),this.fishTank.checkFishCount(),this.checkRedDotHide()},clear:function(){this.fishTank.returnAllFish(),this.fishTank.checkFishCount(),this.setShow(!0,!0)},reset:function(){this.clear(),this.fishTank.resetShowFishData(),this.fishTank.checkFishCount(),this.setShow(!1,!0)},finish:function(){this.fishTank.saveShowFishData(),this.fishTank.checkFishCount(),this.setShow(!1,!1),this.game.gameUI.fishHome.switchTankRedDot(),this.close()},update:function(t){for(var e=this.items,i=this.bufferZone,s=this.scrollView.content.x<this.lastContentPosX,n=(this.tankFishShowItem.data.width+this.spacingW)*e.length,o=0;o<e.length;++o){var a=this.getPositionInView(e[o]);if(s){if(a.x<-i){var r=e[o].getComponent("TankFishShowItem"),h=Object.getOwnPropertyNames(this.configList).length;if(r.index+e.length>=h)continue;var c=g.findKey(this.configList,r.index+e.length);e[o].setPositionX(e[o].x+n),r.init(this.game,this.pageType,c),this.fishTank.checkFishCount()}}else if(a.x>i){var l=e[o].getComponent("TankFishShowItem");if(l.index-e.length<0)continue;var d=g.findKey(this.configList,l.index-e.length);e[o].setPositionX(e[o].x-n),l.init(this.game,this.pageType,d),this.fishTank.checkFishCount()}}this.lastContentPosX=this.scrollView.content.x}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage",Utils:"Utils"}],ThemeAndPetItem:[function(t,e,i){"use strict";cc._RF.push(e,"7aedaGKRcBHOb6po7Vk+j47","ThemeAndPetItem");var n=t("Utils");cc.Class({extends:cc.Component,properties:{bottomIcon:cc.Sprite,petSp:sp.Skeleton,coinNode:cc.Node,coinTxt:cc.Label},init:function(t,e,i,s){this.game=t,this.id=s,"pet"===e?(this.type="pet",this.petSp.node.active=!0):(this.type="theme",this.petSp.node.active=!1),this.data=i,this.getType=this.data.type,1===this.getType?(this.coinNode.active=!0,this.coinTxt.string=n.formatNumber(Number(this.data.gold))):this.coinNode.active=!1,this.game.userData.skinGet[this.type].hasOwnProperty(s)&&(this.coinNode.active=!1),this.petAniTime=300,this.showIcon()},showIcon:function(){var i=this,t="",e="";"pet"===this.type?(t+="pet/pet_bg_"+this.id,e="pet/role_Pet_"+this.id+"_DH/role_Pet_"+this.id):t+="theme/"+this.data.res,cc.loader.loadRes(t,function(t,e){t?cc.error("load img error:"+t):(cc.log("load img success"),i.bottomIcon.spriteFrame=new cc.SpriteFrame(e))}),"pet"===this.type&&cc.loader.loadRes(e,sp.SkeletonData,function(t,e){t?(cc.error("load petSkin error:"+t),cc.log("pet加载图片错误")):(cc.log("load petSkin success"),i.petSp.skeletonData=e,5===i.id?i.petSp.node.scale=.67:i.petSp.node.scale=1.5,i.petSp.setAnimation(0,"role_wait",!0))})},petShowAni:function(){this.petSp.setAnimation(0,"role_show1",!1),this.petSp.addAnimation(0,"role_wait",!0,0)},start:function(){},update:function(t){"pet"===this.type&&(this.petAniTime--,this.petAniTime<=0&&(this.petShowAni(),this.petAniTime=300))}}),cc._RF.pop()},{Utils:"Utils"}],Types:[function(t,e,i){"use strict";cc._RF.push(e,"3252ewbzZdHnq1gBLGMITeH","Types");var s=cc.Enum({Ready:-1,Down:-1,Fishing:-1,Up:-1,Over:-1}),n=cc.Enum({Fish1:1,Fish2:-1,Fish3:-1,Fish4:-1,Fish5:-1,Fish6:-1,Fish7:-1,Fish8:-1,Fish9:-1,Fish10:-1,Fish11:-1,Fish12:-1,Fish13:-1,Fish14:-1,Fish15:-1,Fish16:-1,Fish17:-1,Fish18:-1,Fish19:-1,Fish20:-1,Fish21:-1,Fish22:-1,Fish23:-1,Fish24:-1,Fish25:-1,Fish26:-1,Fish27:-1,Fish28:-1,Fish29:-1,Fish30:-1,Fish31:-1,Fish32:-1,Fish33:-1,Fish34:-1,Fish35:-1,Fish36:-1,Fish37:-1,Fish38:-1,Fish101:101,Fish102:-1,Fish103:-1,Fish104:-1,Fish105:-1,Fish106:-1,Fish107:-1,Fish108:-1,Fish109:-1,Fish110:-1,Fish111:-1,Fish112:-1,Fish113:-1,Fish114:-1,Fish115:-1,Fish116:-1,Fish117:-1,Fish118:-1,Fish119:-1,Fish120:-1,Fish121:-1,Fish122:-1,Fish123:-1,Fish124:-1,Fish125:-1,Fish126:-1,Fish127:-1,Fish128:-1,Fish129:-1,Fish130:-1,Fish131:-1,Fish132:-1,Fish133:-1,Fish134:-1,Fish135:-1,Fish136:-1,Fish137:-1,Fish138:-1,Fish201:201,Fish202:-1,Fish203:-1,Fish204:-1,Fish205:-1,Fish206:-1,Fish207:-1,Fish208:-1,Fish209:-1,Fish210:-1,Fish211:-1,Fish212:-1,Fish213:-1,Fish214:-1,Fish215:-1,Fish216:-1,Fish217:-1,Fish218:-1,Fish219:-1,Fish301:301,Fish302:-1,Fish303:-1,Fish304:-1,Fish305:-1,Fish401:401}),o=cc.Enum({Log_totalCount:-1,Log_fishCount:-1,Log_totalDistance:-1,Log_totalCoin:-1,Log_highestReward:-1,Log_getSpecialFishCount:-1,Log_upgradeCount:-1,Log_getRareFishCount:-1,Log_fishTime:-1});e.exports={GameState:s,FishID:n,LogType:o},cc._RF.pop()},{}],UserDataStorage:[function(t,e,i){"use strict";cc._RF.push(e,"2bd78d2kwVDzZL9COmEeX7H","UserDataStorage");var s=t("Utils"),n={UserData:{newPlayer:!0,coin:100,isNoAds:!1,upgrade:{1:1,2:1,3:1},lastPlayTimeStamp:0,volume:{music:1,sound:1},soundSwitch:!0,fishData:{totalCount:0,fishCount:0,totalCoin:0,highestReward:0,specialFishCount:0,specialFishCountOnce:0,getAllCoin:0},totalDistance:0,upgradeCount:0,fishTime:0,fishGet:{common:{},special:{},rare:{}},fishShow:{common:{},special:{},rare:{}},tankShowFish:{},skinGet:{boat:{1:!1},hook:{1:!1},theme:{1:!1},pet:{}},watchAdCount:0,selectSkin:{boat:1,hook:1,theme:1,pet:0},achievement:{},guide:{tank:!1,rating:!1,crazy:!1,lottery:!1,bossMode:!1,upgrade:!1,achievement:!1},clickHomeCount:0,skillAdInfoDay:{max:15,current:0},shareCount:0},init:function(){var e=this.UserData,i=cc.sys.localStorage.getItem("userData");console.log("itemUserData:  "+i);try{if(null==i||""===i){var t=JSON.stringify(e);cc.sys.localStorage.setItem("userData",t)}else{var s=JSON.parse(i);console.log(s);var n=!1;for(var o in e)if(void 0!==s[o])if(s[o]instanceof Object)for(var a in s[o]){void 0!==s[o][a]&&(this.UserData[o][a]=s[o][a])}else this.UserData[o]=s[o];else n=!0;n&&this.saveData()}}catch(t){if(console.log(t),cc.sys.isNative){trackEvent_2("localStorageErr",String(t.message));var r=[];if(i.length<256)r[0]=i;else{var h=/.{256}/g;(r=i.match(h)).push(i.substring(r.join("").length))}for(var c=0;c<r.length;c++){var l=r[c];trackEvent_2("localStorageErrData"+c,String(l))}}var d=JSON.stringify(e);cc.sys.localStorage.setItem("userData",d)}},saveData:function(){var t=JSON.stringify(this.UserData);cc.sys.localStorage.setItem("userData",t)},updateNewPlayer:function(t,e){this.UserData.newPlayer=t,e||this.saveData()},updateCoin:function(t,e){this.UserData.coin=t,e||this.saveData()},updateIsNoAds:function(t,e){this.UserData.isNoAds=t,e||this.saveData()},updateUpgrade:function(t,e,i){this.UserData.upgrade[t]=e,this.UserData.upgradeCount++,i||this.saveData()},updateLastPlayTimeStamp:function(t,e){t<=this.UserData.lastPlayTimeStamp||(this.UserData.lastPlayTimeStamp=t,e||this.saveData())},updateVolume:function(t,e,i){this.UserData.volume[t]=e,i||this.saveData()},updateSoundSwitch:function(t,e){this.UserData.soundSwitch=t,e||this.saveData()},updateFishData:function(t,e,i){this.UserData.fishData[t]=e,cc.sys.isNative&&"getAllCoin"===t&&uploadScore("leaderboardRevenue",Number(this.UserData.fishData[t])),i||this.saveData()},updateTotalDistance:function(t,e){this.UserData.totalDistance=t,e||this.saveData()},updateFishTime:function(t,e){this.UserData.fishTime=t,e||this.saveData()},getFishList:function(t,e,i){for(var s=0;s<e.length;s++){var n=e[s];this.UserData.fishGet[t].hasOwnProperty(n)||(this.UserData.fishGet[t][n]=!0)}i||this.saveData()},fishShowList:function(t,e,i){this.UserData.fishShow[t].hasOwnProperty(e)||(this.UserData.fishShow[t][e]=!0),i||this.saveData()},updateTankShowFish:function(t,e){this.UserData.tankShowFish=s.deepClone(t),e||this.saveData()},getSkinList:function(t,e,i){this.UserData.skinGet[t].hasOwnProperty(e)||(this.UserData.skinGet[t][e]=!0),i||this.saveData()},updateWatchAdCount:function(t,e){this.UserData.watchAdCount=t,e||this.saveData()},updateSelectSkin:function(t,e,i){this.UserData.selectSkin.hasOwnProperty(t)&&(this.UserData.selectSkin[t]=e,i||this.saveData())},updateAchievement:function(t,e,i){this.UserData.achievement[t]=e,i||this.saveData()},updateGuide:function(t,e){this.UserData.guide[t]=!0,e||this.saveData()},updateClickHomeCount:function(t,e){this.UserData.clickHomeCount=t,e||this.saveData()},updateSkillAdInfoDay:function(t,e,i){this.UserData.skillAdInfoDay[t]=e,i||this.saveData()},updateShareCount:function(t,e){this.UserData.shareCount=t,console.log("shareCount:"+t),e||this.saveData()}};e.exports=n,cc._RF.pop()},{Utils:"Utils"}],Utils:[function(t,e,i){"use strict";cc._RF.push(e,"34f64SWrV9G5JL1L1J4o1hu","Utils");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1},Array.prototype.remove=function(t){var e=this.indexOf(t);-1<e&&this.splice(e,1)},Array.prototype.toObject=function(i){var s={};return this.forEach(function(t,e){s[t[i]]=t}),s},String.prototype.format=function(){if(0==arguments.length)return this;var t=arguments[0],e=this;if("object"===(void 0===t?"undefined":n(t))){for(var i in t)e=e.replace(new RegExp("\\{"+i+"\\}","g"),t[i]);return e}for(var s=0;s<arguments.length;s++)e=e.replace(new RegExp("\\{"+s+"\\}","g"),arguments[s]);return e};var o={debugLog:function(t){console.log(t)},deepClone:function(t){if(!t|!(t instanceof Object)|"function"==typeof t)return t||void 0;var e=new t.constructor;for(var i in t)t.hasOwnProperty(i)&&(e[i]=this.deepClone(t[i]));return e},distance2Point:function(t,e){return Math.sqrt(Math.abs((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)))},angle2Point:function(t,e){var i=t.x,s=t.y,n=e.x,o=e.y,a=Math.abs(i-n),r=Math.abs(s-o),h=r/Math.sqrt(Math.pow(a,2)+Math.pow(r,2)),c=Math.acos(h);return 180/(Math.PI/c)},randomNumBoth:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},getRandomRate:function(t,e){return Math.random()*(e-t)+t},getRandomFromArray:function(t,e){for(var i=[];i.length<e;){var s=Math.random()*t.length;i.push(t.splice(s,1)[0])}return i},getResultByWeight:function(t){var e=null,i={},s=0;for(var n in t){var o=t[n];0<o.weight&&(s+=o.weight,i[n]=s)}var a=this.randomNumBoth(0,s);for(var n in i){var r=i[n];if(e=t[n],a<=r)break}return e},getTimeStamp:function(t){var e,i=new Date,s=i.getTime(),n=6e4*i.getTimezoneOffset(),o=(new Date).getTimezoneOffset()/60;return e=0<o?s-n:s+n,Math.floor((e+36e5*Math.abs(o))/1e3)+60*t},Time2ZoneOffset:function(t){var e,i=1e3*t,s=6e4*(new Date).getTimezoneOffset(),n=(new Date).getTimezoneOffset()/60;return e=0<n?i-s:i+s,Math.floor((e+36e5*Math.abs(n))/1e3)},getDateByStamp:function(t){var e=new Date(1e3*t),i=e.getFullYear(),s=e.getMonth()+1,n=e.getDate(),o=[];return o[0]=i,o[1]=s,o[2]=n,o},getDateByStampMss:function(t){return[parseInt(t%864e5/36e5),parseInt(t%36e5/6e4),t%6e4/1e3]},isDayNewGame:function(t){var e=o.getTimeStamp(0);if(e<t)return!1;var i=o.getDateByStamp(e),s=o.getDateByStamp(t);return s[0]<i[0]||(s[1]<i[1]||s[2]<i[2])},getTheta:function(t){return Math.atan2(t.x,t.y)*(180/Math.PI)},layerOpenTransition:function(t){t.scale=0;var e=cc.scaleTo(.3,1).easing(cc.easeBackOut());t.runAction(e)},formatNumber:function(t){return t.toString().replace(/\d+/,function(t){return t.replace(/(\d)(?=(\d{3})+$)/g,function(t){return t+","})})},insertItem:function(t,e,i){var s="";return s+=t.substring(0,i)+e+t.substring(i,t.length)},findKey:function(e,i){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(t,e){return t===e};return Object.keys(e).find(function(t){return s(e[t],i)})}};e.exports=o,cc._RF.pop()},{}],WhitePointMng:[function(t,e,i){"use strict";cc._RF.push(e,"def79ihZ9lC57TGnINqsGsG","WhitePointMng"),cc.Class({extends:cc.Component,properties:{whitePoint:cc.Prefab,updateInterval:1,maxCount:8},onLoad:function(){this.time=0},start:function(){},createWhitePoint:function(){var t=cc.instantiate(this.whitePoint);this.node.addChild(t);var e=cc.v2(this.node.width,this.node.height-2*t.height),i=(Math.random()-.5)*e.x,s=(Math.random()-.5)*e.y;t.position=cc.p(i,s)},update:function(t){this.time+=t,this.time<this.updateInterval||(this.time=0,this.createWhitePoint())}}),cc._RF.pop()},{}],WhitePoint:[function(t,e,i){"use strict";cc._RF.push(e,"0bd1fqJeQVBtJLk86Teuhym","WhitePoint"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this,e=cc.callFunc(function(){t.node.removeFromParent(),t.node.destroy()});this.node.runAction(cc.sequence(cc.fadeOut(Math.random()+1),e))},start:function(){}}),cc._RF.pop()},{}],algo:[function(t,e,i){"use strict";cc._RF.push(e,"6dd31vOKz5GxqMimAD48/W+","algo");var h={cipher:function(t,e){for(var i=e.length/4-1,s=[[],[],[],[]],n=0;n<16;n++)s[n%4][Math.floor(n/4)]=t[n];s=h.addRoundKey(s,e,0,4);for(var o=1;o<i;o++)s=h.subBytes(s,4),s=h.shiftRows(s,4),s=h.mixColumns(s,4),s=h.addRoundKey(s,e,o,4);s=h.subBytes(s,4),s=h.shiftRows(s,4),s=h.addRoundKey(s,e,i,4);var a=new Array(16);for(n=0;n<16;n++)a[n]=s[n%4][Math.floor(n/4)];return a},keyExpansion:function(t){for(var e=t.length/4,i=e+6,s=new Array(4*(i+1)),n=new Array(4),o=0;o<e;o++){var a=[t[4*o],t[4*o+1],t[4*o+2],t[4*o+3]];s[o]=a}for(o=e;o<4*(i+1);o++){s[o]=new Array(4);for(var r=0;r<4;r++)n[r]=s[o-1][r];if(o%e==0){n=h.subWord(h.rotWord(n));for(r=0;r<4;r++)n[r]^=h.rCon[o/e][r]}else 6<e&&o%e==4&&(n=h.subWord(n));for(r=0;r<4;r++)s[o][r]=s[o-e][r]^n[r]}return s},subBytes:function(t,e){for(var i=0;i<4;i++)for(var s=0;s<e;s++)t[i][s]=h.sBox[t[i][s]];return t},shiftRows:function(t,e){for(var i=new Array(4),s=1;s<4;s++){for(var n=0;n<4;n++)i[n]=t[s][(n+s)%e];for(n=0;n<4;n++)t[s][n]=i[n]}return t},mixColumns:function(t,e){for(var i=0;i<4;i++){for(var s=new Array(4),n=new Array(4),o=0;o<4;o++)s[o]=t[o][i],n[o]=128&t[o][i]?t[o][i]<<1^283:t[o][i]<<1;t[0][i]=n[0]^s[1]^n[1]^s[2]^s[3],t[1][i]=s[0]^n[1]^s[2]^n[2]^s[3],t[2][i]=s[0]^s[1]^n[2]^s[3]^n[3],t[3][i]=s[0]^n[0]^s[1]^s[2]^n[3]}return t},addRoundKey:function(t,e,i,s){for(var n=0;n<4;n++)for(var o=0;o<s;o++)t[n][o]^=e[4*i+o][n];return t},subWord:function(t){for(var e=0;e<4;e++)t[e]=h.sBox[t[e]];return t},rotWord:function(t){for(var e=t[0],i=0;i<3;i++)t[i]=t[i+1];return t[3]=e,t},sBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],rCon:[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]]};void 0!==e&&e.exports&&(e.exports=h),"function"==typeof define&&define.amd&&define([],function(){return h}),cc._RF.pop()},{}],coinShow:[function(t,e,i){"use strict";cc._RF.push(e,"f3700M/WUxC/axD0LLeP+/7","coinShow");var s=t("Utils");cc.Class({extends:cc.Component,properties:{txt_coin:cc.Label,txt_type:cc.Label},setCoinTxt:function(t,e){var i="$"+s.formatNumber(t);this.txt_coin.string=i,this.txt_type.string=e},start:function(){}}),cc._RF.pop()},{Utils:"Utils"}],encryptjs:[function(e,i,s){(function(t){"use strict";cc._RF.push(i,"c2b1aS3o8hEzJohHYUOjCaZ","encryptjs");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(t,e){void 0!==s&&void 0!==i?i.exports=e():"function"==typeof define&&"object"===o(define.amd)?define(e):"function"==typeof define&&"object"===o(define.petal)?define("encryptjs",[],e):this.encryptjs=e()})(0,function(C){if(C={version:"1.0.0",init:function(){console.log("--------------------Applying Encryption Algorithm------------------ ")}},void 0!==i&&i.exports)var k=e("./algo");C.encrypt=function(t,e,i){if(128!=i&&192!=i&&256!=i)return"";t=String(t).utf8Encode(),e=String(e).utf8Encode();for(var s=i/8,n=new Array(s),o=0;o<s;o++)n[o]=isNaN(e.charCodeAt(o))?0:e.charCodeAt(o);var a=k.cipher(n,k.keyExpansion(n));a=a.concat(a.slice(0,s-16));var r=new Array(16),h=(new Date).getTime(),c=h%1e3,l=Math.floor(h/1e3),d=Math.floor(65535*Math.random());for(o=0;o<2;o++)r[o]=c>>>8*o&255;for(o=0;o<2;o++)r[o+2]=d>>>8*o&255;for(o=0;o<4;o++)r[o+4]=l>>>8*o&255;var u="";for(o=0;o<8;o++)u+=String.fromCharCode(r[o]);for(var g=k.keyExpansion(a),p=Math.ceil(t.length/16),f=new Array(p),m=0;m<p;m++){for(var v=0;v<4;v++)r[15-v]=m>>>8*v&255;for(v=0;v<4;v++)r[15-v-4]=m/4294967296>>>8*v;var y=k.cipher(r,g),S=m<p-1?16:(t.length-1)%16+1,w=new Array(S);for(o=0;o<S;o++)w[o]=y[o]^t.charCodeAt(16*m+o),w[o]=String.fromCharCode(w[o]);f[m]=w.join("")}var b=u+f.join("");return b=C.base64Encode(b)},C.decrypt=function(t,e,i){if(128!=i&&192!=i&&256!=i)return"";t=C.base64Decode(String(t)),e=String(e).utf8Encode();for(var s=i/8,n=new Array(s),o=0;o<s;o++)n[o]=isNaN(e.charCodeAt(o))?0:e.charCodeAt(o);var a=k.cipher(n,k.keyExpansion(n));a=a.concat(a.slice(0,s-16));var r=new Array(8),h=t.slice(0,8);for(o=0;o<8;o++)r[o]=h.charCodeAt(o);for(var c=k.keyExpansion(a),l=Math.ceil((t.length-8)/16),d=new Array(l),u=0;u<l;u++)d[u]=t.slice(8+16*u,8+16*u+16);t=d;var g=new Array(t.length);for(u=0;u<l;u++){for(var p=0;p<4;p++)r[15-p]=u>>>8*p&255;for(p=0;p<4;p++)r[15-p-4]=(u+1)/4294967296-1>>>8*p&255;var f=k.cipher(r,c),m=new Array(t[u].length);for(o=0;o<t[u].length;o++)m[o]=f[o]^t[u].charCodeAt(o),m[o]=String.fromCharCode(m[o]);g[u]=m.join("")}var v=g.join("");return v=v.utf8Decode()};var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return C.base64Encode=function(t){var e,i,s,n,o,a,r,h="",c=0;for(t=C._utf8_encode(t);c<t.length;)n=(e=t.charCodeAt(c++))>>2,o=(3&e)<<4|(i=t.charCodeAt(c++))>>4,a=(15&i)<<2|(s=t.charCodeAt(c++))>>6,r=63&s,isNaN(i)?a=r=64:isNaN(s)&&(r=64),h=h+l.charAt(n)+l.charAt(o)+l.charAt(a)+l.charAt(r);return h},C.base64Decode=function(t){var e,i,s,n,o,a,r="",h=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<t.length;)e=l.indexOf(t.charAt(h++))<<2|(n=l.indexOf(t.charAt(h++)))>>4,i=(15&n)<<4|(o=l.indexOf(t.charAt(h++)))>>2,s=(3&o)<<6|(a=l.indexOf(t.charAt(h++))),r+=String.fromCharCode(e),64!=o&&(r+=String.fromCharCode(i)),64!=a&&(r+=String.fromCharCode(s));return r=C._utf8_decode(r)},C._utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?e+=String.fromCharCode(s):(127<s&&s<2048?e+=String.fromCharCode(s>>6|192):(e+=String.fromCharCode(s>>12|224),e+=String.fromCharCode(s>>6&63|128)),e+=String.fromCharCode(63&s|128))}return e},C._utf8_decode=function(t){for(var e="",i=0,s=0,n=0;i<t.length;)(s=t.charCodeAt(i))<128?(e+=String.fromCharCode(s),i++):191<s&&s<224?(n=t.charCodeAt(i+1),e+=String.fromCharCode((31&s)<<6|63&n),i+=2):(n=t.charCodeAt(i+1),c3=t.charCodeAt(i+2),e+=String.fromCharCode((15&s)<<12|(63&n)<<6|63&c3),i+=3);return e},C.getTextEncryptAndSaveToTextFile=function(t,e,i){throw Error("Command line not supported on this platform")},C.getTextEncryptAndSaveToJSONFile=function(t,e,i){throw Error("Command line not supported on this platform")},C.writeCipherTextToJSON=function(t,e,i,s){null==s&&(s=i,i={});var n="object"===(void 0===i?"undefined":o(i))&&null!==i&&"spaces"in i?i.spaces:this.spaces;try{JSON.stringify(e,i?i.replacer:null,n)+"\n"}catch(t){if(s)return s(t,null)}},void 0===String.prototype.utf8Encode&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))}),void 0===String.prototype.utf8Decode&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(t){return this}}),void 0===String.prototype.base64Encode&&(String.prototype.base64Encode=function(){if("undefined"!=typeof btoa)return btoa(this);if(void 0!==t)return new t(this,"utf8").toString("base64");throw new Error("No Base64 Encode")}),void 0===String.prototype.base64Decode&&(String.prototype.base64Decode=function(){if("undefined"!=typeof atob)return atob(this);if(void 0!==t)return new t(this,"base64").toString("utf8");throw new Error("No Base64 Decode")}),C.init(),C}),cc._RF.pop()}).call(this,e("buffer").Buffer)},{"./algo":"algo",buffer:2}],en:[function(t,e,i){"use strict";cc._RF.push(e,"56c198DTBBIIY+ESEdcT/KQ","en"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.en={leaveCoin:"Offline Earnings",double:"Double",triple:"Triple",quadruple:"Quadruple",collect:"Claim",click:"Tap",get:"Claim",getRareTip:"A Rare Creature",rareTip:"A Rare Creature",goFish:"Tap to fish!",creelSize:"Net Size",fish:"Fish",depth:"Dive Depth",rice:"m",earnings:"Offline Earnings",minute:"min",max:"Max.",specialFish:"Special!",rareFish:"Rare!",moneyMade:"Money earned",share:"Share",tankTip:"Catch more to fill it",illustrations:"Trophy Room",new:"New",achievement:"Achievements",getReward:"Get rewards",ok:"OK",receive:"Claim",newRecord:"New Record",nauticalLog:"Logbook",totalCount:"Total number of fishes",fishCount:"Fishing rounds",totalDistance:"Total fishing meters",totalCoin:"Total fishing value",highestReward:"Maximum value of single fishing",getSpecialFishCount:"Total number of special fish",upgradeCount:"Upgrading times",fishTime:"Total fishing time",getRareFishCount:"Discover rare creatures",hour:"Hour",min:"Mins",second:"Second",netError:"Network error",otherError:"Unable to get ads, please check the network",dock:"Dock",using:"In use",default:"Default",SkinAdditional_1:"Net size increases by",SkinAdditional_2:"Depth increases by",SkinAdditional_3:"Offline earnings increases by",SkinAdditional_4:"The value of fish increases by",Ratings:"Rating",giveup:"Close",evaluate:"Rate Us",fishHome_Dock:"Dock",fishHome_HandBook:"HandBook",fishHome_Achievements:"Achievements",fishHome_Aquarium:"Aquarium",fishTankSelectTitle:"Design your own aquarium",fishTankSet:"Set up",fishTankThemeTxt:"Themes",fishTankFishTxt:"Fish",fishTankComingSoon:"Coming soon",clear:"Empty",reset:"Reset",finish:"Finish",close:"Close",Maximum:"Reach the max limit of tank",toFish:"Go fishing",themeAndPetInUse:"In use",themeAndPetUse:"Use",themeAndPetBuy:"Buy",themeAndPetAchievement:"From achievement",themeAndPetGift:"From drifting bottles",open:"Open",NoDemons:"No Demons",again:"Again",lotteryClose:"Close",bossClick:"Tap",noAdsHookEffect:"The value of fish increases by",noAdsGetHook:"get new hook",noAdsTip:"Poseidon's Trident",nodAdsLabel:"Move unless active advertising",restoreTxt:"Restore Purchase",restoreSuccess:"Restore Success",restoreFailed:"Restore Failed"},cc._RF.pop()},{}],fishLogItem:[function(t,e,i){"use strict";cc._RF.push(e,"a3df1Qmjr1ITbeMIZ2sNsxO","fishLogItem");var c=t("Types").LogType,l=t("Utils");cc.Class({extends:cc.Component,properties:{bg:cc.Sprite,desc:cc.Label,count:cc.Label},start:function(){},init:function(t,e,i){this.game=t;var s=c[e].substring(4,c[e].length),n=null;switch(e){case c.Log_totalCount:n=this.game.userData.fishData.totalCount;break;case c.Log_fishCount:n=this.game.userData.fishData.fishCount;break;case c.Log_totalDistance:n=this.game.userData.totalDistance;break;case c.Log_totalCoin:n=this.game.userData.fishData.totalCoin;break;case c.Log_highestReward:n=this.game.userData.fishData.highestReward;break;case c.Log_getSpecialFishCount:n=this.game.userData.fishData.specialFishCount;break;case c.Log_upgradeCount:n=this.game.userData.upgradeCount;break;case c.Log_getRareFishCount:n=Object.getOwnPropertyNames(this.game.userData.fishGet.rare).length;break;case c.Log_fishTime:var o=1e3*this.game.userData.fishTime,a=l.getDateByStampMss(o);n="";for(var r=0;r<a.length;r++){var h=a[r];0===h&&2!==r||(n+=h,0===r?n+=" "+this.game.i18n.t("hour")+" ":1===r?n+=" "+this.game.i18n.t("min")+" ":2===r&&(n+=" "+this.game.i18n.t("second")))}break;default:n=""}this.desc.string=this.game.i18n.t(s),this.count.string=n,this.bg.node.opacity=i%2==0?89.25:255}}),cc._RF.pop()},{Types:"Types",Utils:"Utils"}],fishLogMng:[function(t,e,i){"use strict";cc._RF.push(e,"d0b8fI0BXVDWoTuIsXnDUSm","fishLogMng");var s=t("Types");cc.Class({extends:cc.Component,properties:{fishLogItemPrefab:cc.Prefab},onLoad:function(){},start:function(){},init:function(){this.fishLogPool=new cc.NodePool;for(var t=cc.Enum.getList(s.LogType).length,e=0;e<t;++e){var i=cc.instantiate(this.fishLogItemPrefab);this.fishLogPool.put(i)}},createItem:function(t){return 0<this.fishLogPool.size()?this.fishLogPool.get():cc.instantiate(this.fishLogItemPrefab)},returnItem:function(t){this.fishLogPool.put(t)},returnAllItem:function(t){for(var e=t.length-1;0<=e;e--){var i=t[e];this.returnItem(i),t.splice(e,1)}}}),cc._RF.pop()},{Types:"Types"}],moveNode:[function(t,e,i){"use strict";cc._RF.push(e,"67c4bL+3A1KmLqzkb7r5U8i","moveNode"),cc.Class({extends:cc.Component,properties:{xSpeed:-3},start:function(){},update:function(t){this.node.x+=this.xSpeed;var e=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);this.xSpeed<0?e.x<0+-this.node.width/2&&(this.node.x=this.node.parent.convertToNodeSpaceAR(cc.p(cc.winSize.width+this.node.width/2,e.y)).x):e.x>cc.winSize.width+this.node.width/2&&(this.node.x=this.node.parent.convertToNodeSpaceAR(cc.p(-this.node.width/2,e.y)).x)}}),cc._RF.pop()},{}],"polyglot.min":[function(t,e,i){"use strict";cc._RF.push(e,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min");var s,n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};s=void 0,n=function(e){function t(t){t=t||{},this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en",this.allowMissing=!!t.allowMissing,this.warn=t.warn||i}function n(t,e,i){var s,n,o,a,r,h,c;return null!=i&&t?(o=(n=t.split(l))[(a=e,r=i,d[(h=a,c=function(t){var e,i,s,n={};for(e in t)if(t.hasOwnProperty(e))for(s in i=t[e])n[i[s]]=e;return n}(u),c[h]||c.en)](r))]||n[0],s=o.replace(/^\s+|\s+$/g,"")):s=t,s}function i(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}t.VERSION="0.4.3",t.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},t.prototype.extend=function(t,e){var i;for(var s in t)t.hasOwnProperty(s)&&(i=t[s],e&&(s=e+"."+s),"object"==(void 0===i?"undefined":o(i))?this.extend(i,s):this.phrases[s]=i)},t.prototype.clear=function(){this.phrases={}},t.prototype.replace=function(t){this.clear(),this.extend(t)},t.prototype.t=function(t,e){var i,s;return"number"==typeof(e=null==e?{}:e)&&(e={smart_count:e}),"string"==typeof this.phrases[t]?i=this.phrases[t]:"string"==typeof e._?i=e._:this.allowMissing?i=t:(this.warn('Missing translation for key: "'+t+'"'),s=t),"string"==typeof i&&(e=function(t){var e={};for(var i in t)e[i]=t[i];return e}(e),s=function(t,e){for(var i in e)"_"!==i&&e.hasOwnProperty(i)&&(t=t.replace(new RegExp("%\\{"+i+"\\}","g"),e[i]));return t}(s=n(i,this.currentLocale,e.smart_count),e)),s},t.prototype.has=function(t){return t in this.phrases};var l="||||",d={chinese:function(t){return 0},german:function(t){return 1!==t?1:0},french:function(t){return 1<t?1:0},russian:function(t){return t%10==1&&t%100!=11?0:2<=t%10&&t%10<=4&&(t%100<10||20<=t%100)?1:2},czech:function(t){return 1===t?0:2<=t&&t<=4?1:2},polish:function(t){return 1===t?0:2<=t%10&&t%10<=4&&(t%100<10||20<=t%100)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0}},u={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return t},"function"==typeof define&&define.amd?define([],function(){return n(s)}):"object"==(void 0===i?"undefined":o(i))?e.exports=n(s):s.Polyglot=n(s),cc._RF.pop()},{}],seaWave:[function(t,e,i){"use strict";cc._RF.push(e,"9aabfTfFO1EcpC5X7AnzTnw","seaWave"),cc.Class({extends:cc.Component,properties:{waveImg:cc.Sprite,offsetM:40},init:function(t){this.game=t;var e=this.waveImg.node.width,i=cc.winSize.width;this.waveImg.node.scale=i/e},start:function(){},update:function(t){if(this.game){var e=this.game.hook.node.y,i=e+cc.winSize.height-this.waveImg.node.height,s=e-cc.winSize.height+this.waveImg.node.height,n=i/F.PTM_RATIO,o=s/F.PTM_RATIO,a=Math.abs(n/this.offsetM),r=Math.abs(o/this.offsetM);if(Math.floor(r)-Math.floor(a)==1){var h=Math.floor(r)*(-this.offsetM*F.PTM_RATIO);this.waveImg.node.y=h}}}}),cc._RF.pop()},{}],tipLabel:[function(t,e,i){"use strict";cc._RF.push(e,"19254BDP2pHgpF1y/Lodkkw","tipLabel"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},showTip:function(t){this.node.active=!0;var e=cc.callFunc(function(){this.node.active=!1},this);this.node.runAction(cc.moveBy(.3,0,30),e)}}),cc._RF.pop()},{}],waveList:[function(t,e,i){"use strict";cc._RF.push(e,"6c1d5zaEgRILKDJ7z/TbNa0","waveList"),cc.Class({extends:cc.Component,properties:{waveList:{default:[],type:cc.Node},speedX:-3},onLoad:function(){for(var t=0;t<this.waveList.length;t++){var e=this.waveList[t];e.x=0===t?-cc.winSize.width/2:this.waveList[t-1].x+this.waveList[t-1].width/2+e.width/2}},start:function(){},update:function(t){for(var e=0;e<this.waveList.length;e++){var i=this.waveList[e];if(i.x<-i.width/2-cc.winSize.width/2){var s=e-1;-1===s&&(s=this.waveList.length-1),i.x=this.waveList[s].x+this.waveList[s].width/2+i.width/2}i.x+=this.speedX}}}),cc._RF.pop()},{}],zh_cn:[function(t,e,i){"use strict";cc._RF.push(e,"7c4e4VPolxNIJo+T6QX+OMA","zh_cn"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.zh_cn={leaveCoin:"离线收益",double:"双倍",triple:"三倍",quadruple:"四倍",collect:"收集",click:"点击",get:"获得",getRareTip:"捕获稀有生物",rareTip:"发现稀有生物",goFish:"点击来钓鱼!",creelSize:"渔网尺寸",fish:"鱼",depth:"深度",rice:"米",earnings:"离线收益",minute:"分钟",max:"最大",specialFish:"特殊鱼",rareFish:"稀有生物",moneyMade:"赚到的钱",share:"分享",tankTip:"抓住更多, 填满它",illustrations:"图鉴",new:"新的",achievement:"成就",getReward:"获取奖励",ok:"确定",receive:"可领取",newRecord:"新记录",nauticalLog:"航海日志",totalCount:"钓鱼总数",fishCount:"钓鱼次数",totalDistance:"钓鱼总米数",totalCoin:"钓鱼总价值",highestReward:"单次钓鱼最高价值",getSpecialFishCount:"钓到的特殊鱼总数",upgradeCount:"升级次数",fishTime:"钓鱼总时长",getRareFishCount:"发现稀有生物",hour:"时",min:"分",second:"秒",netError:"网络错误",otherError:"无法获取广告,请检查网络",dock:"船坞",using:"使用中",default:"默认",SkinAdditional_1:"渔网容量增加",SkinAdditional_2:"下潜深度增加",SkinAdditional_3:"离线收益增加",SkinAdditional_4:"鱼价值提升",Ratings:"评级",giveup:"放弃",evaluate:"请为我们评分",fishHome_Dock:"船坞",fishHome_HandBook:"图鉴",fishHome_Achievements:"成就",fishHome_Aquarium:"水族馆",fishTankSelectTitle:"设计你自己的水族馆",fishTankSet:"设置",fishTankThemeTxt:"主题",fishTankFishTxt:"鱼",fishTankComingSoon:"敬请期待",clear:"清除",reset:"重置",finish:"完成",close:"关闭",Maximum:"达到上限",toFish:"去钓鱼吧",themeAndPetInUse:"已使用",themeAndPetUse:"使用",themeAndPetBuy:"购买",themeAndPetAchievement:"成就获取",themeAndPetGift:"漂流瓶获取",open:"打开",NoDemons:"没有恶魔",again:"重抽",lotteryClose:"关闭",bossClick:"点击",noAdsHookEffect:"鱼价值提升",noAdsGetHook:"获得新鱼钩",noAdsTip:"波塞冬的三叉戟",nodAdsLabel:"移除非主动式广告",restoreTxt:"恢复购买",restoreSuccess:"恢复成功",restoreFailed:"恢复失败"},cc._RF.pop()},{}],zh_tw:[function(t,e,i){"use strict";cc._RF.push(e,"bc5758QS4ZCrbe+/hxnMnVs","zh_tw"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.zh_tw={leaveCoin:"離線收益",double:"雙倍",triple:"三倍",quadruple:"四倍",collect:"收集",click:"點擊",get:"獲得",getRareTip:"捕獲稀有生物",rareTip:"發現稀有生物",goFish:"點擊來釣魚!",creelSize:"漁網尺寸",fish:"魚",depth:"深度",rice:"米",earnings:"離線收益",minute:"分鐘",max:"最大",specialFish:"特殊魚",rareFish:"稀有生物",moneyMade:"賺到的錢",share:"分享",tankTip:"抓住更多, 填滿它",illustrations:"圖鑒",new:"新的",achievement:"成就",getReward:"獲取獎勵",ok:"確定",receive:"可領取",newRecord:"新紀錄",nauticalLog:"航海日誌",totalCount:"釣魚總數",fishCount:"釣魚次數",totalDistance:"釣魚總米數",totalCoin:"釣魚總價值",highestReward:"單次釣魚最高價值",getSpecialFishCount:"釣到的特殊魚總數",upgradeCount:"陞級次數",fishTime:"釣魚總時長",getRareFishCount:"發現稀有生物",hour:"時",min:"分",second:"秒",netError:"網絡錯誤",otherError:"無法獲取廣告，請檢查網絡",dock:"船塢",using:"使用中",default:"默認",SkinAdditional_1:"漁網容量增加",SkinAdditional_2:"下潜深度增加",SkinAdditional_3:"離線收益增加",SkinAdditional_4:"魚價值提升",ratings:"評級",giveup:"放棄",evaluate:"請為我們評分",fishHome_Dock:"船塢",fishHome_HandBook:"圖鑒",fishHome_Achievements:"成就",fishHome_Aquarium:"水族館",fishTankSelectTitle:"設計你自己的水族館",fishTankSet:"設置",fishTankThemeTxt:"主題",fishTankFishTxt:"魚",fishTankComingSoon:"敬請期待",clear:"清空",reset:"重置",finish:"完成",close:"關閉",Maximum:"達到上限",toFish:"去釣魚吧",themeAndPetInUse:"已使用",themeAndPetUse:"使用",themeAndPetBuy:"購買",themeAndPetAchievement:"成就獲取",themeAndPetGift:"漂流瓶獲取",open:"打開",NoDemons:"沒有惡魔",again:"重抽",lotteryClose:"關閉",bossClick:"點擊",noAdsHookEffect:"魚價值提升",noAdsGetHook:"獲得新魚鉤",noAdsTip:"波塞冬的三叉戟",nodAdsLabel:"移除非主動式廣告",restoreTxt:"恢復購買",restoreSuccess:"恢復成功",restoreFailed:"恢復失敗"},cc._RF.pop()},{}]},{},["BossCoin","coinShow","Creel","en","zh_cn","zh_tw","CameraControl","LoadConfig","algo","encryptjs","Evaluate","DragableFishTank","FishHome","FishTank","OnMultiTouchCtrl","SkinItem","SkinLayer","Achievement","AchievementCheck","GetRewardLayer","Reward","FishBook","FishBookDetail","FishBookItem","FishLog","fishLogItem","fishLogMng","FishTankTypeSelect","SetThemeAndPetLayer","TankFishShow","TankFishShowItem","Fish","FishMng","Spawn","Game","Global","HelloWorld","Hook","Line","LoadScene","LogoAni","NoAdsLayer","Pet","UserDataStorage","AudioMng","Boat","BoatItem","Bubble","BubbleMng","moveNode","DistanceTip","DistanceTipMng","Lottery","Player","seaWave","Stone","StoneMng","BattleUI","BossLayer","GameUI","GetRareLayer","LeaveCoin","MaskLayer","Over","ReadyUI","CrazyProgress","SkillItem","ADUtils","ActEffect","Dragable","FishNodePool","FishPoolMng","Mask_extend","MoveEffect","NodePool","PageViewCtrl","ThemeAndPetItem","PoolMng","RollNum","RollNumProgress","SetZIndex","Types","Utils","tipLabel","waveList","WhitePoint","WhitePointMng","LanguageData","LocalizedLabel","LocalizedSprite","SpriteFrameSet","polyglot.min"]);